(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{87094:function(e,t,s){Promise.resolve().then(s.bind(s,17138))},17138:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return e8}});var l=s(57437),a=s(2265),n=s(9881),r=s(58177),i=s(8603),o=s(14063),c=s(95183),d=s(50670),x=s.n(d),u=s(72810),m=s.n(u),f=s(5117),g=s.n(f),p=s(58146),h=s.n(p);let b={Inter:x(),Plus_Jakarta_Sans:m(),Open_Sans:g(),PT_Mono:h()},v=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")},j=e=>{let t=e||document.activeElement;t&&t instanceof HTMLElement&&t.blur()},w=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/import_files")};var N=e=>{let{title:t="",key:s="Button"+t,Icon:a,onClick:n=()=>{},onMouseEnter:r=()=>{},onMouseLeave:i=()=>{},disabled:o=!1,className:c="",text_class_name:d="",selected:x=!1,selected_color:u="bg-button-verba",selected_text_color:m="text-text-verba-button",text_size:f="text-sm",icon_size:g=15,type:p="button",loading:h=!1,circle:b=!1,button_size:v="",onClickParams:j=[]}=e;return(0,l.jsx)("button",{type:p,className:c+" btn rounded-lg flex-grow items-center justify-center border-none ".concat(b?"btn-circle":""," ").concat(v," hover:bg-button-hover-verba hover:text-text-verba-button ").concat(x?u+" shadow-md "+m:" bg-button-verba shadow-none text-text-alt-verba-button"," "),onClick:e=>n(e,...j),disabled:o,onMouseEnter:r,onMouseLeave:i,children:h?(0,l.jsx)("span",{className:"text-text-verba-button loading loading-spinner loading-sm"}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[a&&(0,l.jsx)(a,{size:g,className:"w-[20px]"}),t&&(0,l.jsx)("p",{title:t,className:f+" "+d,children:t})]})})},s)},y=e=>{let{Icon:t,title:s,currentPage:a,setPage:n,setCurrentPage:r,hide:i}=e;return(0,l.jsx)(N,{title:s,Icon:t,selected_color:"bg-primary-verba",selected:a===n,onClick:()=>{r(n)},disabled:i})};async function _(){try{let e=await fetch("https://api.github.com/repos/weaviate/verba",{method:"GET"}),t=await e.json();if(t)return t.stargazers_count;return 0}catch(e){return console.error("Failed to perform search:",e),0}}let S=e=>e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString();var C=e=>{let{imageSrc:t,title:s,subtitle:n,currentPage:d,setCurrentPage:x,production:u}=e,[m,f]=(0,a.useState)("0");return(0,a.useEffect)(()=>{(async()=>{try{let e=await _();if(e){let t=S(e);f(t)}}catch(e){console.error("Failed to fetch GitHub stars:",e)}})()},[]),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,l.jsx)("img",{src:t,className:"flex rounded-lg w-[50px] md:w-[80px] md:h-[80px] object-contain"}),(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,l.jsx)("p",{className:"text-2xl md:text-3xl text-text-verba",children:s}),(0,l.jsx)("p",{className:"text-sm md:text-base text-text-alt-verba font-light",children:n})]}),(0,l.jsx)("div",{className:"flex md:hidden flex-col items-center gap-3 justify-between",children:(0,l.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,l.jsx)(N,{Icon:c.QQh,title:"Menu"}),(0,l.jsxs)("ul",{tabIndex:0,className:"dropdown-content dropdown-left z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:[(0,l.jsx)("li",{children:(0,l.jsx)("a",{className:"CHAT"===d?"font-bold":"",onClick:()=>{x("CHAT"),j()},children:"Chat"})},"Menu Button1"),(0,l.jsx)("li",{children:(0,l.jsx)("a",{className:"DOCUMENTS"===d?"font-bold":"",onClick:()=>{x("DOCUMENTS"),j()},children:"Documents"})},"Menu Button2"),"Demo"!=u&&(0,l.jsx)("li",{children:(0,l.jsx)("a",{className:"ADD"===d?"font-bold":"",onClick:()=>{x("ADD"),j()},children:"Import Data"})},"Menu Button4"),"Demo"!=u&&(0,l.jsx)("li",{children:(0,l.jsx)("a",{className:"SETTINGS"===d?"font-bold":"",onClick:()=>{x("SETTINGS"),j()},children:"Settings"})},"Menu Button5")]})]})})]}),(0,l.jsx)("div",{className:"flex flex-row justify-center items-center",children:(0,l.jsxs)("div",{className:"hidden md:flex flex-row items-center gap-3 justify-between",children:[(0,l.jsx)(y,{hide:!1,Icon:r.utr,title:"Chat",currentPage:d,setCurrentPage:x,setPage:"CHAT"}),(0,l.jsx)(y,{hide:"Demo"==u,Icon:i.Lgw,title:"Import Data",currentPage:d,setCurrentPage:x,setPage:"ADD"}),(0,l.jsx)(y,{hide:!1,Icon:r.emU,title:"Documents",currentPage:d,setCurrentPage:x,setPage:"DOCUMENTS"}),(0,l.jsx)(y,{hide:"Demo"==u,Icon:r.zfW,title:"Settings",currentPage:d,setCurrentPage:x,setPage:"SETTINGS"}),(0,l.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden md:block bg-text-alt-verba w-px"}),(0,l.jsx)(N,{title:m,Icon:o.hJX,onClick:()=>{window.open("https://github.com/weaviate/verba","_blank","noopener,noreferrer")},className:"hidden md:block",text_size:"text-xs",icon_size:18,disabled:!1,selected:!1})]})})]})};let k=async e=>{try{return(await fetch(e)).ok}catch(t){return console.error("Failed to fetch from ".concat(e,":"),t),!1}},I=async()=>{if(await k("http://localhost:8000/api/health"))return"http://localhost:8000";if(await k("/api/health"))return window.location.origin;throw Error("Both health checks failed, please check the Verba Server")},E=async e=>{try{let t=await I(),s=await fetch("".concat(t).concat(e),{method:"GET"}),l=await s.json();return l||console.warn("Could not retrieve data from ".concat(e)),l}catch(t){return console.error("Failed to fetch data from ".concat(e,":"),t),null}},R=()=>E("/api/health"),D=async(e,t,s)=>{let l=await I(),a=await fetch("".concat(l,"/api/connect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:{deployment:e,url:t,key:s}})});return await a.json()},O=async e=>{try{let t=await I(),s=await fetch("".concat(t,"/api/get_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await s.json()}catch(e){return console.error("Error retrieving content",e),null}},A=async(e,t)=>{if(!e)return!1;try{let s=await I(),l=await fetch("".concat(s,"/api/set_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rag_config:e,credentials:t})});return 200===l.status}catch(e){return console.error("Error setting config:",e),!1}},T=async(e,t,s)=>{try{let l=await I(),a=await fetch("".concat(l,"/api/set_theme_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themes:e,theme:t,credentials:s})});return 200===a.status}catch(e){return console.error("Error setting config:",e),!1}},F=async(e,t,s,l,a)=>{try{let n=await I(),r=await fetch("".concat(n,"/api/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,RAG:t,labels:s,documentFilter:l,credentials:a})});return await r.json()}catch(e){return console.error("Error sending query",e),null}},M=async(e,t)=>{if(!e)return null;try{let s=await I(),l=await fetch("".concat(s,"/api/get_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return await l.json()}catch(e){return console.error("Error retrieving selected document",e),null}},L=async(e,t,s)=>{try{let l=await I(),a=await fetch("".concat(l,"/api/get_datacount"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embedding_model:e,documentFilter:t,credentials:s})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},z=async e=>{try{let t=await I(),s=await fetch("".concat(t,"/api/get_labels"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await s.json()}catch(e){return console.error("Error retrieving content",e),null}},P=async(e,t,s,l)=>{if(!e)return null;try{let a=await I(),n=await fetch("".concat(a,"/api/get_content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,chunkScores:s,credentials:l})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},G=async(e,t,s)=>{if(!e)return null;try{let l=await I(),a=await fetch("".concat(l,"/api/get_vectors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,showAll:t,credentials:s})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},J=async(e,t,s,l)=>{if(!e)return null;try{let a=await I(),n=await fetch("".concat(a,"/api/get_chunks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,pageSize:s,credentials:l})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},W=async(e,t,s)=>{if(!e)return null;try{let l=await I(),a=await fetch("".concat(l,"/api/get_chunk"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,embedder:t,credentials:s})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},U=async(e,t,s,l,a)=>{try{let n=await I(),r=await fetch("".concat(n,"/api/get_all_documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,labels:t,page:s,pageSize:l,credentials:a})});return await r.json()}catch(e){return console.error("Error retrieving all documents",e),null}},B=async(e,t)=>{try{let s=await I(),l=await fetch("".concat(s,"/api/delete_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===l.status}catch(e){return console.error("Error deleting document",e),!1}},V=async(e,t)=>{try{let s=await I(),l=await fetch("".concat(s,"/api/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e,credentials:t})});return 200===l.status}catch(e){return console.error("Error deleting all documents",e),!1}},q=async e=>{try{let t=await I(),s=await fetch("".concat(t,"/api/get_meta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await s.json()}catch(e){return console.error("Error retrieving selected document",e),null}},H=async(e,t,s)=>{try{let l=await I(),a=await fetch("".concat(l,"/api/get_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,limit:t,credentials:s})});return await a.json()}catch(e){return console.error("Error retrieving suggestions",e),null}},K=async(e,t)=>{try{let s=await I(),l=await fetch("".concat(s,"/api/delete_suggestion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===l.status}catch(e){return console.error("Error deleting suggestion",e),!1}},Y=async(e,t,s)=>{try{let l=await I(),a=await fetch("".concat(l,"/api/get_all_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:e,pageSize:t,credentials:s})});return await a.json()}catch(e){return console.error("Error retrieving all suggestions",e),null}};var X=s(65125),$=e=>{let{tooltip_text:t,display_text:s}=e,[n,r]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:"items-center gap-2 flex",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(N,{title:"",Icon:o.LL$,icon_size:10,disabled:!1,selected:!1,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),circle:!0,button_size:"btn-xs"}),(0,l.jsx)("div",{className:"absolute left-full z-30 p-4 bg-bg-verba text-text-alt-verba text-xs rounded-xl shadow-md w-[300px] transition-opacity duration-300 ".concat(n?"opacity-100":"opacity-0 pointer-events-none"),children:(0,l.jsx)("p",{className:"w-full whitespace-normal",children:t})})]}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba truncate max-w-[350px]",title:s,children:s})]})},Z=e=>{let{title:t,modal_id:s,text:a,triggerAccept:n,triggerString:r,triggerValue:i}=e;return(0,l.jsx)("dialog",{id:s,className:"modal",children:(0,l.jsxs)("div",{className:"modal-box flex flex-col gap-2",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,l.jsx)("p",{className:"whitespace-pre-wrap",children:a}),(0,l.jsx)("div",{className:"modal-action",children:(0,l.jsxs)("form",{method:"dialog",className:"flex gap-2",children:[n&&r&&(0,l.jsx)(N,{type:"submit",title:r,onClick:()=>{n(i)}}),(0,l.jsx)(N,{type:"submit",title:"Cancel",selected_color:"bg-warning-verba",selected:!0})]})})]})})},Q=e=>{let{selectedDocument:t,setSelectedDocument:s,production:n,addStatusMessage:r,credentials:c}=e,[d,x]=(0,a.useState)(""),[u,m]=(0,a.useState)(1),[f,g]=(0,a.useState)([]),[p,h]=(0,a.useState)(0),[b,v]=(0,a.useState)([]),[j,w]=(0,a.useState)([]),[y,_]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),k=async e=>{try{C(!0);let t=await U(e||"",j,u,50,c);t&&(""!==t.error?(console.error(t.error),C(!1),g(null),h(0)):(g(t.documents),v(t.labels),C(!1),h(t.totalDocuments)))}catch(e){console.error("Failed to fetch document:",e),C(!1)}};(0,a.useEffect)(()=>{_(!0)},[]),(0,a.useEffect)(()=>{k(d)},[u,y,j]);let I=()=>{k(d)},E=async e=>{if("Demo"==n)return;let l=await B(e,c);r("Deleted document","WARNING"),l&&(e==t&&s(null),k(d))},R=e=>{w(t=>t.filter(t=>t!==e))},D=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,l.jsx)("div",{className:"hidden lg:flex gap-2 justify-start w-[8vw]",children:(0,l.jsx)($,{tooltip_text:"Search and inspect different documents imported into Verba",display_text:"Search"})}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),I())},placeholder:"Search for documents (".concat(p,")"),value:d,onChange:e=>{x(e.target.value)}})}),(0,l.jsx)(N,{onClick:I,Icon:o.U41}),(0,l.jsx)(N,{onClick:()=>{x(""),w([]),k("")},icon_size:20,Icon:X.Ffb})]}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 gap-3 items-center h-full w-full overflow-auto",children:[(0,l.jsxs)("div",{className:"flex flex-col w-full justify-start gap-2",children:[(0,l.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,l.jsx)("label",{tabIndex:0,children:(0,l.jsx)(N,{title:"Label",className:"btn-sm min-w-min",icon_size:12,text_class_name:"text-xs",Icon:i.Lgw,selected:!1,disabled:!1})}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:b.map((e,t)=>(0,l.jsx)("li",{children:(0,l.jsx)("a",{onClick:()=>{j.includes(e)||w([...j,e]);let t=document.activeElement;t.blur();let s=t.closest(".dropdown");s&&s.blur()},children:e})},"Label"+t))})]}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map((e,t)=>(0,l.jsx)(N,{title:e,Icon:X.B4e,className:"btn-sm min-w-min max-w-[200px]",icon_size:12,selected_color:"bg-primary-verba",selected:!0,text_class_name:"truncate max-w-[200px]",text_size:"text-xs",onClick:()=>{R(e)}},"FilterDocumentLabel"+t))})]}),S&&(0,l.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,l.jsx)("span",{className:"loading loading-spinner loading-sm text-text-alt-verba"})}),(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[f&&f.map((e,a)=>(0,l.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center w-full gap-2",children:[(0,l.jsx)(N,{title:e.title,selected:t==e.uuid,selected_color:"bg-secondary-verba",className:"w-[200px] lg:w-[400px]",text_class_name:"truncate max-w-[150px] lg:max-w-[350px]",onClick:()=>s(e.uuid)},e.title+a),"Demo"!==n&&(0,l.jsx)(N,{Icon:o.Xm5,selected:t==e.uuid,selected_color:"bg-warning-verba",className:"max-w-min",onClick:()=>{D("remove_document"+e.uuid)}},e.title+a+"delete")]}),(0,l.jsx)(Z,{modal_id:"remove_document"+e.uuid,title:"Remove Document",text:"Do you want to remove "+e.title+"?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:E})]},"Document"+a+e.title))," "]})]}),(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-center h-min w-full",children:(0,l.jsx)("div",{className:"flex gap-3 items-center justify-center w-full",children:(0,l.jsx)("div",{className:"join justify-center items-center text-text-verba",children:(0,l.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-verba",children:[(0,l.jsx)(N,{title:"Previous Page",onClick:()=>{f&&(1==u?m(Math.ceil(p/50)):m(e=>e-1))},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:o.O18}),(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("p",{className:"text-xs text-text-verba",children:["Page ",u]})}),(0,l.jsx)(N,{title:"Next Page",onClick:()=>{f&&(50*u<p?m(e=>e+1):m(1))},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:o.Rdr})]})})})})]})},ee=s(68842),et=s(33149),es=s(26547),el=s(20789),ea=s(77954),en=s(97776),er=s(71375);let ei=["green","blue","red","yellow","purple","cyan","orange","limegreen","pink","teal","violet","forestgreen","gold","navy","magenta","mediumspringgreen","darkorange","deepskyblue","crimson","lightseagreen","royalblue","chartreuse","mediumorchid","aqua","orangered","mediumaquamarine","plum","lime","dodgerblue","lightcoral","mediumslateblue","lightgreen","darkred","springgreen","lightpink","indigo","lightyellow","mediumvioletred","seagreen","fuchsia","darkseagreen","thistle","orange","powderblue","yellowgreen","cornflowerblue","darkmagenta","darkblue","gold","mediumblue","rosybrown","darkgreen","lightskyblue","mediumseagreen","firebrick","lavender","darkcyan","khaki","mediumturquoise","saddlebrown","lightblue","olive","mintcream","turquoise","rebeccapurple","lightgoldenrodyellow"];function eo(e,t,s){return s===t?0:(e-t)/(s-t)}(0,ee.e)({OrbitControls:es.z});let ec=e=>{let{vector:t,color:s,setHoverTitle:n,documentTitle:r,multiplication:i,dynamicColor:o,chunk_id:c,chunk_uuid:d,setSelectedChunk:x,selectedChunk:u,minX:m,maxX:f,minY:g,maxY:p,minZ:h,maxZ:b,chunkScores:v}=e,j=(0,a.useRef)(null),w=(0,a.useRef)(!1),N=(0,a.useMemo)(()=>null==v?void 0:v.some(e=>e.uuid===d),[v,d]),y=(0,a.useMemo)(()=>N?new en.Color("yellow"):u===d?new en.Color("green"):o?function(e,t,s,l,a,n,r){let i=eo(e.x,t,s),o=eo(e.y,l,a),c=eo(e.z,n,r);return new en.Color("rgb(".concat(Math.floor(255*i),",").concat(Math.floor(255*o),",").concat(Math.floor(255*c),")"))}(t,m,f,g,p,h,b):new en.Color(s),[N,u,d,o,s,t,m,f,g,p,h,b]),_=N?3:u===d?1.5:1,S=N?1:w.current?1:.5,C=(0,a.useCallback)(()=>{w.current=!0,n.current("".concat(r," | ").concat(c))},[r,c,n]),k=(0,a.useCallback)(()=>{w.current=!1,n.current(null)},[n]),I=(0,a.useCallback)(()=>{x(d)},[d,x]);return(0,ee.C)(()=>{if(j.current){j.current.position.lerp(new en.Vector3(t.x*i,t.y*i,t.z*i),.02);let e=j.current.material;e.color.set(w.current?"blue":y),e.opacity=w.current?1:S,e.transparent=!w.current}}),(0,l.jsx)(el.b,{rotationIntensity:.2,children:(0,l.jsxs)("mesh",{ref:j,position:[0,0,0],onPointerEnter:C,onPointerLeave:k,onClick:I,children:[(0,l.jsx)("sphereGeometry",{args:[_,32,32]}),(0,l.jsx)("meshBasicMaterial",{color:y,opacity:S,transparent:!0})]})})};var ed=e=>{let{credentials:t,selectedDocument:s,chunkScores:n}=e;(0,a.useRef)([]);let[r,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)([]),[d,x]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!0),[p,h]=(0,a.useState)(null),b=(0,a.useRef)(e=>h(e)),[v,j]=(0,a.useState)(200),[w,N]=(0,a.useState)(0),[y,_]=(0,a.useState)(null),[S,C]=(0,a.useState)(null),[k,I]=(0,a.useState)(-1),[E,R]=(0,a.useState)(1),[D,O]=(0,a.useState)(-1),[A,T]=(0,a.useState)(1),[F,M]=(0,a.useState)(-1),[L,z]=(0,a.useState)(1);function P(e){return{min:Math.min(...e),max:Math.max(...e)}}(0,a.useEffect)(()=>{s?U():c([])},[u,s]),(0,a.useEffect)(()=>{y?J():C(null)},[y]);let J=async()=>{try{let e=await W(y,d,t);e&&(""!==e.error?(console.error(e.error),C(null)):C(e.chunk))}catch(e){console.error("Failed to fetch document:",e),i(!1)}},U=async()=>{try{i(!0);let e=await G(s,u,t);if(e){if(""!==e.error)console.error(e.error),i(!1),c([]),N(0),x("None");else if(c(e.vector_groups.groups),x(e.vector_groups.embedder),N(e.vector_groups.dimensions),i(!1),!u){let t=e.vector_groups.groups[0].chunks.map(e=>e.vector.x),s=e.vector_groups.groups[0].chunks.map(e=>e.vector.y),l=e.vector_groups.groups[0].chunks.map(e=>e.vector.z),{min:a,max:n}=P(t);I(a),R(n);let{min:r,max:i}=P(s);O(r),T(i);let{min:o,max:c}=P(l);M(o),z(c)}}}catch(e){console.error("Failed to fetch document:",e),i(!1)}};return(0,l.jsxs)("div",{className:"flex flex-col gap-2 h-full w-full",children:[(0,l.jsx)("div",{className:"flex justify-end w-full gap-2 items-center",children:(0,l.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[r&&(0,l.jsx)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2 h-full",children:(0,l.jsx)("span",{className:"loading loading-spinner loading-xs lg:loading-sm"})}),(0,l.jsx)("p",{className:"text-text-alt-verba text-xs lg:text-sm font-bold",children:"Embedding Model:"}),(0,l.jsx)("p",{className:"text-text-alt-verba text-xs lg:text-sm",children:d})]}),(0,l.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,l.jsx)("p",{className:"text-text-alt-verba text-xs lg:text-sm font-bold",children:"Hover:"}),(0,l.jsx)("p",{className:"text-xs lg:text-sm text-text-alt-verba truncate max-w-[100px] lg:max-w-[300px]",title:null!=p?p:"",children:null!=p?p:""})]}),(0,l.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,l.jsx)("p",{className:"text-text-alt-verba text-xs lg:text-sm font-bold",children:"Vectors:"}),(0,l.jsxs)("p",{className:"text-xs lg:text-sm text-text-alt-verba",children:[o.length," x ",(()=>{let e=0;for(let t of o)e+=t.chunks.length;return e})()," x ",w]})]})]}),(0,l.jsxs)("div",{className:"flex gap-10 items-center justify-between min-w-[20vw]",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,l.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Show All Documents"}),(0,l.jsx)("input",{type:"checkbox",className:"toggle",checked:u,onChange:e=>{m(e.target.checked)}})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,l.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Dynamic Coloring"}),(0,l.jsx)("input",{type:"checkbox",className:"toggle",checked:f,onChange:e=>{g(e.target.checked)}})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"dropdown dropdown-bottom flex w-full justify-start items-center",children:[(0,l.jsxs)("button",{tabIndex:0,role:"button",disabled:!0,className:"btn btn-sm bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,l.jsx)(er.WMq,{size:15}),(0,l.jsx)("p",{children:"PCA"})]}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,l.jsx)("p",{className:"text-text-alt-verba text-sm",children:"Zoom"}),(0,l.jsx)("input",{onChange:e=>{j(Number(e.target.value))},type:"range",min:0,max:"1000",value:v,className:"range range-xs grow w-full"})]})]}),S&&(0,l.jsx)("button",{onClick:()=>{C(null),_(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,l.jsx)(X.B4e,{size:15})})]})]})}),(0,l.jsxs)("div",{className:"flex gap-5 h-[45vh] w-full",children:[(0,l.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(y?"w-2/3":"w-full"," h-full"),children:(0,l.jsxs)(et.Xz,{children:[(0,l.jsx)("ambientLight",{intensity:1}),(0,l.jsx)(es.z,{}),(0,l.jsx)(ea.c,{makeDefault:!0,position:[0,0,150]}),(0,l.jsx)("axesHelper",{args:[50]}),o.map((e,t)=>e.chunks.map((s,a)=>(0,l.jsx)(ec,{dynamicColor:f,multiplication:v,vector:s.vector,color:function(e){if(!(e>=ei.length))return ei[e];{let e=Math.floor(Math.random()*ei.length);return ei[e]}}(t),setHoverTitle:b,documentTitle:e.name,chunk_id:s.chunk_id,setSelectedChunk:_,selectedChunk:y,chunk_uuid:s.uuid,minX:k,minY:D,minZ:F,maxX:E,maxY:A,maxZ:L,chunkScores:n},"Sphere_"+a+e.name)))]})}),(0,l.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(y?"w-1/3 opacity-100":"w-0 opacity-0"," overflow-auto"),children:S&&(0,l.jsxs)("div",{className:"flex flex-col p-3 gap-2 w-full",children:[(0,l.jsxs)("p",{className:"text-text-alt-verba fond-bold",children:["Chunk ",S.chunk_id]}),(0,l.jsx)("p",{className:"text-text-alt-verba text-sm",children:S.content})]})})]})]})},ex=s(13921),eu=s(7395),em=s(38666),ef=e=>{let{selectedDocument:t,credentials:s,selectedTheme:n}=e,[i,c]=(0,a.useState)(!1),[d,x]=(0,a.useState)([]),[u,m]=(0,a.useState)(1),[f,g]=(0,a.useState)(0),[p,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{j(u),h(1===u&&0===f)},[u,f]),(0,a.useEffect)(()=>{j(1),g(0),h(1===u&&0===f)},[t]);let b=async()=>{f===d.length-1?(await j(u+1)?m(e=>e+1):(await j(1),m(1)),g(0)):g(e=>e+1)},v=async()=>{if(0===f){if(u>1){let e=u-1;await j(e)&&(m(e),g(9))}else{let e=u,t=!0;for(;t;)(t=await j(e+1))&&e++;await j(e),m(e),g(d.length-1)}}else g(e=>e-1)},j=async e=>{try{c(!0);let l=await J(t,e,10,s);if(l){if(""===l.error)return x(l.chunks),c(!1),l.chunks.length>0;console.error(l.error),c(!1),x([])}return!1}catch(e){return console.error("Failed to fetch document:",e),c(!1),!1}};return 0==d.length?(0,l.jsx)("div",{children:i&&(0,l.jsx)("div",{className:"flex items-center justify-center text-text-verba gap-2 h-full",children:(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"})})}):(0,l.jsx)("div",{className:"flex flex-col h-full",children:d.length>0&&(0,l.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,l.jsxs)("div",{className:"flex-grow overflow-hidden p-3",children:[(0,l.jsx)("div",{className:"flex justify-between mb-2",children:(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,l.jsx)(r.$Kz,{size:12}),(0,l.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",d[f].chunk_id]})]})})}),(0,l.jsx)("div",{className:"overflow-y-auto h-[calc(100%-3rem)]",children:(0,l.jsx)(ex.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:a,children:r,...i}=e,o=/language-(\w+)/.exec(a||"");return!s&&o?(0,l.jsx)(eu.Z,{style:"dark"===n.theme?em.vk:em.Yn,language:o[1],PreTag:"div",...i,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:a,...i,children:r})}},children:d[f].content})})]}),d.length>1&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-verba",children:[(0,l.jsx)(N,{title:"Previous Chunk",onClick:v,className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",disabled:p,Icon:o.O18}),(0,l.jsx)(N,{title:"Next Chunk",onClick:b,className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:o.Rdr})]})]})})},eg=e=>{let{selectedDocument:t,credentials:s}=e,[n,r]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{c()},[t]);let c=async()=>{try{r(!0);let e=await M(t,s);e&&(""!==e.error?o(null):o(e.document),r(!1))}catch(e){console.error("Failed to fetch document:",e),r(!1)}};return(0,l.jsx)("div",{className:"flex flex-col h-full",children:n?(0,l.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,l.jsx)("span",{className:"loading loading-spinner loading-md text-text-verba bg-text-alt-verba"})}):i&&(0,l.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,l.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,l.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Title"}),(0,l.jsx)("p",{className:"text-text-verba truncate max-w-full",title:i.title,children:i.title})]}),(0,l.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,l.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Metadata"}),(0,l.jsx)("p",{className:"text-text-verba max-w-full",children:i.metadata})]}),(0,l.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,l.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Extension"}),(0,l.jsx)("p",{className:"text-text-verba max-w-full",children:i.extension})]}),(0,l.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,l.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"File Size"}),(0,l.jsx)("p",{className:"text-text-verba max-w-full",children:i.fileSize})]}),(0,l.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,l.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Source"}),(0,l.jsx)("button",{className:"text-text-verba truncate max-w-full",onClick:()=>window.open(i.source,"_blank"),title:i.source,children:i.source})]}),(0,l.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,l.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Labels"}),(0,l.jsx)("p",{className:"text-text-verba max-w-full",children:i.labels})]})]})})},ep=s(25847),eh=s(21794),eb=e=>{let{document:t,selectedDocument:s,selectedTheme:n,credentials:i,chunkScores:c}=e,[d,x]=(0,a.useState)(!0),[u,m]=(0,a.useState)(1),[f,g]=(0,a.useState)(1),[p,h]=(0,a.useState)([]),b=(0,a.useRef)(null);(0,a.useEffect)(()=>{t?v():h([]),m(1),g(1)},[t,c]),(0,a.useEffect)(()=>{t?v():(h([]),m(1),g(1))},[u]),(0,a.useEffect)(()=>{if(c&&c.length>0){var e;null===(e=b.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}},[p,c]);let v=async()=>{try{x(!0);let e=await P(s,u,c||[],i);e&&(""!==e.error?(h([{content:e.error,chunk_id:0,score:0,type:"text"}]),m(1),g(1)):(h(e.content),g(e.maxPage)),x(!1))}catch(e){console.error("Failed to fetch content from document:",e),x(!1)}},j=(e,t)=>"text"===e.type?(0,l.jsx)("div",{className:"flex p-2",ref:c?null:b,children:(0,l.jsx)(ex.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:a,children:r,...i}=e,o=/language-(\w+)/.exec(a||"");return!s&&o?(0,l.jsx)(eu.Z,{style:"dark"===n.theme?em.vk:em.Yn,language:o[1],PreTag:"div",...i,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:a,...i,children:r})}},children:e.content})},"CONTENT_SNIPPET"+t):(0,l.jsxs)("div",{className:"flex p-2 border-2 flex-col gap-2 border-secondary-verba shadow-lg rounded-3xl",ref:b,children:[(0,l.jsx)("div",{className:"flex justify-between",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,l.jsx)(eh.dvR,{size:12}),(0,l.jsx)("p",{className:"text-xs flex text-text-verba",children:"Context Used"})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,l.jsx)(r.$Kz,{size:12}),(0,l.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",e.chunk_id+1]})]}),e.score>0&&(0,l.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-primary-verba rounded-full w-fit",children:[(0,l.jsx)(eh.dvR,{size:12}),(0,l.jsx)("p",{className:"text-xs flex text-text-verba",children:"High Relevancy"})]})]})}),(0,l.jsx)(ex.D,{className:"w-full items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:a,children:r,...i}=e,o=/language-(\w+)/.exec(a||"");return!s&&o?(0,l.jsx)(eu.Z,{style:"dark"===n.theme?em.vk:em.Yn,language:o[1],PreTag:"div",...i,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:a,...i,children:r})}},children:e.content})]});return t?(0,l.jsx)("div",{className:"flex flex-col h-full",children:t&&(0,l.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,l.jsx)("div",{className:"p-3 bg-bg-alt-verba",children:(0,l.jsxs)("div",{className:"flex gap-4 w-full justify-between",children:[(0,l.jsxs)("div",{className:"flex gap-4 items-center",children:[d&&(0,l.jsx)("div",{className:"flex items-center justify-center text-text-verba gap-2",children:(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,l.jsx)("p",{className:"text-lg font-bold truncate max-w-[350px]",title:t.title,children:t.title})]}),(0,l.jsx)("div",{className:"gap-2 flex flex-wrap",children:Object.entries(t.labels).map(e=>{let[s,a]=e;return(0,l.jsx)(N,{title:a,text_size:"text-xs",text_class_name:"truncate max-w-[200px]",className:"btn-sm min-w-min max-w-[200px]"},t.title+s+a)})})]})}),(0,l.jsx)("div",{className:"flex-grow overflow-hidden p-3",children:(0,l.jsx)("div",{className:"overflow-y-auto h-full",children:p&&p.map((e,t)=>j(e,t))})}),(0,l.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-verba",children:[(0,l.jsx)(N,{title:"Previous "+(c?"Chunk":"Page"),onClick:()=>{1==u?m(f):m(e=>e-1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:o.O18}),(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("p",{className:"text-xs text-text-verba",children:[c?"Chunk ":"Page "," ",u]})}),(0,l.jsx)(N,{title:"Next "+(c?"Chunk":"Page"),onClick:()=>{u==f?m(1):m(e=>e+1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:o.Rdr})]})]})}):(0,l.jsx)("div",{})},ev=e=>{let{credentials:t,selectedDocument:s,setSelectedDocument:n,chunkScores:r,selectedTheme:c,documentFilter:d,setDocumentFilter:x,addStatusMessage:u}=e,[m,f]=(0,a.useState)("Content"),[g,p]=(0,a.useState)(!1),[h,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{s?j():b(null)},[s]);let v=e=>{window.open(e,"_blank","noopener,noreferrer")},j=async()=>{try{p(!0);let e=await M(s,t);e&&(""!==e.error?(console.error(e.error),p(!1),b(null),n(null)):(b(e.document),p(!1)))}catch(e){console.error("Failed to fetch document:",e),p(!1)}};return s?(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end lg:justify-between h-min w-full",children:[(0,l.jsx)("div",{className:"hidden lg:flex gap-2 justify-start ",children:(0,l.jsx)($,{tooltip_text:"Inspect your all information about your document, such as chunks, metadata and more.",display_text:h?h.title:"Loading..."})}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsx)(N,{title:"Content",Icon:X.Vqr,onClick:()=>f("Content"),selected:"Content"===m,selected_color:"bg-secondary-verba"}),(0,l.jsx)(N,{title:"Chunks",Icon:X.Fqs,onClick:()=>f("Chunks"),selected:"Chunks"===m,selected_color:"bg-secondary-verba"}),(0,l.jsx)(N,{title:"Vector",Icon:ep.FUn,onClick:()=>f("Vector Space"),selected:"Vector Space"===m,selected_color:"bg-secondary-verba"}),(0,l.jsx)(N,{Icon:X.B4e,onClick:()=>{n(null)}})]})]}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["Content"===m&&(0,l.jsx)(eb,{selectedTheme:c,document:h,credentials:t,selectedDocument:s,chunkScores:r}),"Chunks"===m&&(0,l.jsx)(ef,{selectedTheme:c,credentials:t,selectedDocument:s}),"Vector Space"===m&&(0,l.jsx)(ed,{credentials:t,selectedDocument:s,chunkScores:r}),"Metadata"===m&&(0,l.jsx)(eg,{credentials:t,selectedDocument:s})]}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,l.jsxs)("div",{className:"flex gap-3",children:[d.some(e=>e.uuid===s)&&(0,l.jsx)(N,{title:"Delete from Chat",Icon:X.B4e,selected:!0,selected_color:"bg-warning-verba",onClick:()=>{x(d.filter(e=>e.uuid!==s)),u("Removed document from Chat","INFO")}}),!d.some(e=>e.uuid===s)&&h&&(0,l.jsx)(N,{title:"Add to Chat",Icon:i.Lgw,onClick:()=>{x([...d,{uuid:s,title:h.title}]),u("Added document to Chat","SUCCESS")}})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[s&&h&&h.source&&(0,l.jsx)(N,{title:"Go To Source",Icon:o.CkN,onClick:()=>{v(h.source)}}),(0,l.jsx)(N,{title:"Document Info",Icon:o.DAO,onClick:()=>f("Metadata"),selected:"Metadata"===m,selected_color:"bg-secondary-verba"})]})]})]}):(0,l.jsx)("div",{})},ej=e=>{let{selectedTheme:t,production:s,credentials:n,documentFilter:r,setDocumentFilter:i,addStatusMessage:o}=e,[c,d]=(0,a.useState)(null);return(0,l.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,l.jsx)("div",{className:"".concat(c?"hidden md:flex md:w-[45vw]":"w-full md:w-[45vw] md:flex"),children:(0,l.jsx)(Q,{production:s,addStatusMessage:o,setSelectedDocument:d,credentials:n,selectedDocument:c})}),(0,l.jsx)("div",{className:"".concat(c?"md:w-[55vw] w-full flex":"hidden md:flex md:w-[55vw]"),children:(0,l.jsx)(ev,{credentials:n,addStatusMessage:o,setSelectedDocument:d,selectedTheme:t,selectedDocument:c,documentFilter:r,setDocumentFilter:i})})]})};let ew={DONE:"bg-secondary-verba",ERROR:"bg-warning-verba",READY:"bg-button-verba",STARTING:"bg-button-verba",CHUNKING:"bg-button-verba",LOADING:"bg-button-verba",EMBEDDING:"bg-button-verba",INGESTING:"bg-button-verba",NER:"bg-button-verba",EXTRACTION:"bg-button-verba",SUMMARIZING:"bg-button-verba",WAITING:"bg-button-verba"},eN={DONE:"Finished",ERROR:"Failed",READY:"Ready",STARTING:"Importing...",CHUNKING:"Chunking...",LOADING:"Loading...",EMBEDDING:"Embedding...",INGESTING:"Weaviating...",NER:"Extracting NER...",EXTRACTION:"Extraction REL...",SUMMARIZING:"Summarizing...",WAITING:"Uploading..."},ey={theme_name:"Light",title:{text:"Verba",type:"text",description:"Title"},subtitle:{text:"The Golden RAGtriever",type:"text",description:"Subtitle"},intro_message:{text:"Welcome to Verba, your open-source RAG application!",type:"text",description:"First Message"},image:{src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true",type:"image",description:"Logo"},primary_color:{color:"#FDFF91",type:"color",description:"Primary"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary"},warning_color:{color:"#FF8399",type:"color",description:"Warning"},bg_color:{color:"#FEF7F7",type:"color",description:"Background"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alt. Background"},text_color:{color:"#161616",type:"color",description:"Text"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alt. Text"},button_text_color:{color:"#161616",type:"color",description:"Button Text"},button_text_alt_color:{color:"#8E8E8E",type:"color",description:"Button Alt. Text"},button_color:{color:"#EFEFEF",type:"color",description:"Button"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover"},font:{value:"Plus_Jakarta_Sans",type:"select",options:["Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],description:"Text Font"},theme:"light"},e_={...ey,theme_name:"Dark",title:{...ey.title,text:"Verba"},subtitle:{...ey.subtitle,text:"The Dark RAGtriever"},intro_message:{...ey.intro_message,text:"Welcome to Verba, your open-source RAG application!"},image:{...ey.image,src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true"},primary_color:{...ey.primary_color,color:"#BB86FC"},secondary_color:{...ey.secondary_color,color:"#008F82"},warning_color:{...ey.warning_color,color:"#FF8399"},bg_color:{...ey.bg_color,color:"#202020"},bg_alt_color:{...ey.bg_alt_color,color:"#2F2929"},text_color:{...ey.text_color,color:"#ffffff"},text_alt_color:{...ey.text_alt_color,color:"#999999"},button_text_color:{...ey.button_text_color,color:"#ffffff"},button_text_alt_color:{...ey.button_text_alt_color,color:"#999999"},button_color:{...ey.button_color,color:"#3C3C3C"},button_hover_color:{...ey.button_hover_color,color:"#2C2C2C"},font:{...ey.font,value:"Open_Sans"},theme:"dark"},eS={...ey,theme_name:"WCD",title:{...ey.title,text:"Verba"},subtitle:{...ey.subtitle,text:"Weaviate Chatbot"},intro_message:{...ey.intro_message,text:"Welcome to Verba, your open-source RAG application!"},image:{...ey.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...ey.primary_color,color:"#BF40C5"},secondary_color:{...ey.secondary_color,color:"#28395B"},warning_color:{...ey.warning_color,color:"#EA3A31"},bg_color:{...ey.bg_color,color:"#0C1428"},bg_alt_color:{...ey.bg_alt_color,color:"#192136"},text_color:{...ey.text_color,color:"#ffffff"},text_alt_color:{...ey.text_alt_color,color:"#AAAAAA"},button_text_color:{...ey.button_text_color,color:"#ffffff"},button_text_alt_color:{...ey.button_text_alt_color,color:"#AAAAAA"},button_color:{...ey.button_color,color:"#1D253A"},button_hover_color:{...ey.button_hover_color,color:"#313749"},font:{...ey.font,value:"Open_Sans"},theme:"dark"},eC={...ey,theme_name:"Weaviate",title:{...ey.title,text:"Verba"},subtitle:{...ey.subtitle,text:"Weaviate Chatbot"},intro_message:{...ey.intro_message,text:"Welcome to Verba, your open-source RAG application!"},image:{...ey.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...ey.primary_color,color:"#9bfc88"},secondary_color:{...ey.secondary_color,color:"#8bffe7"},warning_color:{...ey.warning_color,color:"#f77579"},bg_color:{...ey.bg_color,color:"#FEF7F7"},bg_alt_color:{...ey.bg_alt_color,color:"#ffffff"},text_color:{...ey.text_color,color:"#130C49"},text_alt_color:{...ey.text_alt_color,color:"#929292"},button_text_color:{...ey.button_text_color,color:"#130C49"},button_text_alt_color:{...ey.button_text_alt_color,color:"#929292"},button_color:{...ey.button_color,color:"#eeeeee"},button_hover_color:{...ey.button_hover_color,color:"#7dfffb"},font:{...ey.font,value:"Plus_Jakarta_Sans"},theme:"light"};var ek=e=>{let{fileData:t,fileMap:s,handleDeleteFile:a,selectedFileData:n,setSelectedFileData:r}=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:["READY"!=s[t.fileID].status?(0,l.jsxs)("div",{className:"flex gap-2",children:["DONE"!=s[t.fileID].status&&"ERROR"!=s[t.fileID].status&&(0,l.jsx)(N,{title:eN[s[t.fileID].status],text_class_name:"text-xs",className:"w-[120px]"}),"DONE"==s[t.fileID].status&&(0,l.jsx)(N,{title:eN[s[t.fileID].status],Icon:o.FJM,selected:!0,className:"w-[120px]",selected_color:"bg-secondary-verba"}),"ERROR"==s[t.fileID].status&&(0,l.jsx)(N,{title:eN[s[t.fileID].status],Icon:X.vVM,className:"w-[120px]",selected:!0,selected_color:"bg-warning-verba"})]}):(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsx)(N,{title:s[t.fileID].rag_config.Reader.selected,className:"w-[120px]",text_class_name:"truncate w-[100px]"})}),(0,l.jsx)(N,{title:s[t.fileID].filename?s[t.fileID].filename:"No Filename",selected:n===s[t.fileID].fileID,selected_color:"bg-secondary-verba",className:"w-[200px] lg:w-[350px]",text_class_name:"truncate max-w-[150px] lg:max-w-[300px]",onClick:()=>{r(t.fileID)}}),(0,l.jsx)(N,{Icon:o.Xm5,onClick:()=>{let e=document.getElementById("remove_file_"+s[t.fileID].filename);e instanceof HTMLDialogElement&&e.showModal()},className:"w-[120px] max-w-min",selected:n===s[t.fileID].fileID,selected_color:"bg-warning-verba"}),(0,l.jsx)(Z,{modal_id:"remove_file_"+s[t.fileID].filename,title:"Remove File",text:s[t.fileID].isURL?"Do you want to remove the URL?":"Do you want to remove "+s[t.fileID].filename+" from the selection?",triggerString:"Delete",triggerValue:s[t.fileID].fileID,triggerAccept:a})]})},eI=e=>{let{fileMap:t,setFileMap:s,RAGConfig:n,addStatusMessage:r,setRAGConfig:c,selectedFileData:d,setSelectedFileData:x,importSelected:u,socketStatus:m,reconnect:f,importAll:g}=e,p=a.useRef(null);(0,a.useEffect)(()=>{null!==p.current&&(p.current.setAttribute("directory",""),p.current.setAttribute("webkitdirectory",""))},[p]);let h=e=>{s(t=>{if(null===e)return r("Cleared all files","WARNING"),x(null),{};{e===d&&x(null),r("Cleared selected file","WARNING");let s={...t};return delete s[e],s}})},[b,v]=(0,a.useState)(null),[w,y]=(0,a.useState)(null),_=async(e,l)=>{if(e.target.files&&n){let a=e.target.files,i={...t},o=l?w:b;r("Added new files","SUCCESS");for(let e=0;e<a.length;e++){let t=a[e],s=JSON.parse(JSON.stringify(n));o&&(s.Reader.selected=o);let l=t.name,r=t.name;if(r in i){let e=Date.now();r="".concat(r,"_").concat(e)}let c=t.name.split(".").pop()||"",d=await function(e){return new Promise((t,s)=>{let l=new FileReader;l.onload=()=>{t(function(e){let t="",s=new Uint8Array(e),l=s.byteLength;for(let e=0;e<l;e++)t+=String.fromCharCode(s[e]);return btoa(t)}(l.result))},l.onerror=()=>s(l.error),l.readAsArrayBuffer(e)})}(t);i[r]={fileID:r,filename:l,extension:c,status_report:{},source:"",isURL:!1,metadata:"",overwrite:!1,content:d,labels:["Document"],rag_config:s,file_size:C(d),status:"READY"}}s(i),x(Object.keys(i)[0]),e.target.value=""}},S=e=>{if(n){let l={...t},a=JSON.parse(JSON.stringify(n));a.Reader.selected=e;let i=new Date().toISOString();r("Added new URL Job","SUCCESS"),l[i]={fileID:i,filename:"New "+e+" Job",metadata:"",status_report:{},extension:"URL",isURL:!0,source:"",overwrite:!1,content:"",labels:["Document"],rag_config:a,file_size:0,status:"READY"},s(l),x(i)}},C=e=>{let t=e.replace(/\s+/g,"");if(t.length%2!=0)throw Error("Invalid hex string length.");return t.length/2};return(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end lg:justify-between h-min w-full",children:[(0,l.jsx)("div",{className:"hidden lg:flex gap-2 justify-start ",children:(0,l.jsx)($,{tooltip_text:"Upload your data through this interface into Verba. You can select individual files, directories or add URL to fetch data from.",display_text:"File Selection"})}),(0,l.jsxs)("div",{className:"flex gap-3 justify-center lg:justify-end",children:[(0,l.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,l.jsx)("label",{tabIndex:0,children:(0,l.jsx)(N,{title:"Files",Icon:i.Lgw,onClick:()=>{var e;return null===(e=document.getElementById("files_upload"))||void 0===e?void 0:e.click()}})}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,s]=e;return"URL"!==s.type}).map(e=>{let[t,s]=e;return(0,l.jsx)("li",{onClick:()=>{var e;v(s.name),null===(e=document.getElementById("files_upload"))||void 0===e||e.click(),j()},children:(0,l.jsx)("a",{children:s.name})},"File_"+s.name+t)})})]}),(0,l.jsx)("input",{id:"files_upload",type:"file",onChange:e=>_(e,!1),className:"hidden",multiple:!0}),(0,l.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,l.jsx)("label",{tabIndex:0,children:(0,l.jsx)(N,{title:"Directory",Icon:er.Lec})}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,s]=e;return"URL"!==s.type}).map(e=>{let[t,s]=e;return(0,l.jsx)("li",{onClick:()=>{var e;y(s.name),null===(e=document.getElementById("dir_upload"))||void 0===e||e.click(),j()},children:(0,l.jsx)("a",{children:s.name})},"Dir_"+s.name+t)})})]}),(0,l.jsx)("input",{id:"dir_upload",type:"file",ref:p,onChange:e=>_(e,!0),className:"hidden",multiple:!0}),(0,l.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,l.jsx)("label",{tabIndex:0,children:(0,l.jsx)(N,{title:"URL",Icon:i.Lgw})}),(0,l.jsx)("input",{id:"url_upload",type:"file",className:"hidden"}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,s]=e;return"URL"===s.type}).map(e=>{let[t,s]=e;return(0,l.jsx)("li",{onClick:()=>{S(s.name),j()},children:(0,l.jsx)("a",{children:s.name})},"URL_"+s.name+t)})})]})]})]}),(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:Object.entries(t).map(e=>{let[s,a]=e;return(0,l.jsx)(ek,{fileData:a,handleDeleteFile:h,selectedFileData:d,setSelectedFileData:x,fileMap:t},"FileComponent_"+s)})}),"ONLINE"===m?(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-3 justify-end",children:[d&&(0,l.jsx)(N,{title:"Import Selected",Icon:o.Xur,onClick:u}),(0,l.jsx)(N,{title:"Import All",Icon:o.Xur,onClick:g}),(0,l.jsx)(N,{title:"Clear Files",Icon:X.B4e,onClick:()=>{let e=document.getElementById("remove_all_files");e instanceof HTMLDialogElement&&e.showModal()}})]})}):(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,l.jsx)("div",{className:"flex gap-3 justify-end",children:(0,l.jsxs)("button",{onClick:f,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2 items-center",children:[(0,l.jsx)(ep.Nwf,{size:15}),(0,l.jsx)("p",{children:"Reconnecting..."}),(0,l.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})}),(0,l.jsx)(Z,{modal_id:"remove_all_files",title:"Clear all files?",text:"Do you want to clear all files from your selection?",triggerString:"Clear All",triggerValue:null,triggerAccept:h})]})},eE=s(67447),eR=s(88033);let eD=e=>{let{values:t,config_title:s,updateConfig:n,component_name:i,blocked:c}=e,[d,x]=(0,a.useState)(""),[u,m]=(0,a.useState)(t);(0,a.useEffect)(()=>{n(i,s,u)},[u]);let f=e=>{u.includes(e)||(m(t=>[...t,e]),x(""))},g=e=>{u.includes(e)&&m(t=>t.filter(t=>t!==e))};return(0,l.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,l.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",disabled:c,value:d,onChange:e=>{x(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),f(d))}})}),(0,l.jsxs)("button",{onClick:()=>{f(d)},disabled:c,className:"btn flex gap-2 bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:[(0,l.jsx)(r.Kth,{size:15}),(0,l.jsx)("p",{children:"Add"})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-2",children:t.map((e,t)=>(0,l.jsxs)("div",{className:"flex bg-bg-verba w-full p-2 text-center text-sm text-text-verba justify-between items-center rounded-xl",children:[(0,l.jsx)("div",{className:"flex w-full justify-center items-center overflow-hidden",children:(0,l.jsx)("p",{className:"truncate",title:e,children:e})}),(0,l.jsx)("button",{disabled:c,onClick:()=>{g(e)},className:"btn btn-sm btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba ml-2",children:(0,l.jsx)(o.Xm5,{size:12})})]},e+t))})]})};var eO=e=>{let{RAGConfig:t,component_name:s,selectComponent:a,updateConfig:n,saveComponentConfig:r,blocked:i,skip_component:o}=e;return 0==Object.entries(t[s].components[t[s].selected].config).length?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"divider text-text-alt-verba flex-grow text-xs lg:text-sm",children:[(0,l.jsxs)("p",{children:[t[s].selected," Settings"]}),(0,l.jsx)(N,{title:"Save",className:"btn-sm lg:text-sm text-xs",text_size:"",onClick:()=>{r(s,t[s].selected,t[s].components[t[s].selected])}})]})}),!o&&(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw] lg:text-base text-sm",children:s}),(0,l.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,l.jsxs)("button",{tabIndex:0,role:"button",disabled:i,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,l.jsx)(er.WMq,{size:15}),(0,l.jsx)("p",{children:t[s].selected})]}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow",children:Object.entries(t[s].components).map(e=>{let[t,n]=e;return(0,l.jsx)("li",{onClick:()=>{i||(a(s,n.name),j())},children:(0,l.jsx)("a",{children:n.name})},"ComponentDropdown_"+n.name)})})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"lg:text-sm text-xs text-text-alt-verba text-start",children:t[s].components[t[s].selected].description})]})]}),Object.entries(t[s].components[t[s].selected].config).map(e=>{let[a,r]=e;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba lg:text-base text-sm",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:a}),"dropdown"===r.type&&(0,l.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,l.jsxs)("button",{tabIndex:0,role:"button",disabled:i,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,l.jsx)(er.WMq,{size:15}),(0,l.jsx)("p",{children:r.value})]}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 max-h-[20vh] overflow-auto rounded-box z-[1] w-full p-2 shadow",children:t[s].components[t[s].selected].config[a].values.map(e=>(0,l.jsx)("li",{className:"lg:text-base text-sm",onClick:()=>{i||(n(s,a,e),j())},children:(0,l.jsx)("a",{children:e})},"ConfigValue"+e))})]}),"boolean"!=typeof r.value&&["text","number","password"].includes(r.type)&&(0,l.jsx)("label",{className:"input flex text-sm items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:r.type,className:"grow w-full",value:r.value,onChange:e=>{i||n(s,a,e.target.value)}})}),"boolean"!=typeof r.value&&"multi"==r.type&&(0,l.jsx)(eD,{component_name:s,values:r.values,config_title:a,updateConfig:n,blocked:i}),"bool"==r.type&&(0,l.jsxs)("div",{className:"flex gap-5 justify-start items-center w-full my-4",children:[(0,l.jsx)("p",{className:"lg:text-sm text-xs text-text-alt-verba text-start w-[250px]",children:r.description}),(0,l.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>{i||n(s,a,e.target.checked)},checked:"boolean"==typeof r.value&&r.value})]})]}),"bool"!=r.type&&(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"lg:text-sm text-xs text-text-alt-verba text-start",children:r.description})]})]},"Configuration"+a+s)})]})},eA=e=>{var t;let{selectedFileData:s,fileMap:n,selectComponent:i,updateConfig:c,saveComponentConfig:d,setFileMap:x,blocked:u,addStatusMessage:m}=e,[f,g]=(0,a.useState)(""),[p,h]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[j,w]=(0,a.useState)("");(0,a.useEffect)(()=>{s&&(g(n[s].filename),h(n[s].source),v(n[s].metadata))},[n,s]);let y=(0,a.useCallback)((e,t)=>{if(s){let l=JSON.parse(JSON.stringify(n[s]));l[e]=t;let a={...n};a[s]=l,x(a)}},[s,n,x]),_=(0,a.useCallback)(e=>{let t=e.target.value;g(t),y("filename",t)},[y]),S=(0,a.useCallback)(e=>{let t=e.target.value;h(t),y("source",t)},[y]),C=(0,a.useCallback)(e=>{let t=e.target.value;v(t),y("metadata",t)},[y]),k=e=>{if(s){let t=JSON.parse(JSON.stringify(n[s]));t.overwrite=e;let l={...n};l[s]=t,x(l)}},I=e=>{if(s&&!n[s].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(n[s]));t.labels.push(e);let l={...n};l[s]=t,x(l),w("")}},E=e=>{if(s&&n[s].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(n[s]));t.labels=t.labels.filter(t=>t!==e);let l={...n};l[s]=t,x(l),w("")}};return s?(0,l.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[s&&"READY"!=n[s].status&&(0,l.jsx)("div",{className:"divider  text-text-alt-verba",children:"Import Status"}),(0,l.jsx)("div",{className:"flex flex-col gap-3 text-text-verba",children:s&&Object.entries(n[s].status_report).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("p",{className:"flex min-w-[8vw] gap-2 items-center text-text-verba",children:["DONE"===s.status&&(0,l.jsx)(o.FJM,{size:15}),"ERROR"===s.status&&(0,l.jsx)(X.vVM,{size:15}),eN[s.status]]}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full ".concat(ew[s.status]," bg-bg-verba"),children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:0!=s.took?s.message+" ("+s.took+"s)":s.message,disabled:!0})})]},"Status"+t)})}),(0,l.jsx)(eO,{RAGConfig:n[s].rag_config,component_name:"Reader",selectComponent:i,updateConfig:c,skip_component:!0,saveComponentConfig:d,blocked:n[s].block}),(0,l.jsx)("div",{className:"divider text-text-alt-verba",children:"File Settings"}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Title"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:f,onChange:_,disabled:u})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add a Title to the document. If you are adding a URL, all URL will have a have their corresponding URL as filename."})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Source Link"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:p,onChange:S,disabled:u})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add a link to reference the original source of the document. You can access it through the Document Explorer via the View Source button"})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Labels"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:j,onChange:e=>{w(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),I(j))},disabled:u,title:j})}),(0,l.jsx)(N,{title:"Add",Icon:r.Kth,onClick:()=>{I(j)},disabled:u})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add or remove labels for Document Filtering"})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries((t=n[s]).labels).map(e=>{let[s,a]=e;return(0,l.jsx)(N,{title:a,className:"btn-sm",text_class_name:"text-xs",onClick:()=>{E(a)},Icon:X.B4e},t.fileID+s+a)})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Overwrite"}),(0,l.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>k(e.target.checked),checked:!!s&&n[s].overwrite,disabled:u})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Overwrite existing documents with the same name."})]}),(0,l.jsx)("div",{className:"divider  text-text-alt-verba",children:"Metadata"}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Metadata"}),(0,l.jsx)("textarea",{className:"grow w-full textarea flex items-center gap-2 max-h-64 bg-bg-verba",value:b,onChange:C,disabled:u})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add metadata to the document to improve retrieval and generation. Metadata will added to the context sent to the embedding and generation, to influcence the results."})]}),(0,l.jsx)("div",{className:"divider  text-text-alt-verba",children:"File Information"}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Extension"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:n[s].extension,disabled:!0})})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"File Size"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["B","KB","MB","GB","TB"][t])})(n[s].file_size),disabled:!0})})]}),(0,l.jsx)("div",{className:"divider  text-text-alt-verba",children:"Ingestion Pipeline"}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Reader"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:n[s].rag_config.Reader.selected,disabled:!0})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:s&&n[s].rag_config.Reader.components[n[s].rag_config.Reader.selected].description})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Chunker"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:n[s].rag_config.Chunker.selected,disabled:!0})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:s&&n[s].rag_config.Chunker.components[n[s].rag_config.Chunker.selected].description})]}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Embedder"}),(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",value:n[s].rag_config.Embedder.selected,disabled:!0})})]}),(0,l.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]"}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:s&&n[s].rag_config.Embedder.components[n[s].rag_config.Embedder.selected].description})]}),(0,l.jsx)("div",{className:"divider"}),(0,l.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:"Debug"}),(0,l.jsx)(N,{Icon:eR.ZWp,onClick:()=>{let e=document.getElementById("File_Debug_Modal");e instanceof HTMLDialogElement&&e.showModal()},className:"max-w-min"})]}),(0,l.jsx)("dialog",{id:"File_Debug_Modal",className:"modal",children:(0,l.jsxs)("div",{className:"modal-box min-w-fit",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:"Debugging File Configuration"}),(0,l.jsx)("pre",{className:"whitespace-pre-wrap text-xs",children:s?(()=>{let e={...n[s]};return e.content="File Content",JSON.stringify(e,null,2)})():""}),(0,l.jsx)("div",{className:"modal-action",children:(0,l.jsx)("form",{method:"dialog",children:(0,l.jsx)("button",{className:"btn text-text-verba bg-warning-verba border-none hover:bg-button-hover-verba ml-2",children:"Close"})})})]})})]}):(0,l.jsx)("div",{})},eT=e=>{var t;let{selectedFileData:s,fileMap:n,addStatusMessage:i,setFileMap:c,RAGConfig:d,setRAGConfig:x,setSelectedFileData:u,credentials:m}=e,[f,g]=(0,a.useState)("Basic"),p=async()=>{i("Setting current config as default","SUCCESS"),s&&(await A(n[s].rag_config,m)?x(n[s].rag_config):console.error("Failed to set RAG config:"))},h=(0,a.useCallback)((e,t,l)=>{c(a=>{if(s){let n={...a},r=n[s],i=r.rag_config[e].components[r.rag_config[e].selected].config;return"string"==typeof l||"boolean"==typeof l?i[t].value=l:i[t].values=l,n}return a})},[s]),b=(e,t)=>{c(l=>{if(s){let a=JSON.parse(JSON.stringify(l[s])),n=JSON.parse(JSON.stringify(l[s].rag_config));n[e].selected=t,a.rag_config=n;let r={...l};return r[s]=a,r}return l})},v=(0,a.useCallback)(async(e,t,s)=>{if(!d)return;i("Saving "+t+" config","SUCCESS");let l=JSON.parse(JSON.stringify(d));l[e].selected=t,l[e].components[t]=s,await A(l,m)&&x(l)},[d,m]);return(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,l.jsx)($,{tooltip_text:"Configure all import settings related to chunking, embedding, adding meta data and more. You can save made changes individually or apply them to all other files",display_text:"Import Config"})}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsx)(N,{title:"Overview",selected:"Basic"===f,selected_color:"bg-secondary-verba",onClick:()=>{g("Basic")},Icon:r.zfW}),(0,l.jsx)(N,{title:"Config",selected:"Pipeline"===f,selected_color:"bg-secondary-verba",onClick:()=>{g("Pipeline")},Icon:o.KOq}),(0,l.jsx)(N,{onClick:()=>{u(null)},Icon:X.B4e})]})]}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:["Basic"===f&&(0,l.jsx)(eA,{selectedFileData:s,addStatusMessage:i,fileMap:n,selectComponent:b,updateConfig:h,saveComponentConfig:v,setFileMap:c,blocked:s?null!==(t=n[s].block)&&void 0!==t&&t:void 0}),"Pipeline"===f&&s&&(0,l.jsxs)("div",{className:"flex flex-col gap-10 w-full",children:[(0,l.jsx)(eO,{RAGConfig:n[s].rag_config,component_name:"Chunker",selectComponent:b,updateConfig:h,saveComponentConfig:v,blocked:n[s].block}),(0,l.jsx)(eO,{RAGConfig:n[s].rag_config,component_name:"Embedder",selectComponent:b,updateConfig:h,saveComponentConfig:v,blocked:n[s].block})]})]}),(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsx)(N,{title:"Apply to All",onClick:()=>{let e=document.getElementById("apply_setting_to_all");e instanceof HTMLDialogElement&&e.showModal()},Icon:eE.HL_}),(0,l.jsx)(N,{title:"Save Config",onClick:()=>{let e=document.getElementById("set_default_settings");e instanceof HTMLDialogElement&&e.showModal()},Icon:r.zfW}),(0,l.jsx)(N,{title:"Reset",onClick:()=>{let e=document.getElementById("reset_Setting");e instanceof HTMLDialogElement&&e.showModal()},Icon:X.B4e})]})}),(0,l.jsx)(Z,{modal_id:"apply_setting_to_all",title:"Apply Pipeline Settings",text:"Apply Pipeline Settings to all files?",triggerString:"Apply",triggerValue:null,triggerAccept:()=>{i("Applying config to all files","INFO"),c(e=>{if(s){let t=JSON.parse(JSON.stringify(e[s].rag_config)),l={...e};for(let a in e){let n=JSON.parse(JSON.stringify(e[a]));n.rag_config=t,n.source=e[s].source,n.labels=e[s].labels,n.overwrite=e[s].overwrite,l[a]=n}return l}return e})}}),(0,l.jsx)(Z,{modal_id:"reset_Setting",title:"Reset Setting",text:"Reset pipeline settings of this file?",triggerString:"Reset",triggerValue:null,triggerAccept:()=>{i("Resetting pipeline settings","WARNING"),c(e=>{if(s&&d){let t={...e},l=JSON.parse(JSON.stringify(e[s]));return l.rag_config=d,t[s]=l,t}return e})}}),(0,l.jsx)(Z,{modal_id:"set_default_settings",title:"Set Default",text:"Set current pipeline settings as default for future files?",triggerString:"Set",triggerValue:null,triggerAccept:p})]})},eF=e=>{let{credentials:t,RAGConfig:s,setRAGConfig:n,addStatusMessage:r}=e,[i,o]=(0,a.useState)({}),[c,d]=(0,a.useState)(null),[x,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null),[g,p]=(0,a.useState)("OFFLINE");(0,a.useEffect)(()=>{u(!0)},[]),(0,a.useEffect)(()=>{let e=w(),t=new WebSocket(e);return t.onopen=()=>{console.log("Import WebSocket connection opened to "+e),p("ONLINE")},t.onmessage=e=>{p("ONLINE");try{let t=JSON.parse(e.data);"new_file_id"in t?o(e=>{let s={...e};return s[t.new_file_id]={...s[t.original_file_id],fileID:t.new_file_id,filename:t.filename,block:!0},s}):b(t)}catch(t){console.error("Received data is not valid JSON:",e.data);return}},t.onerror=e=>{console.error("Import WebSocket Error:",e),p("OFFLINE"),h(),u(e=>!e)},t.onclose=e=>{p("OFFLINE"),h(),e.wasClean?console.log("Import WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),u(e=>!e)},f(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[x]);let h=()=>{o(e=>{if(i){let t={...e};for(let e in t)"DONE"!=t[e].status&&"ERROR"!=t[e].status&&"READY"!=t[e].status&&(t[e].status="ERROR",t[e].status_report.ERROR={fileID:e,status:"ERROR",message:"Connection was interrupted",took:0});return t}return e})},b=e=>{console.log("Update status",e),"DONE"===e.status&&r("File "+e.fileID+" imported","SUCCESS"),"ERROR"===e.status&&r("File "+e.fileID+" import failed","ERROR"),o(t=>{if(e&&e.fileID in t){let s=JSON.parse(JSON.stringify(t[e.fileID])),l={...t};return s.status=e.status,s.status_report[e.status]=e,l[e.fileID]=s,l}return t})},v=e=>{o(t=>{if(e in t){let s=JSON.parse(JSON.stringify(t[e])),l={...t};return s.status="WAITING",Object.entries(s.status_report).length>0&&(s.status_report={}),l[e]=s,l}return t})},j=(e,s)=>{if((null==m?void 0:m.readyState)===WebSocket.OPEN){v(s);let l=[],a=0;for(;a<e.length;){let t=e.slice(a,a+2e3);l.push(t),a+=2e3}let n=l.length;l.forEach((e,l)=>{m.send(JSON.stringify({chunk:e,isLastChunk:l===n-1,total:n,order:l,fileID:s,credentials:t}))})}else console.error("WebSocket is not open. ReadyState:",null==m?void 0:m.readyState),u(e=>!e)};return(0,l.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,l.jsx)("div",{className:"".concat(c?"hidden md:flex md:w-[45vw]":"w-full md:w-[45vw] md:flex"),children:(0,l.jsx)(eI,{fileMap:i,addStatusMessage:r,setFileMap:o,RAGConfig:s,setRAGConfig:n,selectedFileData:c,setSelectedFileData:d,importSelected:()=>{r("Importing selected file","INFO"),c&&["READY","DONE","ERROR"].includes(i[c].status)&&!i[c].block&&j(JSON.stringify(i[c]),c)},importAll:()=>{for(let e in r("Importing all files","INFO"),i)["READY","DONE","ERROR"].includes(i[e].status)&&!i[e].block&&j(JSON.stringify(i[e]),e)},socketStatus:g,reconnect:()=>{u(e=>!e)}})}),(0,l.jsx)("div",{className:"".concat(c?"md:w-[55vw] w-full flex":"hidden md:flex md:w-[55vw]"),children:c&&(0,l.jsx)(eT,{addStatusMessage:r,selectedFileData:c,RAGConfig:s,credentials:t,setRAGConfig:n,fileMap:i,setFileMap:o,setSelectedFileData:d})})]})},eM=s(34673),eL=s(21789),ez=(s(91997),s(73207));let eP="";eP="/static";let eG=e=>{let{color:t,useMaterial:s,model_path:n}=e,r=(0,eM.L)(eP+n),i=(0,a.useMemo)(()=>new en.MeshMatcapMaterial({color:"#ffe229",matcap:new en.TextureLoader().load(eP+"/fire_cap.png")}),[]);return(0,a.useMemo)(()=>new en.MeshPhysicalMaterial({metalness:.4,roughness:.4,color:"#ffe229",ior:1,thickness:1,transparent:!1,wireframe:!1,clearcoat:1,clearcoatRoughness:0}),[]),(0,a.useEffect)(()=>{},[i]),(0,a.useEffect)(()=>{r.scene.traverse(e=>{e instanceof en.Mesh&&(console.log("Mesh:",e.name,"Material:",e.material),s?(e.material.roughness=.3,e.material.metalness=.2):e.material=i,e.castShadow=!0,e.receiveShadow=!0)})},[r,i]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("color",{args:[t],attach:"background"}),(0,l.jsx)(eL.N,{global:!0,rotation:[.13,.1,0],polar:[-.4,.2],azimuth:[-1,.75],config:{mass:2,tension:400},snap:{mass:4,tension:400},children:(0,l.jsx)(el.b,{speed:2,rotationIntensity:1,children:(0,l.jsx)("primitive",{object:r.scene,"position-y":0,"position-x":0,"rotation-y":.2,"rotation-x":-.2,"position-z":0,scale:.6})})})]})};var eJ=e=>{let{credentials:t,setCredentials:s,setSelectedTheme:n,setThemes:r,setIsLoggedIn:i,production:c,setRAGConfig:d}=e,[x,u]=(0,a.useState)(!0),[m,f]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!0),[h,b]=(0,a.useState)(""),[v,j]=(0,a.useState)("Local"),[w,y]=(0,a.useState)(t.url),[_,S]=(0,a.useState)(t.key);(0,a.useEffect)(()=>{let e=setTimeout(()=>{u(!1)},300);return()=>clearTimeout(e)},[]);let C=async e=>{b(""),f(!0);let t=await D(e,w,_);t&&(t.error?(i(!1),b(t.error)):(i(!0),s({deployment:e,key:_,url:w}),d(t.rag_config),t.themes&&r(t.themes),t.theme&&n(t.theme))),f(!1)};return(0,l.jsx)("div",{className:"w-screen h-screen bg-white",children:(0,l.jsxs)("div",{className:"flex w-full h-full transition-opacity duration-1000 ".concat(x?"opacity-0":"opacity-100"),children:[(0,l.jsx)("div",{className:"hidden md:flex md:w-1/2 lg:w-3/5 h-full",children:(0,l.jsxs)(et.Xz,{camera:{position:[0,0,4],fov:50},className:"w-full h-full touch-none",children:[(0,l.jsx)("color",{attach:"background",args:["#FAFAFA"]}),(0,l.jsx)("ambientLight",{intensity:.5}),(0,l.jsx)("directionalLight",{castShadow:!0,position:[-1,1,1],intensity:1,"shadow-mapSize":1024}),(0,l.jsx)("directionalLight",{castShadow:!0,position:[1,1,-1],intensity:1,"shadow-mapSize":1024}),(0,l.jsx)("directionalLight",{castShadow:!0,position:[0,1,1],intensity:1,"shadow-mapSize":1024}),(0,l.jsx)(eG,{color:"#FAFAFA",useMaterial:"Local"!=c,model_path:"Local"==c?"/verba.glb":"/weaviate.glb"})]})}),(0,l.jsx)("div",{className:"w-full md:flex md:w-1/2 lg:w-2/5 h-full flex justify-center items-center p-5",children:(0,l.jsxs)("div",{className:"flex flex-col gap-8 items-center md:items-start justify-center w-4/5",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center md:items-start gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("p",{className:"font-light text-3xl md:text-4xl text-text-alt-verba",children:"Welcome to"}),(0,l.jsx)("p",{className:"font-light text-3xl md:text-4xl text-text-verba",children:"Verba"})]}),"Local"==c&&(0,l.jsx)("p",{className:"text-text-verba text-base lg:text-lg ",children:"Choose your deployment"})]}),g?(0,l.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:["Local"==c&&(0,l.jsxs)("div",{className:"flex flex-col justify-start gap-2 w-full",children:[(0,l.jsx)(N,{Icon:o.i1q,title:"Weaviate",disabled:m,onClick:()=>{p(!1),j("Weaviate")}}),(0,l.jsx)(N,{title:"Docker",Icon:o.X2n,disabled:m,onClick:()=>{j("Docker"),C("Docker")},loading:m&&"Docker"==v}),(0,l.jsx)(N,{title:"Local",Icon:o.bHw,disabled:m,onClick:()=>{j("Local"),C("Local")},loading:m&&"Local"==v})]}),"Demo"==c&&(0,l.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,l.jsx)(N,{Icon:eh.drw,title:"Start Demo",disabled:m,onClick:()=>{j("Weaviate"),C("Weaviate")},loading:m&&"Weaviate"==v})}),"Production"==c&&(0,l.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,l.jsx)(N,{Icon:eh.drw,title:"Start Verba",onClick:()=>{p(!1),j("Weaviate")}})})]}):(0,l.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:"Demo"!=c&&(0,l.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C(v)},children:[(0,l.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba",children:[(0,l.jsx)(o.i1q,{className:"text-text-alt-verba"}),(0,l.jsx)("input",{type:"text",name:"username",value:w,onChange:e=>y(e.target.value),placeholder:"Weaviate URL",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full",autoComplete:"username"})]}),(0,l.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba mt-4",children:[(0,l.jsx)(o.q2z,{className:"text-text-alt-verba"}),(0,l.jsx)("input",{type:"password",name:"current-password",value:_,onChange:e=>S(e.target.value),placeholder:"API Key",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full",autoComplete:"current-password"})]}),(0,l.jsx)("div",{className:"flex justify-between gap-4 mt-4",children:(0,l.jsx)("div",{className:"flex flex-col w-full gap-2",children:(0,l.jsxs)("div",{className:"flex flex-col justify-start gap-2 w-full",children:[(0,l.jsx)(N,{Icon:ez.y4s,title:"Connect to Weaviate",type:"submit",selected:!0,selected_color:"bg-primary-verba",loading:m}),(0,l.jsx)(N,{Icon:eR.$Wy,title:"Register",type:"button",disabled:m,onClick:()=>window.open("https://console.weaviate.cloud","_blank")}),(0,l.jsx)(N,{Icon:o.asE,title:"Back to Deployments",type:"button",button_size:"btn-sm",text_size:"text-xs",icon_size:12,onClick:()=>p(!0),disabled:m})]})})})]})})}),h&&(0,l.jsx)("div",{className:"bg-warning-verba p-4 rounded w-full",children:(0,l.jsx)("p",{className:"flex w-full whitespace-pre-wrap",children:h})})]})})]})})},eW=s(93850),eU=e=>{let{RAGConfig:t,setRAGConfig:s,addStatusMessage:n,onSave:i,credentials:o,onReset:c,production:d}=e,x=(e,t,l)=>{s(s=>{if(s){let a={...s};return"string"==typeof l||"boolean"==typeof l?a[e].components[a[e].selected].config[t].value=l:a[e].components[a[e].selected].config[t].values=l,a}return s})},u=(e,t)=>{s(s=>{if(s){let l={...s};return l[e].selected=t,l}return s})},m=(0,a.useCallback)(async(e,l,a)=>{if(!t)return;n("Saving "+l+" Config","SUCCESS");let r=JSON.parse(JSON.stringify(t));r[e].selected=l,r[e].components[l]=a,await A(r,o)&&s(r)},[t,o]);return t?(0,l.jsxs)("div",{className:"flex flex-col justify-start rounded-2xl w-full p-4 ",children:[(0,l.jsx)("div",{className:"sticky flex flex-col gap-2 w-full top-0 z-20 justify-end",children:(0,l.jsxs)("div",{className:"flex justify-end w-full gap-2 p-4 bg-bg-alt-verba rounded-lg",children:[(0,l.jsx)(N,{Icon:r.zfW,title:"Save Config",onClick:i,className:"max-w-[150px]",disabled:"Demo"==d}),(0,l.jsx)(N,{Icon:X.B4e,title:"Reset",onClick:c,className:"max-w-[150px]",disabled:"Demo"==d})]})}),(0,l.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl w-full p-6 ",children:[(0,l.jsx)(eO,{RAGConfig:t,component_name:"Embedder",selectComponent:u,updateConfig:x,saveComponentConfig:m,blocked:"Demo"==d}),(0,l.jsx)(eO,{RAGConfig:t,component_name:"Generator",selectComponent:u,updateConfig:x,saveComponentConfig:m,blocked:"Demo"==d}),(0,l.jsx)(eO,{RAGConfig:t,component_name:"Retriever",selectComponent:u,updateConfig:x,saveComponentConfig:m,blocked:"Demo"==d})]})]}):(0,l.jsx)("div",{})},eB=e=>{let{message:t,selectedTheme:s,selectedDocument:a,setSelectedDocument:n,message_index:i,setSelectedDocumentScore:c,setSelectedChunkScore:d}=e;return"string"==typeof t.content?(0,l.jsx)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:(0,l.jsxs)("div",{className:"flex flex-col items-start p-5 rounded-3xl animate-press-in text-sm lg:text-base ".concat({user:"bg-bg-verba",system:"bg-bg-alt-verba",error:"bg-warning-verba",retrieval:"bg-bg-verba"}[t.type]),children:[t.cached&&(0,l.jsx)(o.i1q,{size:12,className:"text-text-verba"}),"system"===t.type&&(0,l.jsx)(ex.D,{className:"prose md:prose-sm lg:prose-base p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:a,className:n,children:r,...i}=e,o=/language-(\w+)/.exec(n||"");return!a&&o?(0,l.jsx)(eu.Z,{style:"dark"===s.theme?em.vk:em.Yn,language:o[1],PreTag:"div",...i,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:n,...i,children:r})}},children:t.content}),"user"===t.type&&(0,l.jsx)("div",{className:"whitespace-pre-wrap",children:t.content}),"error"===t.type&&(0,l.jsxs)("div",{className:"whitespace-pre-wrap flex items-center gap-2 text-sm text-text-verba",children:[(0,l.jsx)(eW.I2T,{size:15}),(0,l.jsx)("p",{children:t.content})]})]})}):(0,l.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3 w-full items-center",children:[t.content.map((e,t)=>(0,l.jsx)("button",{onClick:()=>{n(e.uuid),c(e.uuid+e.score+e.chunks.length),d(e.chunks)},className:"flex ".concat(a&&a===e.uuid+e.score+e.chunks.length?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba"," rounded-3xl p-3 items-center justify-between transition-colors duration-300 ease-in-out border-none"),children:(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,l.jsx)("p",{className:"text-xs flex-grow truncate mr-2",title:e.title,children:e.title}),(0,l.jsxs)("div",{className:"flex gap-1 items-center text-text-verba flex-shrink-0",children:[(0,l.jsx)(r.$Kz,{size:12}),(0,l.jsx)("p",{className:"text-sm",children:e.chunks.length})]})]})},"Retrieval"+e.title+t)),(0,l.jsx)(N,{Icon:r.s59,className:"btn-sm btn-square",onClick:()=>document.getElementById("context-modal-"+i).showModal()}),(0,l.jsx)("dialog",{id:"context-modal-"+i,className:"modal",children:(0,l.jsxs)("div",{className:"modal-box",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:"Context"}),(0,l.jsx)("p",{className:"py-4",children:t.context}),(0,l.jsx)("div",{className:"modal-action",children:(0,l.jsx)("form",{method:"dialog",children:(0,l.jsx)("button",{className:"btn focus:outline-none text-text-alt-verba bg-button-verba hover:bg-button-hover-verba hover:text-text-verba border-none shadow-none",children:(0,l.jsx)("p",{children:"Close"})})})})]})})]})},eV=e=>{let{production:t,credentials:s,setSelectedDocument:n,setSelectedChunkScore:c,currentPage:d,RAGConfig:x,selectedTheme:u,setRAGConfig:m,addStatusMessage:f,documentFilter:g,setDocumentFilter:p}=e,[h,b]=(0,a.useState)("Chat"),j=(0,a.useRef)(!1),[w,y]=(0,a.useState)("DONE"),[_,S]=(0,a.useState)("");(0,a.useRef)(null);let[C,k]=(0,a.useState)(null),[I,E]=(0,a.useState)(!1),[R,D]=(0,a.useState)(!1),[T,M]=(0,a.useState)([]),[P,G]=(0,a.useState)([]),[J,W]=(0,a.useState)([]),[U,B]=(0,a.useState)(null),[V,q]=(0,a.useState)(0),[K,Y]=(0,a.useState)(""),[Z,Q]=(0,a.useState)([]),ee=x?x.Embedder.components[x.Embedder.selected].config.Model.value:"No Config found";(0,a.useState)("No Embedding Model"),(0,a.useEffect)(()=>{D(!0)},[]),(0,a.useEffect)(()=>{x?er():q(0)},[ee,d,g]),(0,a.useEffect)(()=>{Q(e=>0===e.length?[{type:"system",content:u.intro_message.text}]:e)},[u.intro_message.text]),(0,a.useEffect)(()=>{let e=v(),t=new WebSocket(e);return t.onopen=()=>{console.log("WebSocket connection opened to "+e),E(!0)},t.onmessage=e=>{let t;if(!j.current){S("");return}try{t=JSON.parse(e.data)}catch(t){console.error("Received data is not valid JSON:",e.data);return}let s=t.message;if(S(e=>e+s),"stop"===t.finish_reason){j.current=!1,y("DONE"),f("Finished generation","SUCCESS");let e=t.full_text;if(t.cached){let s=t.distance;Q(t=>[...t,{type:"system",content:e,cached:!0,distance:s}])}else Q(t=>[...t,{type:"system",content:e}]);S("")}},t.onerror=e=>{console.error("WebSocket Error:",e),E(!1),j.current=!1,y("DONE"),D(e=>!e)},t.onclose=e=>{e.wasClean?console.log("WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),E(!1),j.current=!1,y("DONE"),D(e=>!e)},k(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[R]),(0,a.useEffect)(()=>{x?er():q(0)},[x]);let et=async()=>{let e=await O(s);e?m(e.rag_config):f("Failed to fetch RAG Config","ERROR")},es=async()=>{if(!j.current&&K.trim()){Y(""),j.current=!0,M([]),y("CHUNKS"),Q(e=>[...e,{type:"user",content:K}]);try{f("Sending query...","INFO");let e=await F(K,x,J,g,s);!e||e.error?el(e?e.error:"No data received"):ea(e,K)}catch(e){el("Failed to fetch from API"),console.error("Failed to fetch from API:",e)}}},el=e=>{f("Query failed","ERROR"),Q(t=>[...t,{type:"error",content:e}]),j.current=!1,y("DONE")},ea=(e,t)=>{if(Q(t=>[...t,{type:"retrieval",content:e.documents,context:e.context}]),f("Received "+Object.entries(e.documents).length+" documents","SUCCESS"),e.documents.length>0){let s=e.documents[0];n(s.uuid),B("".concat(s.uuid).concat(s.score).concat(s.chunks.length)),c(s.chunks),e.context&&(en(t,e.context),y("RESPONSE"))}else el("We couldn't find any chunks to your query")},en=(e,t)=>{if((null==C?void 0:C.readyState)===WebSocket.OPEN){let s=JSON.stringify({query:e,context:t,conversation:Z.slice(1).filter(e=>"user"===e.type||"system"===e.type).map(e=>({type:e.type,content:e.content})),rag_config:x});C.send(s)}else console.error("WebSocket is not open. ReadyState:",null==C?void 0:C.readyState)},er=async()=>{try{let e=await L(ee,g,s),t=await z(s);e&&q(e.datacount),t&&G(t.labels)}catch(e){console.error("Failed to fetch from API:",e),f("Failed to fetch datacount: "+e,"ERROR")}},ei=async()=>{f("Saved Config","SUCCESS"),await A(x,s)},eo=async()=>{f("Reset Config","WARNING"),et()},ec=async()=>{if(x&&x.Retriever.components[x.Retriever.selected].config.Suggestion.value){let e=await H(K,3,s);e&&M(e.suggestions)}};return(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,l.jsx)("div",{className:"hidden md:flex gap-2 justify-start items-center",children:(0,l.jsx)($,{tooltip_text:"Use the Chat interface to interact with your data and perform Retrieval Augmented Generation (RAG). This interface allows you to ask questions, analyze sources, and generate responses based on your stored documents.",display_text:"Chat"})}),(0,l.jsxs)("div",{className:"w-full md:w-fit flex gap-3 justify-end items-center",children:[(0,l.jsx)(N,{title:"Chat",Icon:r.utr,onClick:()=>{b("Chat")},selected:"Chat"===h,disabled:!1,selected_color:"bg-secondary-verba"}),(0,l.jsx)(N,{title:"Config",Icon:o.KOq,onClick:()=>{b("Config")},selected:"Config"===h,disabled:!1,selected_color:"bg-secondary-verba"})]})]}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col h-[50vh] md:h-full w-full overflow-y-auto overflow-x-hidden relative",children:["Chat"==h&&(0,l.jsxs)("div",{className:"sticky flex flex-col gap-2 top-0 z-9 p-4 backdrop-blur-sm bg-opacity-30 bg-bg-alt-verba rounded-lg",children:[(0,l.jsxs)("div",{className:"flex gap-2 justify-start items-center",children:[(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,l.jsx)("label",{tabIndex:0,children:(0,l.jsx)(N,{title:"Label",className:"btn-sm min-w-min",icon_size:12,text_class_name:"text-xs",Icon:i.Lgw,selected:!1,disabled:!1})}),(0,l.jsx)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:P.map((e,t)=>(0,l.jsx)("li",{children:(0,l.jsx)("a",{onClick:()=>{J.includes(e)||W([...J,e]);let t=document.activeElement;t.blur();let s=t.closest(".dropdown");s&&s.blur()},children:e})},"Label"+t))})]})}),(J.length>0||g.length>0)&&(0,l.jsx)(N,{onClick:()=>{W([]),p([])},title:"Clear",className:"btn-sm max-w-min",icon_size:12,text_class_name:"text-xs",Icon:X.B4e,selected:!1,disabled:!1})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[J.map((e,t)=>(0,l.jsx)(N,{title:e,Icon:X.B4e,className:"btn-sm min-w-min max-w-[200px]",icon_size:12,selected_color:"bg-primary-verba",selected:!0,text_class_name:"truncate max-w-[200px]",text_size:"text-xs",onClick:()=>{W(J.filter(t=>t!==e))}},"FilterLabel"+t)),g.map((e,t)=>(0,l.jsx)(N,{title:e.title,Icon:X.B4e,className:"btn-sm min-w-min max-w-[200px]",icon_size:12,selected_color:"bg-secondary-verba",selected:!0,text_size:"text-xs",text_class_name:"truncate md:max-w-[100px] lg:max-w-[150px]",onClick:()=>{p(g.filter(t=>t.uuid!==e.uuid))}},"DocumentFilter"+t))]})]}),(0,l.jsxs)("div",{className:"".concat("Chat"===h?"flex flex-col gap-3 p-4":"hidden"),children:[(0,l.jsxs)("div",{className:"flex w-full justify-start items-center text-text-alt-verba gap-2",children:[0===V&&(0,l.jsx)(eW.I2T,{size:15}),0===V&&(0,l.jsx)("p",{className:"text-text-alt-verba text-sm items-center flex",children:"".concat(V," documents embedded by ").concat(ee)})]}),Z.map((e,t)=>(0,l.jsx)("div",{className:"".concat("user"===e.type?"text-right":""),children:(0,l.jsx)(eB,{message:e,message_index:t,selectedTheme:u,selectedDocument:U,setSelectedDocumentScore:B,setSelectedDocument:n,setSelectedChunkScore:c})},"Message_"+t)),_&&(0,l.jsx)(eB,{message:{type:"system",content:_,cached:!1},message_index:-1,selectedTheme:u,selectedDocument:U,setSelectedDocumentScore:B,setSelectedDocument:n,setSelectedChunkScore:c}),j.current&&(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-text-alt-verba loading loading-dots loading-md"}),(0,l.jsxs)("p",{className:"text-text-alt-verba",children:["CHUNKS"===w&&"Retrieving...","RESPONSE"===w&&"Generating..."]}),(0,l.jsx)("button",{onClick:()=>{y("DONE"),j.current=!1},className:"btn btn-circle btn-sm bg-bg-alt-verba hover:bg-warning-verba hover:text-text-verba text-text-alt-verba shadow-none border-none text-sm",children:(0,l.jsx)(X.B4e,{size:15})})]})})]}),"Config"===h&&(0,l.jsx)(eU,{addStatusMessage:f,production:t,RAGConfig:x,credentials:s,setRAGConfig:m,onReset:eo,onSave:ei})]}),(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:I?(0,l.jsxs)("div",{className:"flex gap-2 items-center justify-end w-full relative",children:[(0,l.jsxs)("div",{className:"relative w-full",children:[(0,l.jsx)("textarea",{className:"textarea textarea-bordered w-full bg-bg-verba placeholder-text-alt-verb min-h min-h-[40px] max-h-[150px] overflow-y-auto",placeholder:V>0?"Chatting with ".concat(V," documents..."):"No documents detected...",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),es())},value:K,onChange:e=>{let t=e.target.value;Y(t),(t.length-1)%3==0&&ec()}}),T.length>0&&(0,l.jsx)("ul",{className:"absolute flex gap-2 justify-between top-full left-0 w-full mt-2 z-10 max-h-40 overflow-y-auto",children:T.map((e,t)=>(0,l.jsx)("li",{className:"p-3 bg-button-verba hover:bg-secondary-verba text-text-alt-verba rounded-xl w-full hover:text-text-verba cursor-pointer",onClick:()=>{Y(e.query),M([])},children:(0,l.jsx)("p",{className:"text-xs lg:text-sm",children:e.query.length>50?e.query.substring(0,50)+"...":e.query.split(RegExp("(".concat(K,")"),"gi")).map((e,t)=>e.toLowerCase()===K.toLowerCase()?(0,l.jsx)("strong",{children:e},t):e)})},t))})]}),(0,l.jsx)(N,{type:"button",Icon:i.OUD,onClick:()=>{es()},disabled:!1,selected_color:"bg-primary-verba"}),(0,l.jsx)(N,{type:"button",Icon:X.Ffb,onClick:()=>{n(null),c([]),Y(""),B(null),M([]),Q([{type:"system",content:u.intro_message.text}])},disabled:!1,selected_color:"bg-primary-verba"})]}):(0,l.jsx)("div",{className:"flex gap-2 items-center justify-end w-full",children:(0,l.jsxs)("button",{onClick:()=>{D(e=>!e)},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2 items-center",children:[(0,l.jsx)(ep.Nwf,{size:15}),(0,l.jsx)("p",{children:"Reconnecting..."}),(0,l.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})})]})},eq=e=>{let{credentials:t,selectedTheme:s,addStatusMessage:n,production:r,currentPage:i,RAGConfig:o,setRAGConfig:c,documentFilter:d,setDocumentFilter:x}=e,[u,m]=(0,a.useState)(null),[f,g]=(0,a.useState)([]);return(0,l.jsxs)("div",{className:"flex md:flex-row flex-col justify-center gap-3 h-[50vh] md:h-[80vh] ",children:[(0,l.jsx)("div",{className:"".concat(u?"hidden md:flex md:w-[45vw]":"w-full md:w-[45vw] md:flex"),children:(0,l.jsx)(eV,{addStatusMessage:n,production:r,credentials:t,selectedTheme:s,setSelectedDocument:m,setSelectedChunkScore:g,currentPage:i,RAGConfig:o,setRAGConfig:c,documentFilter:d,setDocumentFilter:x})}),(0,l.jsx)("div",{className:"".concat(u?"md:w-[55vw] w-full flex":"hidden md:flex md:w-[55vw]"),children:(0,l.jsx)(ev,{addStatusMessage:n,credentials:t,documentFilter:d,setDocumentFilter:x,setSelectedDocument:m,selectedTheme:s,selectedDocument:u,chunkScores:f})})]})},eH=s(22034),eK=s(73478),eY=e=>{let{selectedTheme:t,setThemes:s,credentials:n,setSelectedTheme:r,themes:i,addStatusMessage:c}=e,[d,x]=(0,a.useState)(""),u=async()=>{await T(i,t,n),c("Changes to ".concat(t.theme_name," saved"),"SUCCESS")},m=(e,t)=>{r(s=>{let l=s[e];if("text"===l.type)return{...s,[e]:{...l,text:t}};if("image"===l.type)return{...s,[e]:{...l,src:t}};if("check"===l.type)return{...s,[e]:{...l,checked:t}};if("color"===l.type)return{...s,[e]:{...l,color:t}};if("select"===l.type)return{...s,[e]:{...l,value:t}};if("number"===l.type)return{...s,[e]:{...l,value:t}};return s})};(0,a.useEffect)(()=>{s(e=>{let s={...e};return s[t.theme_name]=t,s})},[t]);let f=(e,t)=>{if(t.target.files&&t.target.files[0]){let s=new FileReader;s.onload=t=>{var s;"string"==typeof(null===(s=t.target)||void 0===s?void 0:s.result)&&m(e,t.target.result)},s.readAsDataURL(t.target.files[0])}},g=(e,s)=>(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba",children:[(0,l.jsx)("p",{className:"flex min-w-[8vw]",children:s.description}),"text"===s.type&&(0,l.jsx)("label",{className:"input flex items-center gap-2 w-full border-none bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow w-full",placeholder:e,value:t[e].text,onChange:t=>m(e,t.target.value)})}),"select"===s.type&&(0,l.jsx)("select",{value:t[e].value,onChange:t=>{m(e,t.target.value)},className:"select bg-bg-verba",children:s.options.map(e=>(0,l.jsx)("option",{value:e,children:e},"Select_"+e))}),"color"===s.type&&(0,l.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh] z-10",children:[(0,l.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:e,value:t[e].color,onChange:t=>{m(e,t.target.value)}})}),(0,l.jsx)(eK.gW,{color:t[e].color,className:"z-1",onChange:t=>{m(e,t)}})]}),"image"===s.type&&(0,l.jsxs)("div",{className:"flex justify-between gap-4 w-full items-center",children:[(0,l.jsx)("div",{className:"flex-grow",children:(0,l.jsx)("label",{className:"input flex items-center text-text-verba gap-2 w-full border-none bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:"Enter image URL",value:d,onChange:e=>x(e.target.value)})})}),(0,l.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(N,{title:"Set Link",onClick:()=>m(e,d)}),(0,l.jsx)(N,{title:"Upload Image",onClick:()=>{var t;return null===(t=document.getElementById("".concat(e,"ImageInput")))||void 0===t?void 0:t.click()}}),(0,l.jsx)("input",{id:"".concat(e,"ImageInput"),type:"file",accept:"image/*",onChange:t=>f(e,t),className:"hidden"})]}),t[e].src&&(0,l.jsx)("img",{src:t[e].src,alt:"".concat(e," preview"),className:"max-w-full max-h-32 rounded-xl"})]})]})]})},e);return(0,l.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("p",{className:"text-2xl font-bold",children:"Customize Theme"}),(0,l.jsx)("select",{className:"select bg-bg-verba",value:Object.keys(i).find(e=>i[e]===t)||"",onChange:e=>r(i[e.target.value]),children:Object.keys(i).map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,l.jsxs)("div",{className:"gap-4 flex flex-col p-4",children:[(0,l.jsx)("p",{className:"font-bold",children:"Customize Logo"}),Object.entries(t).filter(e=>{let[t,s]=e;return"image"===s.type}).map(e=>{let[t,s]=e;return g(t,s)}),(0,l.jsx)("p",{className:"font-bold mt-4",children:"Customize Text"}),Object.entries(t).filter(e=>{let[t,s]=e;return"text"===s.type}).map(e=>{let[t,s]=e;return g(t,s)}),(0,l.jsx)("p",{className:"font-bold mt-4",children:"Customize Font"}),Object.entries(t).filter(e=>{let[t,s]=e;return"select"===s.type}).map(e=>{let[t,s]=e;return g(t,s)}),(0,l.jsx)("p",{className:"font-bold mt-4",children:"Customize Color"}),Object.entries(t).filter(e=>{let[t,s]=e;return"color"===s.type}).map(e=>{let[t,s]=e;return g(t,s)})]})}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,l.jsx)(N,{title:"Save",onClick:u,className:"max-w-min",Icon:o.FJM}),(0,l.jsx)(N,{title:"Reset",onClick:()=>{s({Light:ey,Dark:e_,Weaviate:eC,WCD:eS}),r(eC),c("Themes reset","SUCCESS")},className:"max-w-min",Icon:X.B4e})]})]})},eX=s(80624),e$=s(59743),eZ=e=>{let{credentials:t,addStatusMessage:s}=e,[n,i]=(0,a.useState)(1),[c,d]=(0,a.useState)([]),[x,u]=(0,a.useState)(0),m=async()=>{let e=await Y(n,3,t);e&&(d(e.suggestions),u(e.total_count))};(0,a.useEffect)(()=>{m()},[]),(0,a.useEffect)(()=>{m()},[n]);let f=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()},g=e=>{try{let t=(0,eX.D)(e);return(0,e$.Q)(t,{addSuffix:!0})}catch(e){return console.error("Error parsing timestamp:",e),"Invalid date"}},p=async e=>{await K(e,t),await m(),s("Suggestion deleted","SUCCESS")},h=e=>{navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard")})};return(0,l.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsxs)("p",{className:"text-2xl font-bold",children:["Manage Suggestions (",x,")"]}),(0,l.jsx)(N,{title:"Refresh",className:"max-w-min",onClick:()=>{m()},Icon:r.A$d})]}),(0,l.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,l.jsx)("div",{className:"gap-4 flex flex-col p-4 text-text-verba",children:(0,l.jsx)("div",{className:"flex flex-col gap-2",children:c.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 p-4 border-2 bg-bg-alt-verba rounded-xl",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 w-2/3",children:[(0,l.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:g(e.timestamp)}),(0,l.jsx)("p",{className:"text-sm text-text-verba truncate max-w-full",title:e.query,children:e.query})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(N,{onClick:()=>h(e.query),Icon:r.On2}),(0,l.jsx)(N,{onClick:()=>f("remove_suggestion"+e.uuid),Icon:r.VOs})]}),(0,l.jsx)(Z,{modal_id:"remove_suggestion"+e.uuid,title:"Remove Suggestion",text:"Do you want to remove this suggestion?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:p})]},"Suggestion"+e.uuid))})})}),c.length>0&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-verba",children:[(0,l.jsx)(N,{title:"Previous Page",onClick:()=>{1==n?i(1):i(e=>e-1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:o.O18}),(0,l.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Page ",n]}),(0,l.jsx)(N,{title:"Next Page",onClick:()=>{3*n<=x?i(e=>e+1):i(1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:o.Rdr})]})]})},eQ=e=>{let{credentials:t,addStatusMessage:s}=e,[n,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null),m=async()=>{d(!0);let e=await q(t);(null==e?void 0:e.error)===""&&(i(e.node_payload),u(e.collection_payload)),d(!1)};(0,a.useEffect)(()=>{d(!0),m(),d(!1)},[]);let f=async()=>{await V("DOCUMENTS",t)?(s("All documents reset","SUCCESS"),m()):s("Failed to reset documents","ERROR")},g=async()=>{await V("ALL",t)?(s("Verba reset","SUCCESS"),m()):s("Failed to reset Verba","ERROR")},p=async()=>{await V("CONFIG",t)?(s("Config reset","SUCCESS"),m()):s("Failed to reset config","ERROR")},h=async()=>{await V("SUGGESTIONS",t)?(s("Suggestions reset","SUCCESS"),m()):s("Failed to reset suggestions","ERROR")},b=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,l.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("p",{className:"text-2xl font-bold",children:"Admin Panel"}),(0,l.jsx)(N,{title:"Refresh",loading:c,onClick:m,className:"max-w-min",Icon:r.A$d})]}),(0,l.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,l.jsxs)("div",{className:"gap-4 flex flex-col p-4 text-text-verba",children:[(0,l.jsx)("p",{className:"font-bold text-lg",children:"Resetting Verba"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 justify-between",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)(N,{title:"Clear Documents",onClick:()=>b("reset-documents"),Icon:r.emU}),(0,l.jsx)(N,{title:"Clear Config",onClick:()=>b("reset-configs"),Icon:o.LDL}),(0,l.jsx)(N,{title:"Clear Everything",onClick:()=>b("reset-verba"),Icon:r.VOs}),(0,l.jsx)(N,{title:"Clear Suggestions",onClick:()=>b("reset-suggestions"),Icon:r.VOs})]})}),(0,l.jsx)("p",{className:"font-bold text-lg",children:"Weaviate Information"}),(0,l.jsxs)("div",{className:"flex flex-col border-2 gap-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm lg:text-base font-semibold text-text-alt-verba",children:"Connected to"}),(0,l.jsx)("p",{className:"   text-text-verba",children:t.url})]}),(0,l.jsxs)("div",{className:"flex flex-col border-2 gap-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm lg:text-base font-semibold text-text-alt-verba",children:"Deployment"}),(0,l.jsx)("p",{className:" text-text-verba",children:t.deployment})]}),(0,l.jsxs)("div",{className:"flex flex-col border-2 gap-2 border-secondary-verba shadow-sm p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm lg:text-base font-semibold text-text-alt-verba",children:"Version"}),n?(0,l.jsx)("p",{className:"text-text-verba",children:n.weaviate_version}):(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),(0,l.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("p",{className:"text-text-alt-verba text-sm lg:text-base font-semibold",children:"Nodes"}),n?(0,l.jsx)("p",{className:"text-text-alt-verba text-sm lg:text-base font-semibold",children:n.node_count}):(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),n?(0,l.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:n.nodes.map(e=>(0,l.jsxs)("li",{className:"text-sm text-text-verba flex justify-between",children:[(0,l.jsx)("span",{className:"w-64 truncate",children:e.name}),(0,l.jsxs)("span",{children:["(",e.status," - ",e.shards," shards)"]})]},"Node"+e.name))}):(0,l.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]}),(0,l.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("p",{className:"text-text-alt-verba text-sm lg:text-base font-semibold",children:"Collections"}),x?(0,l.jsx)("p",{className:"text-text-alt-verba text-sm lg:text-base font-semibold",children:x.collection_count}):(0,l.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),x?(0,l.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:x.collections.map(e=>(0,l.jsxs)("li",{className:"text-sm text-text-verba flex justify-between",children:[(0,l.jsx)("span",{className:"w-128 truncate",children:e.name}),(0,l.jsxs)("span",{children:[e.count," objects"]})]},"Collection"+e.name))}):(0,l.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]})]})}),(0,l.jsx)(Z,{modal_id:"reset-documents",title:"Reset Documents",text:"Are you sure you want to reset all documents? This will clear all documents and chunks from Verba.",triggerAccept:f,triggerString:"Reset"}),(0,l.jsx)(Z,{modal_id:"reset-configs",title:"Reset Config",text:"Are you sure you want to reset the config?",triggerAccept:p,triggerString:"Reset"}),(0,l.jsx)(Z,{modal_id:"reset-verba",title:"Reset Verba",text:"Are you sure you want to reset Verba? This will delete all collections related to Verba.",triggerAccept:g,triggerString:"Reset"}),(0,l.jsx)(Z,{modal_id:"reset-suggestions",title:"Reset Suggestions",text:"Are you sure you want to reset all autocomplete suggestions?",triggerAccept:h,triggerString:"Reset"})]})},e0=e=>{let{selectedTheme:t,themes:s,setThemes:n,addStatusMessage:i,setSelectedTheme:c,credentials:d}=e,[x,u]=(0,a.useState)("INFO");return(0,l.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,l.jsx)("div",{className:"w-1/3 flex",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:(0,l.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,l.jsx)($,{tooltip_text:"Customize Verba's Theme, reset collections, logout or report issues.",display_text:"Settings"})})}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 w-full overflow-y-auto overflow-x-hidden",children:[(0,l.jsx)(N,{title:"Admin",onClick:()=>u("INFO"),selected:"INFO"===x,selected_color:"bg-secondary-verba",Icon:eH.Xn2}),(0,l.jsx)(N,{title:"Customize Theme",onClick:()=>u("THEME"),selected:"THEME"===x,selected_color:"bg-secondary-verba",Icon:o._TT}),(0,l.jsx)(N,{title:"Manage Suggestions",onClick:()=>u("SUGGESTIONS"),selected:"SUGGESTIONS"===x,selected_color:"bg-secondary-verba",Icon:r.aTL})]}),(0,l.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 w-full overflow-y-auto overflow-x-hidden",children:[(0,l.jsx)(N,{title:"Logout",onClick:()=>window.location.reload(),Icon:r.p$f}),(0,l.jsx)(N,{title:"Report Issue",onClick:()=>window.open("https://github.com/weaviate/Verba/issues/new/choose","_blank"),Icon:eW.N3m})]})]})}),(0,l.jsx)("div",{className:"w-2/3 flex",children:(0,l.jsx)("div",{className:"flex flex-col gap-2 w-full",children:(0,l.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["THEME"===x&&(0,l.jsx)(eY,{themes:s,credentials:d,setThemes:n,setSelectedTheme:c,selectedTheme:t,addStatusMessage:i}),"INFO"===x&&(0,l.jsx)(eQ,{addStatusMessage:i,credentials:d}),"SUGGESTIONS"===x&&(0,l.jsx)(eZ,{credentials:d,addStatusMessage:i})]})})})]})},e2=e=>{let{}=e,t=(0,a.useRef)(null);return(0,a.useEffect)(()=>{t.current&&t.current.showModal()},[]),(0,l.jsx)("dialog",{id:"Getting-Started-Modal",className:"modal",ref:t,children:(0,l.jsxs)("div",{className:"modal-box w-11/12 max-w-5xl",children:[(0,l.jsx)("div",{className:"hero",children:(0,l.jsxs)("div",{className:"hero-content flex-row",children:[(0,l.jsxs)("div",{className:"text-center lg:text-left",children:[(0,l.jsx)("h1",{className:"text-2xl md:text-5xl font-bold",children:"Welcome to Verba"}),(0,l.jsx)("h2",{className:"text-lg md:text-2xl mt-2",children:"Your Open Source RAG App"}),(0,l.jsx)("p",{className:"py-6 text-sm md:text-base",children:"Verba is an open-source application designed to offer an end-to-end, streamlined, and user-friendly interface for Retrieval-Augmented Generation (RAG) out of the box. In just a few easy steps, explore your datasets and extract insights with ease, either locally with HuggingFace and Ollama or through LLM providers such as Anthrophic, Cohere, and OpenAI."}),(0,l.jsx)("p",{className:"py-6 text-sm md:text-base",children:"Learn more by visiting our GitHub repository, our blog post, or our video on Verba. Verba is currently still in development. If you have any questions or find issues, please reach out to us on GitHub."}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,l.jsx)(N,{title:"GitHub",Icon:o.hJX,onClick:()=>window.open("https://github.com/weaviate/verba","_blank")}),(0,l.jsx)(N,{title:"YouTube",Icon:o.V2E,onClick:()=>window.open("https://www.youtube.com/watch?v=swKKRdLBhas","_blank")}),(0,l.jsx)(N,{title:"Blog Post",Icon:r.kaV,onClick:()=>window.open("https://weaviate.io/blog/verba-open-source-rag-app","_blank")})]})]}),(0,l.jsx)("div",{className:"hidden md:block shrink-0",children:(0,l.jsx)("img",{src:"https://raw.githubusercontent.com/weaviate/Verba/main/img/thumbnail.png",alt:"Verba AI",width:400,className:"rounded-lg shadow-2xl"})})]})}),(0,l.jsx)("div",{className:"modal-action mt-6 justify-center md:justify-end",children:(0,l.jsx)("form",{method:"dialog",children:(0,l.jsx)(N,{title:"Let's get started",type:"submit",selected:!0,selected_color:"bg-primary-verba",Icon:o.$0H})})})]})})},e1=s(34446),e3=s(24635),e4=s(54018),e5=e=>{let{status_messages:t,set_status_messages:s}=e,[n,i]=(0,a.useState)([]);(0,a.useEffect)(()=>{t.length>0&&(i(e=>[...e,...t]),s([]));let e=setInterval(()=>{let e=new Date().getTime();i(t=>t.filter(t=>e-new Date(t.timestamp).getTime()<5e3))},1e3);return()=>clearInterval(e)},[t,s]);let o=e=>{switch(e){case"INFO":default:return"bg-button-verba";case"WARNING":return"bg-secondary-verba";case"SUCCESS":return"bg-primary-verba";case"ERROR":return"bg-warning-verba"}},c=e=>{switch(e){case"INFO":default:return(0,l.jsx)(eW.hCA,{size:15});case"WARNING":return(0,l.jsx)(r.OvZ,{size:15});case"SUCCESS":return(0,l.jsx)(e4.vuX,{size:15});case"ERROR":return(0,l.jsx)(eW.yZ3,{size:15})}};return(0,l.jsx)("div",{className:"fixed bottom-4 right-4 space-y-2",children:(0,l.jsx)(e1.M,{children:n.filter(e=>{let t=new Date(e.timestamp).getTime();return new Date().getTime()-t<5e3}).map((e,t)=>(0,l.jsx)(e3.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"".concat(o(e.type)," text-text-verba p-4 min-w-[300px] rounded-lg z-10 shadow-md"),children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[c(e.type),(0,l.jsx)("p",{className:"text-xs font-bold",children:e.type})]}),(0,l.jsx)("p",{className:"text-base",children:e.message})]})},t))})})};function e8(){var e;let[t,s]=(0,a.useState)("CHAT"),[r,i]=(0,a.useState)("Local"),[o,c]=(0,a.useState)(""),[d,x]=(0,a.useState)({Light:ey,Dark:e_,Weaviate:eC,WCD:eS}),[u,m]=(0,a.useState)(d.Weaviate),f=u.font.value,g=f&&(null===(e=b[f])||void 0===e?void 0:e.className)||"",[p,h]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),[y,_]=(0,a.useState)({deployment:"Local",url:"",key:""}),[S,k]=(0,a.useState)(null),[I,E]=(0,a.useState)([]),[D,O]=(0,a.useState)([]),A=(0,a.useCallback)(async()=>{try{let[e]=await Promise.all([R()]);e?(i(e.production),c(e.gtag),h(!0),_({deployment:"Local",url:e.deployments.WEAVIATE_URL_VERBA,key:e.deployments.WEAVIATE_API_KEY_VERBA})):(console.warn("Could not retrieve health data"),h(!1),j(!1))}catch(e){console.error("Error during initial fetch:",e),h(!1),j(!1)}},[]);(0,a.useEffect)(()=>{A()},[]),(0,a.useEffect)(()=>{if(v){let e=setTimeout(()=>{N(!0)},1e3);return()=>clearTimeout(e)}},[v]);let T=(0,a.useCallback)(()=>{Object.entries({"--primary-verba":u.primary_color.color,"--secondary-verba":u.secondary_color.color,"--warning-verba":u.warning_color.color,"--bg-verba":u.bg_color.color,"--bg-alt-verba":u.bg_alt_color.color,"--text-verba":u.text_color.color,"--text-alt-verba":u.text_alt_color.color,"--button-verba":u.button_color.color,"--button-hover-verba":u.button_hover_color.color,"--text-verba-button":u.button_text_color.color,"--text-alt-verba-button":u.button_text_alt_color.color}).forEach(e=>{let[t,s]=e;document.documentElement.style.setProperty(t,s)})},[u]);(0,a.useEffect)(T,[u]);let F=(e,t)=>{console.log("Adding status message:",e,t),O(s=>[...s,{message:e,type:t,timestamp:new Date().toISOString()}])};return(0,l.jsxs)("main",{className:"min-h-screen bg-bg-verba text-text-verba min-w-screen ".concat(g),"data-theme":u.theme,children:[""!==o&&(0,l.jsx)(n.GoogleAnalytics,{gaId:o}),(0,l.jsx)(e5,{status_messages:D,set_status_messages:O}),!v&&p&&(0,l.jsx)(eJ,{production:r,setSelectedTheme:m,setThemes:x,credentials:y,setIsLoggedIn:j,setRAGConfig:k,setCredentials:_}),v&&p&&(0,l.jsxs)("div",{className:"transition-opacity duration-1000 ".concat(w?"opacity-100":"opacity-0"," flex flex-col gap-2 p-5"),children:[(0,l.jsx)(e2,{}),(0,l.jsxs)("div",{children:[(0,l.jsx)(C,{production:r,title:u.title.text,subtitle:u.subtitle.text,imageSrc:u.image.src,version:"v2.0.0",currentPage:t,setCurrentPage:s}),(0,l.jsx)("div",{className:"".concat("CHAT"===t?"":"hidden"),children:(0,l.jsx)(eq,{addStatusMessage:F,credentials:y,RAGConfig:S,setRAGConfig:k,production:r,selectedTheme:u,currentPage:t,documentFilter:I,setDocumentFilter:E})}),"DOCUMENTS"===t&&(0,l.jsx)(ej,{addStatusMessage:F,credentials:y,production:r,selectedTheme:u,documentFilter:I,setDocumentFilter:E}),(0,l.jsx)("div",{className:"".concat("ADD"===t&&"Demo"!=r?"":"hidden"),children:(0,l.jsx)(eF,{RAGConfig:S,setRAGConfig:k,credentials:y,addStatusMessage:F})}),(0,l.jsx)("div",{className:"".concat("SETTINGS"===t&&"Demo"!=r?"":"hidden"),children:(0,l.jsx)(e0,{credentials:y,addStatusMessage:F,selectedTheme:u,setSelectedTheme:m,themes:d,setThemes:x})})]}),(0,l.jsx)("div",{className:"footer footer-center p-4 mt-8 bg-bg-verba text-text-alt-verba transition-all duration-1500 delay-1000",children:(0,l.jsx)("aside",{children:(0,l.jsx)("p",{children:"Build with ♥ and Weaviate \xa9 2024"})})})]}),(0,l.jsx)("img",{referrerPolicy:"no-referrer-when-downgrade",src:"https://static.scarf.sh/a.png?x-pxid=ec666e70-aee5-4e87-bc62-0935afae63ac"})]})}}},function(e){e.O(0,[596,689,520,370,465,929,582,190,400,61,652,682,306,420,636,115,949,971,23,744],function(){return e(e.s=87094)}),_N_E=e.O()}]);