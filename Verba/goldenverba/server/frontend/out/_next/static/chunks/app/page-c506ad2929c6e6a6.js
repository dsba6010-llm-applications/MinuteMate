(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{87094:function(e,t,a){Promise.resolve().then(a.bind(a,75921))},75921:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return e6}});var s=a(57437),r=a(2265),n=a(9881),l=a(58177),o=a(8603),i=a(14063),c=a(97223),d=e=>{let{Icon:t,iconSize:a,title:r,currentPage:n,setPage:l,setCurrentPage:o,hide:i}=e;return(0,s.jsxs)("button",{className:"btn md:btn-sm lg:btn-md ".concat(i?"hidden":"flex"," flex-grow items-center justify-center border-none hover:bg-button-hover-verba ").concat(n===l?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{o(l)},children:[(0,s.jsx)(t,{size:a}),(0,s.jsx)("p",{className:"md:text-xs lg:text-sm sm:hidden md:flex",children:r})]},r)};async function x(){try{let e=await fetch("https://api.github.com/repos/weaviate/verba",{method:"GET"}),t=await e.json();if(t)return t.stargazers_count;return 0}catch(e){return console.error("Failed to perform search:",e),0}}let u=e=>e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString();var b=e=>{let{imageSrc:t,title:a,subtitle:n,version:b,currentPage:m,setCurrentPage:g,production:h}=e,[v,f]=(0,r.useState)("0");(0,r.useEffect)(()=>{(async()=>{try{let e=await x();if(e){let t=u(e);f(t)}}catch(e){console.error("Failed to fetch GitHub stars:",e)}})()},[]);let p=()=>{window.open("https://github.com/weaviate/verba","_blank","noopener,noreferrer")};return(0,s.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,s.jsx)("img",{src:t,width:80,height:80,className:"flex rounded-lg w-[80px] h-[80px] object-contain"}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,s.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:a}),(0,s.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:n})]})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,s.jsx)("div",{className:"hidden sm:h-[3vh] lg:h-[5vh] bg-text-alt-verba w-px sm:mx-2 md:mx-4"}),(0,s.jsxs)("div",{className:"lg:flex hidden lg:flex-row items-center lg:gap-3 justify-between",children:[(0,s.jsx)("div",{className:" ".concat(h?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,s.jsx)(d,{hide:!1,Icon:l.utr,iconSize:18,title:"Chat",currentPage:m,setCurrentPage:g,setPage:"CHAT"}),(0,s.jsx)(d,{hide:"Demo"==h,Icon:o.Lgw,iconSize:18,title:"Import Data",currentPage:m,setCurrentPage:g,setPage:"ADD"}),(0,s.jsx)(d,{hide:!1,Icon:l.emU,iconSize:18,title:"Documents",currentPage:m,setCurrentPage:g,setPage:"DOCUMENTS"}),(0,s.jsx)(d,{hide:"Demo"==h,Icon:l.zfW,iconSize:18,title:"Settings",currentPage:m,setCurrentPage:g,setPage:"SETTINGS"}),(0,s.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden sm:block bg-text-alt-verba w-px"}),(0,s.jsxs)("button",{className:"md:hidden btn md:btn-sm lg:btn-md lg:flex items-center justify-center border-none bg-secondary-verba hover:bg-button-hover-verba",onClick:p,children:[(0,s.jsx)(i.hJX,{size:18,className:"text-text-verba"}),(0,s.jsx)("p",{className:"text-xs sm:hidden md:flex text-text-verba ",children:v})]}),(0,s.jsx)("p",{className:"hidden lg:flex text-xs text-text-alt-verba",children:b})]}),(0,s.jsx)("div",{className:"flex flex-row items-center sm:gap-1 lg:gap-5 justify-between",children:(0,s.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,s.jsx)("ul",{className:"menu md:menu-md sm:menu-sm sm:menu-horizontal bg-base-200 rounded-box hover:bg-button-hover-verba bg-button-verba z-50",children:(0,s.jsx)("li",{children:(0,s.jsxs)("details",{children:[(0,s.jsx)("summary",{children:(0,s.jsx)(c.bqP,{size:20})}),(0,s.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,s.jsx)("li",{onClick:e=>{g("CHAT")},children:(0,s.jsx)("a",{children:"Chat"})}),(0,s.jsx)("li",{onClick:e=>{g("DOCUMENTS")},children:(0,s.jsx)("a",{children:"Documents"})}),!h&&(0,s.jsx)("li",{onClick:e=>{g("STATUS")},children:(0,s.jsx)("a",{children:"Status"})}),!h&&(0,s.jsx)("li",{onClick:e=>{g("ADD")},children:(0,s.jsx)("a",{children:"Add Documents"})}),!h&&(0,s.jsx)("li",{onClick:e=>{g("RAG")},children:(0,s.jsx)("a",{children:"RAG"})}),!h&&(0,s.jsx)("li",{onClick:e=>{g("SETTINGS")},children:(0,s.jsx)("a",{children:"Settings"})}),(0,s.jsx)("li",{onClick:p,children:(0,s.jsx)("a",{children:"GitHub"})}),(0,s.jsx)("li",{className:"items-center justify-center text-xs text-text-alt-verba mt-2",children:b})]})]})})})})})]})]})};let m=async e=>{try{return(await fetch(e)).ok}catch(t){return console.error("Failed to fetch from ".concat(e,":"),t),!1}},g=async()=>{if(await m("http://localhost:8000/api/health"))return"http://localhost:8000";if(await m("/api/health"))return window.location.origin;throw Error("Both health checks failed, please check the Verba Server")},h=async e=>{try{let t=await g(),a=await fetch("".concat(t).concat(e),{method:"GET"}),s=await a.json();return s||console.warn("Could not retrieve data from ".concat(e)),s}catch(t){return console.error("Failed to fetch data from ".concat(e,":"),t),null}},v=()=>h("/api/health"),f=async(e,t,a)=>{let s=await g(),r=await fetch("".concat(s,"/api/connect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:{deployment:e,url:t,key:a}})});return await r.json()},p=async e=>{try{let t=await g(),a=await fetch("".concat(t,"/api/get_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},j=async(e,t)=>{if(!e)return!1;try{let a=await g(),s=await fetch("".concat(a,"/api/set_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rag_config:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error setting config:",e),!1}},w=async(e,t,a)=>{try{let s=await g(),r=await fetch("".concat(s,"/api/set_theme_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themes:e,theme:t,credentials:a})});return 200===r.status}catch(e){return console.error("Error setting config:",e),!1}},N=async(e,t,a,s,r)=>{try{let n=await g(),l=await fetch("".concat(n,"/api/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,RAG:t,labels:a,documentFilter:s,credentials:r})});return await l.json()}catch(e){return console.error("Error sending query",e),null}},y=async(e,t)=>{if(!e)return null;try{let a=await g(),s=await fetch("".concat(a,"/api/get_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return await s.json()}catch(e){return console.error("Error retrieving selected document",e),null}},S=async(e,t)=>{try{let a=await g(),s=await fetch("".concat(a,"/api/get_datacount"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embedding_model:e,credentials:t})});return await s.json()}catch(e){return console.error("Error retrieving content",e),null}},C=async e=>{try{let t=await g(),a=await fetch("".concat(t,"/api/get_labels"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},_=async(e,t,a,s)=>{if(!e)return null;try{let r=await g(),n=await fetch("".concat(r,"/api/get_content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,chunkScores:a,credentials:s})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},k=async(e,t,a)=>{if(!e)return null;try{let s=await g(),r=await fetch("".concat(s,"/api/get_vectors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,showAll:t,credentials:a})});return await r.json()}catch(e){return console.error("Error retrieving content",e),null}},E=async(e,t,a,s)=>{if(!e)return null;try{let r=await g(),n=await fetch("".concat(r,"/api/get_chunks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,pageSize:a,credentials:s})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},D=async(e,t,a)=>{if(!e)return null;try{let s=await g(),r=await fetch("".concat(s,"/api/get_chunk"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,embedder:t,credentials:a})});return await r.json()}catch(e){return console.error("Error retrieving content",e),null}},R=async(e,t,a,s,r)=>{try{let n=await g(),l=await fetch("".concat(n,"/api/get_all_documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,labels:t,page:a,pageSize:s,credentials:r})});return await l.json()}catch(e){return console.error("Error retrieving all documents",e),null}},O=async(e,t)=>{try{let a=await g(),s=await fetch("".concat(a,"/api/delete_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting document",e),!1}},z=async(e,t)=>{try{let a=await g(),s=await fetch("".concat(a,"/api/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting all documents",e),!1}},I=async e=>{try{let t=await g(),a=await fetch("".concat(t,"/api/get_meta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await a.json()}catch(e){return console.error("Error retrieving selected document",e),null}},T=async(e,t,a)=>{try{let s=await g(),r=await fetch("".concat(s,"/api/get_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,limit:t,credentials:a})});return await r.json()}catch(e){return console.error("Error retrieving suggestions",e),null}},A=async(e,t)=>{try{let a=await g(),s=await fetch("".concat(a,"/api/delete_suggestion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting suggestion",e),!1}},F=async(e,t,a)=>{try{let s=await g(),r=await fetch("".concat(s,"/api/get_all_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:e,pageSize:t,credentials:a})});return await r.json()}catch(e){return console.error("Error retrieving all suggestions",e),null}};var M=a(65125),P=e=>{let{tooltip_text:t,display_text:a}=e;return(0,s.jsxs)("div",{className:"items-center gap-2 flex",children:[(0,s.jsx)("div",{className:"tooltip tooltip-right text-xs","data-tip":t,children:(0,s.jsx)("button",{className:"btn btn-circle btn-sm border-none text-text-alt-verba bg-button-verba hover:bg-secondary-verba hover:text-text-verba",children:(0,s.jsx)(i.LL$,{})})}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba truncate max-w-[350px]",title:a,children:a})]})},L=e=>{let{title:t,modal_id:a,text:r,triggerAccept:n,triggerString:l,triggerValue:o}=e;return(0,s.jsx)("dialog",{id:a,className:"modal",children:(0,s.jsxs)("div",{className:"modal-box flex flex-col gap-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:r}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsxs)("form",{method:"dialog",className:"flex gap-2",children:[n&&l&&(0,s.jsx)("button",{className:"btn text-text-alt-verba hover:text-text-verba bg-button-verba border-none hover:bg-primary-verba",onClick:()=>{n(o)},children:l}),(0,s.jsx)("button",{className:"btn text-text-alt-verba hover:text-text-verba bg-button-verba border-none hover:bg-warning-verba",children:"Cancel"})]})})]})})},G=e=>{let{selectedDocument:t,setSelectedDocument:a,production:n,credentials:l}=e,[o,c]=(0,r.useState)(""),[d,x]=(0,r.useState)(1),[u,b]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[h,v]=(0,r.useState)([]),[f,p]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),N=async e=>{try{w(!0);let t=await R(e||"",h,d,20,l);t&&(""!==t.error?(console.error(t.error),w(!1),b(null)):(b(t.documents),g(t.labels),w(!1)))}catch(e){console.error("Failed to fetch document:",e),w(!1)}};(0,r.useEffect)(()=>{p(!0)},[]),(0,r.useEffect)(()=>{N(o)},[d,f,h]);let y=()=>{N(o)},S=async e=>{"Demo"!=n&&await O(e,l)&&(e==t&&a(null),N(o))},C=async()=>{"Demo"!=n&&(a(null),b(null),await z("DOCUMENTS",l))},_=e=>{v(t=>[...t,e])},k=e=>{v(t=>t.filter(t=>t!==e))},E=e=>{h.includes(e)?k(e):_(e)},D=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start w-[8vw]",children:(0,s.jsx)(P,{tooltip_text:"Search and inspect different documents imported into Verba",display_text:"Search"})}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},placeholder:"Search for documents",value:o,onChange:e=>{c(e.target.value)}})}),(0,s.jsx)("button",{type:"button",onClick:y,className:"btn btn-square border-none bg-primary-verba text-text-verba hover:bg-button-hover-verba",children:(0,s.jsx)(i.U41,{size:15})}),(0,s.jsx)("button",{type:"button",onClick:()=>{c(""),v([]),N("")},className:"btn btn-square border-none bg-button-verba text-text-verba hover:bg-button-hover-verba",children:(0,s.jsx)(M.Ffb,{size:18})})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 gap-3 items-center h-full w-full overflow-auto",children:[(0,s.jsx)("div",{className:"grid grid-flow-col gap-2 justify-start items-start w-full",children:m&&m.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{E(e)},className:"flex p-2 px-4 text-sm text-text-verba justify-center text-center items-center rounded-xl ".concat(h.includes(e)?"bg-primary-verba hover:bg-button-hover-verba":"bg-bg-verba hover:bg-primary-verba"," transition-colors duration-300 ease-in-out border-none"),children:(0,s.jsx)("p",{children:e})},document.title+t+e))}),j&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}),(0,s.jsx)("p",{className:"text-text-alt-verba",children:"Loading Documents"})]}),(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[u&&u.map((e,r)=>(0,s.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:[(0,s.jsx)("button",{onClick:()=>a(e.uuid),className:"flex ".concat(t&&t===e.uuid?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg transition-colors duration-300 ease-in-out border-none"),children:(0,s.jsx)("p",{className:"text-text-verba truncate max-w-[400px]",title:e.title,children:e.title})},e.title+r),(0,s.jsx)("div",{className:"flex justify-end items-center",children:(0,s.jsx)("button",{onClick:()=>{D("remove_document"+e.uuid)},disabled:"Demo"==n,className:"btn btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba",children:(0,s.jsx)(i.Xm5,{size:15})})}),(0,s.jsx)(L,{modal_id:"remove_document"+e.uuid,title:"Remove Document",text:"Do you want to remove "+e.title+"?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:S})]},"Document"+r+e.title))," "]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-center h-min w-full",children:(0,s.jsxs)("div",{className:"flex gap-3 items-center justify-between w-full",children:[(0,s.jsxs)("div",{className:"join justify-center items-center text-text-verba",children:[d>1&&(0,s.jsx)("button",{onClick:()=>{u&&(1==d?x(1):x(e=>e-1))},className:"join-item btn btn-sqare border-none bg-button-verba hover:bg-secondary-verba",children:"\xab"}),(0,s.jsxs)("button",{className:"join-item btn border-none bg-button-verba hover:bg-secondary-verba",children:["Page ",d]}),u&&u.length>=20&&(0,s.jsx)("button",{onClick:()=>{u&&(u.length<20?x(1):x(e=>e+1))},className:"join-item btn btn-square border-none bg-button-verba hover:bg-secondary-verba",children:"\xbb"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("remove_all_documents");e instanceof HTMLDialogElement&&e.showModal()},disabled:"Demo"==n,className:"flex bg-button-verba hover:bg-button-hover-verba border-none btn text-text-verba gap-2",children:[(0,s.jsx)(i.Xm5,{size:15}),(0,s.jsx)("p",{children:"Delete all Documents"})]})]})}),(0,s.jsx)(L,{modal_id:"remove_all_documents",title:"Remove all Document?",text:"Do you want to all remove documents from Verba?",triggerString:"Remove All",triggerValue:null,triggerAccept:C})]})},B=a(68842),W=a(33149),q=a(26547),J=a(20789),V=a(77954),U=a(97776),H=a(71375);let Y=["green","blue","red","yellow","purple","cyan","orange","limegreen","pink","teal","violet","forestgreen","gold","navy","magenta","mediumspringgreen","darkorange","deepskyblue","crimson","lightseagreen","royalblue","chartreuse","mediumorchid","aqua","orangered","mediumaquamarine","plum","lime","dodgerblue","lightcoral","mediumslateblue","lightgreen","darkred","springgreen","lightpink","indigo","lightyellow","mediumvioletred","seagreen","fuchsia","darkseagreen","thistle","orange","powderblue","yellowgreen","cornflowerblue","darkmagenta","darkblue","gold","mediumblue","rosybrown","darkgreen","lightskyblue","mediumseagreen","firebrick","lavender","darkcyan","khaki","mediumturquoise","saddlebrown","lightblue","olive","mintcream","turquoise","rebeccapurple","lightgoldenrodyellow"];function K(e,t,a){return a===t?0:(e-t)/(a-t)}(0,B.e)({OrbitControls:q.z});let X=e=>{let{vector:t,color:a,setHoverTitle:n,documentTitle:l,multiplication:o,dynamicColor:i,chunk_id:c,chunk_uuid:d,setSelectedChunk:x,selectedChunk:u,minX:b,maxX:m,minY:g,maxY:h,minZ:v,maxZ:f,chunkScores:p}=e,j=(0,r.useRef)(null),w=(0,r.useRef)(!1),N=(0,r.useMemo)(()=>null==p?void 0:p.some(e=>e.uuid===d),[p,d]),y=(0,r.useMemo)(()=>N?new U.Color("yellow"):u===d?new U.Color("green"):i?function(e,t,a,s,r,n,l){let o=K(e.x,t,a),i=K(e.y,s,r),c=K(e.z,n,l);return new U.Color("rgb(".concat(Math.floor(255*o),",").concat(Math.floor(255*i),",").concat(Math.floor(255*c),")"))}(t,b,m,g,h,v,f):new U.Color(a),[N,u,d,i,a,t,b,m,g,h,v,f]),S=N?3:u===d?1.5:1,C=N?1:w.current?1:.5,_=(0,r.useCallback)(()=>{w.current=!0,n.current("".concat(l," | ").concat(c))},[l,c,n]),k=(0,r.useCallback)(()=>{w.current=!1,n.current(null)},[n]),E=(0,r.useCallback)(()=>{x(d)},[d,x]);return(0,B.C)(()=>{if(j.current){j.current.position.lerp(new U.Vector3(t.x*o,t.y*o,t.z*o),.02);let e=j.current.material;e.color.set(w.current?"blue":y),e.opacity=w.current?1:C,e.transparent=!w.current}}),(0,s.jsx)(J.b,{rotationIntensity:.2,children:(0,s.jsxs)("mesh",{ref:j,position:[0,0,0],onPointerEnter:_,onPointerLeave:k,onClick:E,children:[(0,s.jsx)("sphereGeometry",{args:[S,32,32]}),(0,s.jsx)("meshBasicMaterial",{color:y,opacity:C,transparent:!0})]})})};var Z=e=>{let{credentials:t,selectedDocument:a,chunkScores:n}=e;(0,r.useRef)([]);let[l,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)([]),[d,x]=(0,r.useState)(""),[u,b]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!0),[h,v]=(0,r.useState)(null),f=(0,r.useRef)(e=>v(e)),[p,j]=(0,r.useState)(200),[w,N]=(0,r.useState)(0),[y,S]=(0,r.useState)(null),[C,_]=(0,r.useState)(null),[E,R]=(0,r.useState)(-1),[O,z]=(0,r.useState)(1),[I,T]=(0,r.useState)(-1),[A,F]=(0,r.useState)(1),[P,L]=(0,r.useState)(-1),[G,B]=(0,r.useState)(1);function J(e){return{min:Math.min(...e),max:Math.max(...e)}}(0,r.useEffect)(()=>{a?K():c([])},[u,a]),(0,r.useEffect)(()=>{y?U():_(null)},[y]);let U=async()=>{try{let e=await D(y,d,t);e&&(""!==e.error?(console.error(e.error),_(null)):_(e.chunk))}catch(e){console.error("Failed to fetch document:",e),o(!1)}},K=async()=>{try{o(!0);let e=await k(a,u,t);if(e){if(""!==e.error)console.error(e.error),o(!1),c([]),N(0),x("None");else if(c(e.vector_groups.groups),x(e.vector_groups.embedder),N(e.vector_groups.dimensions),o(!1),!u){let t=e.vector_groups.groups[0].chunks.map(e=>e.vector.x),a=e.vector_groups.groups[0].chunks.map(e=>e.vector.y),s=e.vector_groups.groups[0].chunks.map(e=>e.vector.z),{min:r,max:n}=J(t);R(r),z(n);let{min:l,max:o}=J(a);T(l),F(o);let{min:i,max:c}=J(s);L(i),B(c)}}}catch(e){console.error("Failed to fetch document:",e),o(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 h-full w-full",children:[(0,s.jsx)("div",{className:"flex justify-end w-full gap-2 items-center",children:(0,s.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[l&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2 h-full",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,s.jsx)("p",{className:"text-text-alt-verba text-sm font-bold",children:"Embedding Model:"}),(0,s.jsx)("p",{className:"text-text-alt-verba text-sm",children:d})]}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-sm font-bold",children:"Hover:"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba truncate max-w-[300px]",title:null!=h?h:"",children:null!=h?h:""})]}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-sm font-bold",children:"Vectors:"}),(0,s.jsxs)("p",{className:"text-sm text-text-alt-verba",children:[i.length," x ",(()=>{let e=0;for(let t of i)e+=t.chunks.length;return e})()," x ",w]})]})]}),(0,s.jsxs)("div",{className:"flex gap-10 items-center justify-between min-w-[20vw]",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Show All Documents"}),(0,s.jsx)("input",{type:"checkbox",className:"toggle",checked:u,onChange:e=>{b(e.target.checked)}})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Dynamic Coloring"}),(0,s.jsx)("input",{type:"checkbox",className:"toggle",checked:m,onChange:e=>{g(e.target.checked)}})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex w-full justify-start items-center",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:!0,className:"btn btn-sm bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(H.WMq,{size:15}),(0,s.jsx)("p",{children:"PCA"})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-sm",children:"Zoom"}),(0,s.jsx)("input",{onChange:e=>{j(Number(e.target.value))},type:"range",min:0,max:"1000",value:p,className:"range range-xs grow w-full"})]})]}),C&&(0,s.jsx)("button",{onClick:()=>{_(null),S(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,s.jsx)(M.B4e,{size:15})})]})]})}),(0,s.jsxs)("div",{className:"flex gap-5 h-[45vh] w-full",children:[(0,s.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(y?"w-2/3":"w-full"," h-full"),children:(0,s.jsxs)(W.Xz,{children:[(0,s.jsx)("ambientLight",{intensity:1}),(0,s.jsx)(q.z,{}),(0,s.jsx)(V.c,{makeDefault:!0,position:[0,0,150]}),(0,s.jsx)("axesHelper",{args:[50]}),i.map((e,t)=>e.chunks.map((a,r)=>(0,s.jsx)(X,{dynamicColor:m,multiplication:p,vector:a.vector,color:function(e){if(!(e>=Y.length))return Y[e];{let e=Math.floor(Math.random()*Y.length);return Y[e]}}(t),setHoverTitle:f,documentTitle:e.name,chunk_id:a.chunk_id,setSelectedChunk:S,selectedChunk:y,chunk_uuid:a.uuid,minX:E,minY:I,minZ:P,maxX:O,maxY:A,maxZ:G,chunkScores:n},"Sphere_"+r+e.name)))]})}),(0,s.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(y?"w-1/3 opacity-100":"w-0 opacity-0"," overflow-auto"),children:C&&(0,s.jsxs)("div",{className:"flex flex-col p-3 gap-2 w-full",children:[(0,s.jsxs)("p",{className:"text-text-alt-verba fond-bold",children:["Chunk ",C.chunk_id]}),(0,s.jsx)("p",{className:"text-text-alt-verba text-sm",children:C.content})]})})]})]})},$=a(13921),Q=a(7395),ee=a(38666),et=e=>{let{selectedDocument:t,credentials:a,selectedTheme:n}=e,[o,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)([]),[u,b]=(0,r.useState)(1),[m,g]=(0,r.useState)(0),[h,v]=(0,r.useState)(!0);(0,r.useEffect)(()=>{j(u),v(1===u&&0===m)},[u,m]),(0,r.useEffect)(()=>{j(1),g(0),v(1===u&&0===m)},[t]);let f=async()=>{m===d.length-1?(await j(u+1)?b(e=>e+1):(await j(1),b(1)),g(0)):g(e=>e+1)},p=async()=>{if(0===m){if(u>1){let e=u-1;await j(e)&&(b(e),g(9))}else{let e=u,t=!0;for(;t;)(t=await j(e+1))&&e++;await j(e),b(e),g(d.length-1)}}else g(e=>e-1)},j=async e=>{try{c(!0);let s=await E(t,e,10,a);if(s){if(""===s.error)return x(s.chunks),c(!1),s.chunks.length>0;console.error(s.error),c(!1),x([])}return!1}catch(e){return console.error("Failed to fetch document:",e),c(!1),!1}};return 0==d.length?(0,s.jsx)("div",{children:o&&(0,s.jsxs)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2 h-full",children:[(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}),(0,s.jsx)("p",{children:"Loading Chunks"})]})}):(0,s.jsx)("div",{className:"flex flex-col h-full",children:d.length>0&&(0,s.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsxs)("div",{className:"flex-grow overflow-hidden p-3",children:[(0,s.jsx)("div",{className:"flex justify-between mb-2",children:(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,s.jsx)(l.$Kz,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",d[m].chunk_id]})]})})}),(0,s.jsx)("div",{className:"overflow-y-auto h-[calc(100%-3rem)]",children:(0,s.jsx)($.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:a,className:r,children:l,...o}=e,i=/language-(\w+)/.exec(r||"");return!a&&i?(0,s.jsx)(Q.Z,{style:"dark"===n.theme?ee.vk:ee.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,s.jsx)("code",{className:r,...o,children:l})}},children:d[m].content})})]}),d.length>1&&(0,s.jsxs)("div",{className:"flex justify-center gap-2 p-3 bg-bg-alt-verba",children:[(0,s.jsxs)("button",{onClick:p,className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit ".concat(h?"cursor-not-allowed opacity-50":""),disabled:h,children:[(0,s.jsx)(i.O18,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"Previous Chunk"})]}),(0,s.jsxs)("button",{onClick:f,className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,s.jsx)(i.Rdr,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"Next Chunk"})]})]})]})})},ea=e=>{let{selectedDocument:t,credentials:a}=e,[n,l]=(0,r.useState)(!0),[o,i]=(0,r.useState)(null);(0,r.useEffect)(()=>{c()},[t]);let c=async()=>{try{l(!0);let e=await y(t,a);e&&(""!==e.error?i(null):i(e.document),l(!1))}catch(e){console.error("Failed to fetch document:",e),l(!1)}};return(0,s.jsx)("div",{className:"flex flex-col h-full",children:n?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-md text-text-verba bg-text-alt-verba"})}):o&&(0,s.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Title"}),(0,s.jsx)("p",{className:"text-text-verba truncate max-w-full",title:o.title,children:o.title})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Metadata"}),(0,s.jsx)("p",{className:"text-text-verba max-w-full",children:o.metadata})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Extension"}),(0,s.jsx)("p",{className:"text-text-verba max-w-full",children:o.extension})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"File Size"}),(0,s.jsx)("p",{className:"text-text-verba max-w-full",children:o.fileSize})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Source"}),(0,s.jsx)("button",{className:"text-text-verba truncate max-w-full",onClick:()=>window.open(o.source,"_blank"),title:o.source,children:o.source})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Labels"}),(0,s.jsx)("p",{className:"text-text-verba max-w-full",children:o.labels})]})]})})},es=a(25847),er=a(21794),en=e=>{let{document:t,selectedDocument:a,selectedTheme:n,credentials:o,chunkScores:c}=e,[d,x]=(0,r.useState)(!0),[u,b]=(0,r.useState)(1),[m,g]=(0,r.useState)(1),[h,v]=(0,r.useState)([]),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{t?p():v([]),b(1),g(1)},[t,c]),(0,r.useEffect)(()=>{t?p():(v([]),b(1),g(1))},[u]),(0,r.useEffect)(()=>{if(c&&c.length>0){var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}},[h,c]);let p=async()=>{try{x(!0);let e=await _(a,u,c||[],o);e&&(""!==e.error?(v([{content:e.error,chunk_id:0,score:0,type:"text"}]),b(1),g(1)):(v(e.content),g(e.maxPage)),x(!1))}catch(e){console.error("Failed to fetch content from document:",e),x(!1)}},j=(e,t)=>"text"===e.type?(0,s.jsx)("div",{className:"flex p-2",ref:c?null:f,children:(0,s.jsx)($.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:a,className:r,children:l,...o}=e,i=/language-(\w+)/.exec(r||"");return!a&&i?(0,s.jsx)(Q.Z,{style:"dark"===n.theme?ee.vk:ee.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,s.jsx)("code",{className:r,...o,children:l})}},children:e.content})},"CONTENT_SNIPPET"+t):(0,s.jsxs)("div",{className:"flex p-2 border-2 flex-col gap-2 border-secondary-verba shadow-lg rounded-3xl",ref:f,children:[(0,s.jsx)("div",{className:"flex justify-between",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,s.jsx)(er.dvR,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"Context Used"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,s.jsx)(l.$Kz,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",e.chunk_id+1]})]}),e.score>0&&(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-primary-verba rounded-full w-fit",children:[(0,s.jsx)(er.dvR,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"High Relevancy"})]})]})}),(0,s.jsx)($.D,{className:"w-full items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:a,className:r,children:l,...o}=e,i=/language-(\w+)/.exec(r||"");return!a&&i?(0,s.jsx)(Q.Z,{style:"dark"===n.theme?ee.vk:ee.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,s.jsx)("code",{className:r,...o,children:l})}},children:e.content})]});return t?(0,s.jsx)("div",{className:"flex flex-col h-full",children:t&&(0,s.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsx)("div",{className:"p-3 bg-bg-alt-verba",children:(0,s.jsxs)("div",{className:"flex gap-4 w-full justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[d&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,s.jsx)("p",{className:"text-lg font-bold truncate max-w-[350px]",title:t.title,children:t.title})]}),(0,s.jsx)("div",{className:"gap-2 grid grid-cols-3",children:Object.entries(t.labels).map(e=>{let[a,r]=e;return(0,s.jsx)("div",{className:"flex bg-bg-verba min-w-[8vw] p-2 text-sm text-text-verba justify-center text-center items-center rounded-xl",children:(0,s.jsx)("p",{children:r})},t.title+a+r)})})]})}),(0,s.jsx)("div",{className:"flex-grow overflow-hidden p-3",children:(0,s.jsx)("div",{className:"overflow-y-auto h-full",children:h&&h.map((e,t)=>j(e,t))})}),(0,s.jsxs)("div",{className:"flex justify-center gap-2 p-3 bg-bg-alt-verba",children:[(0,s.jsxs)("button",{onClick:()=>{1==u?b(m):b(e=>e-1)},className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,s.jsx)(i.O18,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Previous ",c?"Chunk":"Page"]})]}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("p",{className:"text-xs text-text-verba",children:[c?"Chunk ":"Page "," ",u]})}),(0,s.jsxs)("button",{onClick:()=>{u==m?b(1):b(e=>e+1)},className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,s.jsx)(i.Rdr,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Next ",c?"Chunk":"Page"]})]})]})]})}):(0,s.jsx)("div",{})},el=e=>{let{credentials:t,selectedDocument:a,setSelectedDocument:n,chunkScores:l,selectedTheme:c,documentFilter:d,setDocumentFilter:x}=e,[u,b]=(0,r.useState)("Content"),[m,g]=(0,r.useState)(!1),[h,v]=(0,r.useState)(null);(0,r.useEffect)(()=>{a?p():v(null)},[a]);let f=e=>{window.open(e,"_blank","noopener,noreferrer")},p=async()=>{try{g(!0);let e=await y(a,t);e&&(""!==e.error?(console.error(e.error),g(!1),v(null),n(null)):(v(e.document),g(!1)))}catch(e){console.error("Failed to fetch document:",e),g(!1)}};return a?(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(P,{tooltip_text:"Inspect your all information about your document, such as chunks, metadata and more.",display_text:h?h.title:"Loading..."})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("button",{onClick:()=>{b("Content")},className:"flex ".concat("Content"===u?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(M.Vqr,{size:15}),(0,s.jsx)("p",{children:"Content"})]}),(0,s.jsxs)("button",{onClick:()=>{b("Chunks")},className:"flex ".concat("Chunks"===u?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(M.Fqs,{size:15}),(0,s.jsx)("p",{children:"Chunks"})]}),(0,s.jsxs)("button",{onClick:()=>{b("Vector Space")},className:"flex ".concat("Vector Space"===u?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(es.FUn,{size:15}),(0,s.jsx)("p",{children:"Vector"})]}),(0,s.jsx)("button",{onClick:()=>{n(null)},className:"flex btn btn-square border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba gap-2",children:(0,s.jsx)(M.B4e,{size:15})})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["Content"===u&&(0,s.jsx)(en,{selectedTheme:c,document:h,credentials:t,selectedDocument:a,chunkScores:l}),"Chunks"===u&&(0,s.jsx)(et,{selectedTheme:c,credentials:t,selectedDocument:a}),"Vector Space"===u&&(0,s.jsx)(Z,{credentials:t,selectedDocument:a,chunkScores:l}),"Metadata"===u&&(0,s.jsx)(ea,{credentials:t,selectedDocument:a})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[d.some(e=>e.uuid===a)&&(0,s.jsxs)("button",{onClick:()=>{x(d.filter(e=>e.uuid!==a))},className:"btn border-none shadow-none text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(M.B4e,{size:15}),(0,s.jsx)("p",{children:"Remove from Chat"})]}),!d.some(e=>e.uuid===a)&&h&&(0,s.jsxs)("button",{onClick:()=>{x([...d,{uuid:a,title:h.title}])},className:"btn border-none shadow-none text-text-verba bg-primary-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(o.Lgw,{size:15}),(0,s.jsx)("p",{children:"Add to Chat"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[a&&h&&h.source&&(0,s.jsxs)("button",{onClick:()=>{f(h.source)},className:"flex btn border-none text-text-alt-verba hover:text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(i.CkN,{size:15}),(0,s.jsx)("p",{children:"View Source"})]}),(0,s.jsxs)("button",{onClick:()=>{b("Metadata")},className:"flex ".concat("Metadata"===u?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(i.DAO,{size:15}),(0,s.jsx)("p",{children:"View Metadata"})]})]})]})]}):(0,s.jsx)("div",{})},eo=e=>{let{selectedTheme:t,production:a,credentials:n,documentFilter:l,setDocumentFilter:o}=e,[i,c]=(0,r.useState)(null);return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(i?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,s.jsx)(G,{production:a,setSelectedDocument:c,credentials:n,selectedDocument:i})}),(0,s.jsx)("div",{className:"".concat(i?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:(0,s.jsx)(el,{credentials:n,setSelectedDocument:c,selectedTheme:t,selectedDocument:i,documentFilter:l,setDocumentFilter:o})})]})};let ei={DONE:"bg-secondary-verba",ERROR:"bg-warning-verba",READY:"bg-button-verba",STARTING:"bg-button-verba",CHUNKING:"bg-button-verba",LOADING:"bg-button-verba",EMBEDDING:"bg-button-verba",INGESTING:"bg-button-verba",NER:"bg-button-verba",EXTRACTION:"bg-button-verba",SUMMARIZING:"bg-button-verba",WAITING:"bg-button-verba"},ec={DONE:"Finished",ERROR:"Failed",READY:"Ready",STARTING:"Importing...",CHUNKING:"Chunking...",LOADING:"Loading...",EMBEDDING:"Embedding...",INGESTING:"Weaviating...",NER:"Extracting NER...",EXTRACTION:"Extraction REL...",SUMMARIZING:"Summarizing...",WAITING:"Uploading..."},ed={theme_name:"Light",title:{text:"Verba",type:"text",description:"Title"},subtitle:{text:"The Golden RAGtriever",type:"text",description:"Subtitle"},intro_message:{text:"Welcome to Verba, your open-source RAG application!",type:"text",description:"First Message"},image:{src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true",type:"image",description:"Logo"},primary_color:{color:"#FDFF91",type:"color",description:"Primary"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary"},warning_color:{color:"#FF8399",type:"color",description:"Warning"},bg_color:{color:"#FEF7F7",type:"color",description:"Background"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alt. Background"},text_color:{color:"#161616",type:"color",description:"Text"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alt. Text"},button_color:{color:"#EFEFEF",type:"color",description:"Button"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover"},font:{value:"Plus_Jakarta_Sans",type:"select",options:["Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],description:"Text Font"},theme:"light"},ex={...ed,theme_name:"Dark",title:{...ed.title,text:"Verba"},subtitle:{...ed.subtitle,text:"The Dark RAGtriever"},intro_message:{...ed.intro_message,text:"Welcome to Verba, your open-source RAG application!"},image:{...ed.image,src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true"},primary_color:{...ed.primary_color,color:"#BB86FC"},secondary_color:{...ed.secondary_color,color:"#008F82"},warning_color:{...ed.warning_color,color:"#FF8399"},bg_color:{...ed.bg_color,color:"#202020"},bg_alt_color:{...ed.bg_alt_color,color:"#2F2929"},text_color:{...ed.text_color,color:"#ffffff"},text_alt_color:{...ed.text_alt_color,color:"#999999"},button_color:{...ed.button_color,color:"#3C3C3C"},button_hover_color:{...ed.button_hover_color,color:"#2C2C2C"},font:{...ed.font,value:"Open_Sans"},theme:"dark"},eu={...ed,theme_name:"WCD",title:{...ed.title,text:"Verba"},subtitle:{...ed.subtitle,text:"Weaviate Chatbot"},intro_message:{...ed.intro_message,text:"Welcome to Verba, your open-source RAG application!"},image:{...ed.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...ed.primary_color,color:"#BF40C5"},secondary_color:{...ed.secondary_color,color:"#28395B"},warning_color:{...ed.warning_color,color:"#EA3A31"},bg_color:{...ed.bg_color,color:"#0C1428"},bg_alt_color:{...ed.bg_alt_color,color:"#192136"},text_color:{...ed.text_color,color:"#ffffff"},text_alt_color:{...ed.text_alt_color,color:"#AAAAAA"},button_color:{...ed.button_color,color:"#1D253A"},button_hover_color:{...ed.button_hover_color,color:"#313749"},font:{...ed.font,value:"Open_Sans"},theme:"dark"},eb={...ed,theme_name:"Weaviate",title:{...ed.title,text:"Verba"},subtitle:{...ed.subtitle,text:"Weaviate Chatbot"},intro_message:{...ed.intro_message,text:"Welcome to Verba, your open-source RAG application!"},image:{...ed.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...ed.primary_color,color:"#83e897"},secondary_color:{...ed.secondary_color,color:"#94e8fb"},warning_color:{...ed.warning_color,color:"#F4404E"},bg_color:{...ed.bg_color,color:"#ffffff"},bg_alt_color:{...ed.bg_alt_color,color:"#f8f8f8"},text_color:{...ed.text_color,color:"#130C49"},text_alt_color:{...ed.text_alt_color,color:"#a1a1a1"},button_color:{...ed.button_color,color:"#f1f1f1"},button_hover_color:{...ed.button_hover_color,color:"#eaeaea"},font:{...ed.font,value:"Plus_Jakarta_Sans"},theme:"light"};var em=a(50670),eg=a.n(em),eh=a(72810),ev=a.n(eh),ef=a(5117),ep=a.n(ef),ej=a(58146),ew=a.n(ej);let eN={Inter:eg(),Plus_Jakarta_Sans:ev(),Open_Sans:ep(),PT_Mono:ew()},ey=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")},eS=()=>{let e=document.activeElement;e&&e instanceof HTMLElement&&e.blur()},eC=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/import_files")};var e_=e=>{var t,a,n;let{fileData:l,fileMap:o,setFileMap:c,handleDeleteFile:d,selectedFileData:x,setSelectedFileData:u}=e,[b,m]=(0,r.useState)("New Link"),[g,h]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{x&&o[x].isURL&&m(o[x].content?o[x].content:"")},[o,x]),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:["READY"!=o[l.fileID].status?(0,s.jsxs)("button",{className:"min-w-[11vw] flex gap-2 items-center justify-center text-text-verba ".concat(ei[o[l.fileID].status]," hover:bg-button-hover-verba rounded-lg p-3"),children:["DONE"!=o[l.fileID].status&&"ERROR"!=o[l.fileID].status?(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}):"","DONE"===o[l.fileID].status&&(0,s.jsx)(i.FJM,{size:15}),"ERROR"===o[l.fileID].status&&(0,s.jsx)(M.vVM,{size:15}),(0,s.jsx)("p",{className:"text-sm",children:ec[o[l.fileID].status]})]}):(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center min-w-[11vw] tooltip tooltip-right","data-tip":o[l.fileID].rag_config.Reader.components[o[l.fileID].rag_config.Reader.selected].description,children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(H.WMq,{size:15}),(0,s.jsx)("p",{children:o[l.fileID].rag_config.Reader.selected})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:(t=o[l.fileID].rag_config,a=e=>{let t=JSON.parse(JSON.stringify(o[l.fileID])),a=JSON.parse(JSON.stringify(o[l.fileID].rag_config));a.Reader.selected=e,t.rag_config=a;let s={...o};s[l.fileID]=t,c(s),x&&x===o[l.fileID].filename&&u(l.fileID)},n=o[l.fileID].isURL?"URL":"FILE",Object.entries(t.Reader.components).filter(e=>{let[t,a]=e;return a.type===n}).map(e=>{let[t,r]=e;return(0,s.jsx)("li",{onClick:()=>{a(r.name),eS()},children:(0,s.jsx)("a",{children:r.name})},"Dropdown_"+r.name)}))})]}),(0,s.jsx)("button",{onClick:()=>{u(l.fileID)},className:"flex ".concat(x&&x===o[l.fileID].fileID?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba"," w-full p-3 rounded-lg transition-colors duration-300 ease-in-out border-none overflow-hidden"),children:(0,s.jsx)("p",{className:"text-text-verba truncate",children:o[l.fileID].filename?o[l.fileID].filename:"No Filename"})}),(0,s.jsx)("div",{className:"flex justify-end items-center",children:(0,s.jsx)("button",{onClick:()=>{let e=document.getElementById("remove_file_"+o[l.fileID].filename);e instanceof HTMLDialogElement&&e.showModal()},className:"btn btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba",children:(0,s.jsx)(i.Xm5,{size:15})})}),(0,s.jsx)(L,{modal_id:"remove_file_"+o[l.fileID].filename,title:"Remove File",text:o[l.fileID].isURL?"Do you want to remove the URL?":"Do you want to remove "+o[l.fileID].filename+" from the selection?",triggerString:"Delete",triggerValue:o[l.fileID].fileID,triggerAccept:d})]})},ek=e=>{let{fileMap:t,setFileMap:a,RAGConfig:n,setRAGConfig:l,selectedFileData:c,setSelectedFileData:d,importSelected:x,socketStatus:u,reconnect:b,importAll:m}=e,g=r.useRef(null);(0,r.useEffect)(()=>{null!==g.current&&(g.current.setAttribute("directory",""),g.current.setAttribute("webkitdirectory",""))},[g]);let h=e=>{a(t=>{if(null===e)return d(null),{};{e===c&&d(null);let a={...t};return delete a[e],a}})},[v,f]=(0,r.useState)(null),[p,j]=(0,r.useState)(null),w=async(e,s)=>{if(e.target.files&&n){let r=e.target.files,l={...t},o=s?p:v;for(let e=0;e<r.length;e++){let t=r[e],a=JSON.parse(JSON.stringify(n));o&&(a.Reader.selected=o);let s=t.name,i=t.name;if(i in l){let e=Date.now();i="".concat(i,"_").concat(e)}let c=t.name.split(".").pop()||"",d=await function(e){return new Promise((t,a)=>{let s=new FileReader;s.onload=()=>{t(function(e){let t="",a=new Uint8Array(e),s=a.byteLength;for(let e=0;e<s;e++)t+=String.fromCharCode(a[e]);return btoa(t)}(s.result))},s.onerror=()=>a(s.error),s.readAsArrayBuffer(e)})}(t);l[i]={fileID:i,filename:s,extension:c,status_report:{},source:"",isURL:!1,metadata:"",overwrite:!1,content:d,labels:["Document"],rag_config:a,file_size:y(d),status:"READY"}}a(l),d(Object.keys(l)[0]),e.target.value=""}},N=e=>{if(n){let s={...t},r=JSON.parse(JSON.stringify(n));r.Reader.selected=e;let l=new Date().toISOString();s[l]={fileID:l,filename:"New "+e+" URL",metadata:"",status_report:{},extension:"URL",isURL:!0,source:"",overwrite:!1,content:"",labels:["Document"],rag_config:r,file_size:0,status:"READY"},a(s),d(l)}},y=e=>{let t=e.replace(/\s+/g,"");if(t.length%2!=0)throw Error("Invalid hex string length.");return t.length/2};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(P,{tooltip_text:"Upload your data through this interface into Verba. You can select individual files, directories or add URL to fetch data from.",display_text:"File Selection"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,s.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(o.Lgw,{size:15}),(0,s.jsx)("p",{children:"Add Files"}),(0,s.jsx)(o.yQg,{size:15})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,a]=e;return"URL"!==a.type}).map(e=>{let[t,a]=e;return(0,s.jsx)("li",{onClick:()=>{var e;f(a.name),null===(e=document.getElementById("files_upload"))||void 0===e||e.click(),eS()},children:(0,s.jsx)("a",{children:a.name})},"File_"+a.name+t)})})]}),(0,s.jsx)("input",{id:"files_upload",type:"file",onChange:e=>w(e,!1),className:"hidden",multiple:!0}),(0,s.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,s.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(H.Lec,{size:15}),(0,s.jsx)("p",{children:"Add Directory"}),(0,s.jsx)(o.yQg,{size:15})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,a]=e;return"URL"!==a.type}).map(e=>{let[t,a]=e;return(0,s.jsx)("li",{onClick:()=>{var e;j(a.name),null===(e=document.getElementById("dir_upload"))||void 0===e||e.click(),eS()},children:(0,s.jsx)("a",{children:a.name})},"Dir_"+a.name+t)})})]}),(0,s.jsx)("input",{id:"dir_upload",type:"file",ref:g,onChange:e=>w(e,!0),className:"hidden",multiple:!0}),(0,s.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,s.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(o.Lgw,{size:15}),(0,s.jsx)("p",{children:"Add URL"}),(0,s.jsx)(o.yQg,{size:15})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,a]=e;return"URL"===a.type}).map(e=>{let[t,a]=e;return(0,s.jsx)("li",{onClick:()=>{N(a.name),eS()},children:(0,s.jsx)("a",{children:a.name})},"URL_"+a.name+t)})})]})]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:Object.entries(t).map(e=>{let[r,n]=e;return(0,s.jsx)(e_,{fileData:n,handleDeleteFile:h,selectedFileData:c,setSelectedFileData:d,fileMap:t,setFileMap:a},"FileComponent_"+r)})}),"ONLINE"===u?(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[c&&(0,s.jsxs)("button",{onClick:x,className:"flex btn border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(i.Xur,{size:15}),(0,s.jsx)("p",{children:"Import Selected"})]}),(0,s.jsxs)("button",{onClick:m,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(i.Xur,{size:15}),(0,s.jsx)("p",{children:"Import All"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("remove_all_files");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,s.jsx)(M.B4e,{size:15}),(0,s.jsx)("p",{children:"Clear Files"})]})]})}):(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,s.jsx)("div",{className:"flex gap-3 justify-end",children:(0,s.jsxs)("button",{onClick:b,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2 items-center",children:[(0,s.jsx)(es.Nwf,{size:15}),(0,s.jsx)("p",{children:"Reconnecting..."}),(0,s.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})}),(0,s.jsx)(L,{modal_id:"remove_all_files",title:"Clear all files?",text:"Do you want to clear all files from your selection?",triggerString:"Clear All",triggerValue:null,triggerAccept:h})]})},eE=a(67447),eD=a(88033),eR=a(54018),eO=e=>{var t;let{selectedFileData:a,fileMap:n,setFileMap:o,blocked:c}=e,[d,x]=(0,r.useState)(""),[u,b]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[h,v]=(0,r.useState)("");(0,r.useEffect)(()=>{a&&(x(n[a].filename),b(n[a].source),g(n[a].metadata))},[n,a]);let f=(0,r.useCallback)((e,t)=>{if(a){let s=JSON.parse(JSON.stringify(n[a]));s[e]=t;let r={...n};r[a]=s,o(r)}},[a,n,o]),p=(0,r.useCallback)(e=>{let t=e.target.value;x(t),f("filename",t)},[f]),j=(0,r.useCallback)(e=>{let t=e.target.value;b(t),f("source",t)},[f]),w=(0,r.useCallback)(e=>{let t=e.target.value;g(t),f("metadata",t)},[f]),N=e=>{if(a){let t=JSON.parse(JSON.stringify(n[a]));t.overwrite=e;let s={...n};s[a]=t,o(s)}},y=e=>{if(a&&!n[a].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(n[a]));t.labels.push(e);let s={...n};s[a]=t,o(s),v("")}},S=e=>{if(a&&n[a].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(n[a]));t.labels=t.labels.filter(t=>t!==e);let s={...n};s[a]=t,o(s),v("")}};return a?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[a&&"READY"!=n[a].status&&(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"Import Status"}),(0,s.jsx)("div",{className:"flex flex-col gap-3 text-text-verba",children:a&&Object.entries(n[a].status_report).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("p",{className:"flex min-w-[8vw] gap-2 items-center text-text-verba",children:["DONE"===a.status&&(0,s.jsx)(i.FJM,{size:15}),"ERROR"===a.status&&(0,s.jsx)(M.vVM,{size:15}),ec[a.status]]}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full ".concat(ei[a.status]," bg-bg-verba"),children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:0!=a.took?a.message+" ("+a.took+"s)":a.message,disabled:!0})})]},"Status"+t)})}),a&&n[a].isURL&&(0,s.jsxs)("div",{className:"justify-center items-center text-text-alt-verba flex gap-2",children:[(0,s.jsx)(eR.EQK,{size:15}),(0,s.jsx)("p",{children:"URL settings can be configured in the Config tab."})]}),(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:"File Settings"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Title"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:d,onChange:p,disabled:c})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add a Title to the document. If you are adding a URL, all URL will have a have their corresponding URL as filename."})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Source Link"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:u,onChange:j,disabled:c})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add a link to reference the original source of the document. You can access it through the Document Explorer via the View Source button"})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Labels"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:h,onChange:e=>{v(e.target.value)},disabled:c,title:h})}),(0,s.jsxs)("button",{onClick:()=>{y(h)},disabled:c,className:"btn bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:[(0,s.jsx)(l.Kth,{size:15}),(0,s.jsx)("p",{children:"Add"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add or remove labels for Document Filtering"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.entries((t=n[a]).labels).map(e=>{let[a,r]=e;return(0,s.jsxs)("div",{className:"flex bg-bg-verba min-w-[10vw] p-2 text-sm text-text-verba justify-between items-center rounded-xl",children:[(0,s.jsx)("p",{className:"truncate max-w-[80%]",title:r,children:r}),(0,s.jsx)("button",{onClick:()=>{S(r)},disabled:c,className:"btn btn-sm btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba ml-2",children:(0,s.jsx)(i.Xm5,{size:12})})]},t.fileID+a+r)})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Overwrite"}),(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>N(e.target.checked),checked:!!a&&n[a].overwrite,disabled:c})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Overwrite existing documents with the same name."})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"Metadata"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Metadata"}),(0,s.jsx)("textarea",{className:"grow w-full textarea flex items-center gap-2 max-h-64 bg-bg-verba",value:m,onChange:w,disabled:c})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add metadata to the document to improve retrieval and generation. Metadata will added to the context sent to the embedding and generation, to influcence the results."})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"File Information"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Extension"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[a].extension,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"File Size"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["B","KB","MB","GB","TB"][t])})(n[a].file_size),disabled:!0})})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"Ingestion Pipeline"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Reader"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[a].rag_config.Reader.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:a&&n[a].rag_config.Reader.components[n[a].rag_config.Reader.selected].description})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Chunker"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[a].rag_config.Chunker.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:a&&n[a].rag_config.Chunker.components[n[a].rag_config.Chunker.selected].description})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Embedder"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[a].rag_config.Embedder.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:a&&n[a].rag_config.Embedder.components[n[a].rag_config.Embedder.selected].description})]}),(0,s.jsx)("div",{className:"divider"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Debug"}),(0,s.jsx)("button",{onClick:()=>{let e=document.getElementById("File_Debug_Modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:(0,s.jsx)(eD.ZWp,{size:15})})]}),(0,s.jsx)("dialog",{id:"File_Debug_Modal",className:"modal",children:(0,s.jsxs)("div",{className:"modal-box min-w-fit",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Debugging File Configuration"}),(0,s.jsx)("pre",{className:"whitespace-pre-wrap",children:a?(()=>{let e={...n[a]};return e.content="File Content",JSON.stringify(e,null,2)})():""}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn text-text-verba bg-warning-verba border-none hover:bg-button-hover-verba ml-2",children:"Close"})})})]})})]}):(0,s.jsx)("div",{})};let ez=e=>{let{values:t,config_title:a,updateConfig:n,component_name:o,blocked:c}=e,[d,x]=(0,r.useState)(""),[u,b]=(0,r.useState)(t);(0,r.useEffect)(()=>{n(o,a,u)},[u]);let m=e=>{u.includes(e)||(b(t=>[...t,e]),x(""))},g=e=>{u.includes(e)&&b(t=>t.filter(t=>t!==e))};return(0,s.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",disabled:c,value:d,onChange:e=>{x(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),m(d))}})}),(0,s.jsxs)("button",{onClick:()=>{m(d)},disabled:c,className:"btn flex gap-2 bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:[(0,s.jsx)(l.Kth,{size:15}),(0,s.jsx)("p",{children:"Add"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex bg-bg-verba w-full p-2 text-center text-sm text-text-verba justify-between items-center rounded-xl",children:[(0,s.jsx)("div",{className:"flex w-full justify-center items-center overflow-hidden",children:(0,s.jsx)("p",{className:"truncate",title:e,children:e})}),(0,s.jsx)("button",{disabled:c,onClick:()=>{g(e)},className:"btn btn-sm btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba ml-2",children:(0,s.jsx)(i.Xm5,{size:12})})]},e+t))})]})};var eI=e=>{let{RAGConfig:t,component_name:a,selectComponent:r,updateConfig:n,blocked:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:a}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:a}),(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:l,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(H.WMq,{size:15}),(0,s.jsx)("p",{children:t[a].selected})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow",children:Object.entries(t[a].components).map(e=>{let[t,n]=e;return(0,s.jsx)("li",{onClick:()=>{l||(r(a,n.name),eS())},children:(0,s.jsx)("a",{children:n.name})},"ComponentDropdown_"+n.name)})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:t[a].components[t[a].selected].description})]}),Object.entries(t[a].components[t[a].selected].config).map(e=>{let[r,o]=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:r}),"dropdown"===o.type&&(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:l,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(H.WMq,{size:15}),(0,s.jsx)("p",{children:o.value})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 max-h-[20vh] overflow-auto rounded-box z-[1] w-full p-2 shadow",children:t[a].components[t[a].selected].config[r].values.map(e=>(0,s.jsx)("li",{onClick:()=>{l||(n(a,r,e),eS())},children:(0,s.jsx)("a",{children:e})},"ConfigValue"+e))})]}),"boolean"!=typeof o.value&&["text","number","password"].includes(o.type)&&(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:o.type,className:"grow w-full",value:o.value,onChange:e=>{l||n(a,r,e.target.value)}})}),"boolean"!=typeof o.value&&"multi"==o.type&&(0,s.jsx)(ez,{component_name:a,values:o.values,config_title:r,updateConfig:n,blocked:l}),"bool"==o.type&&(0,s.jsxs)("div",{className:"flex gap-5 justify-start items-center w-full my-4",children:[(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start w-[250px]",children:o.description}),(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>{l||n(a,r,e.target.checked)},checked:"boolean"==typeof o.value&&o.value})]})]}),"bool"!=o.type&&(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:o.description})]})]},"Configuration"+r+a)})]})},eT=e=>{var t;let{selectedFileData:a,fileMap:n,setFileMap:o,RAGConfig:c,setRAGConfig:d,setSelectedFileData:x,credentials:u}=e,[b,m]=(0,r.useState)("Basic"),g=async()=>{a&&(await j(n[a].rag_config,u)?d(n[a].rag_config):console.error("Failed to set RAG config:"))},h=(0,r.useCallback)((e,t,s)=>{o(r=>{if(a){let n={...r},l=n[a],o=l.rag_config[e].components[l.rag_config[e].selected].config;return"string"==typeof s||"boolean"==typeof s?o[t].value=s:o[t].values=s,n}return r})},[a]),v=(e,t)=>{o(s=>{if(a){let r=JSON.parse(JSON.stringify(s[a])),n=JSON.parse(JSON.stringify(s[a].rag_config));n[e].selected=t,r.rag_config=n;let l={...s};return l[a]=r,l}return s})};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(P,{tooltip_text:"Configure all import settings related to chunking, embedding, adding meta data and more. You can save made changes individually or apply them to all other files",display_text:"Import Config"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("button",{onClick:()=>{m("Basic")},className:"flex ".concat("Basic"===b?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,s.jsx)(l.zfW,{size:15}),(0,s.jsx)("p",{children:"Overview"})]}),(0,s.jsxs)("button",{onClick:()=>{m("Pipeline")},className:"flex ".concat("Pipeline"===b?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,s.jsx)(i.KOq,{size:15}),(0,s.jsx)("p",{children:"Config"})]}),(0,s.jsx)("button",{onClick:()=>{x(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,s.jsx)(M.B4e,{size:15})})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:["Basic"===b&&(0,s.jsx)(eO,{selectedFileData:a,fileMap:n,setFileMap:o,blocked:a?null!==(t=n[a].block)&&void 0!==t&&t:void 0}),"Pipeline"===b&&a&&(0,s.jsxs)("div",{className:"flex flex-col gap-10 w-full",children:[(0,s.jsx)(eI,{RAGConfig:n[a].rag_config,component_name:"Reader",selectComponent:v,updateConfig:h,blocked:n[a].block}),(0,s.jsx)(eI,{RAGConfig:n[a].rag_config,component_name:"Chunker",selectComponent:v,updateConfig:h,blocked:n[a].block}),(0,s.jsx)(eI,{RAGConfig:n[a].rag_config,component_name:"Embedder",selectComponent:v,updateConfig:h,blocked:n[a].block})]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("apply_setting_to_all");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(eE.HL_,{size:15}),(0,s.jsx)("p",{children:"Apply to All Files"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("set_default_settings");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-primary-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(l.zfW,{size:15}),(0,s.jsx)("p",{children:"Save Config"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_Setting");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,s.jsx)(M.B4e,{size:15}),(0,s.jsx)("p",{children:"Reset"})]})]})}),(0,s.jsx)(L,{modal_id:"apply_setting_to_all",title:"Apply Pipeline Settings",text:"Apply Pipeline Settings to all files?",triggerString:"Apply",triggerValue:null,triggerAccept:()=>{o(e=>{if(a){let t=JSON.parse(JSON.stringify(e[a].rag_config)),s={...e};for(let r in e){let n=JSON.parse(JSON.stringify(e[r]));n.rag_config=t,n.source=e[a].source,n.labels=e[a].labels,n.overwrite=e[a].overwrite,s[r]=n}return s}return e})}}),(0,s.jsx)(L,{modal_id:"reset_Setting",title:"Reset Setting",text:"Reset pipeline settings of this file?",triggerString:"Reset",triggerValue:null,triggerAccept:()=>{o(e=>{if(a&&c){let t={...e},s=JSON.parse(JSON.stringify(e[a]));return s.rag_config=c,t[a]=s,t}return e})}}),(0,s.jsx)(L,{modal_id:"set_default_settings",title:"Set Default",text:"Set current pipeline settings as default for future files?",triggerString:"Set",triggerValue:null,triggerAccept:g})]})},eA=e=>{let{credentials:t,RAGConfig:a,setRAGConfig:n}=e,[l,o]=(0,r.useState)({}),[i,c]=(0,r.useState)(null),[d,x]=(0,r.useState)(!1),[u,b]=(0,r.useState)(null),[m,g]=(0,r.useState)("OFFLINE");(0,r.useEffect)(()=>{x(!0)},[]),(0,r.useEffect)(()=>{let e=eC(),t=new WebSocket(e);return t.onopen=()=>{console.log("Import WebSocket connection opened to "+e),g("ONLINE")},t.onmessage=e=>{g("ONLINE");try{let t=JSON.parse(e.data);"new_file_id"in t?o(e=>{let a={...e};return a[t.new_file_id]={...a[t.original_file_id],fileID:t.new_file_id,filename:t.filename,block:!0},a}):v(t)}catch(t){console.error("Received data is not valid JSON:",e.data);return}},t.onerror=e=>{console.error("Import WebSocket Error:",e),g("OFFLINE"),h(),x(e=>!e)},t.onclose=e=>{g("OFFLINE"),h(),e.wasClean?console.log("Import WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),x(e=>!e)},b(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[d]);let h=()=>{o(e=>{if(l){let t={...e};for(let e in t)"DONE"!=t[e].status&&"ERROR"!=t[e].status&&"READY"!=t[e].status&&(t[e].status="ERROR",t[e].status_report.ERROR={fileID:e,status:"ERROR",message:"Connection was interrupted",took:0});return t}return e})},v=e=>{o(t=>{if(e&&e.fileID in t){let a=JSON.parse(JSON.stringify(t[e.fileID])),s={...t};return a.status=e.status,a.status_report[e.status]=e,s[e.fileID]=a,s}return t})},f=e=>{o(t=>{if(e in t){let a=JSON.parse(JSON.stringify(t[e])),s={...t};return a.status="WAITING",Object.entries(a.status_report).length>0&&(a.status_report={}),s[e]=a,s}return t})},p=(e,a)=>{if((null==u?void 0:u.readyState)===WebSocket.OPEN){f(a);let s=[],r=0;for(;r<e.length;){let t=e.slice(r,r+2e3);s.push(t),r+=2e3}let n=s.length;s.forEach((e,s)=>{u.send(JSON.stringify({chunk:e,isLastChunk:s===n-1,total:n,order:s,fileID:a,credentials:t}))})}else console.error("WebSocket is not open. ReadyState:",null==u?void 0:u.readyState),x(e=>!e)};return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(i?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,s.jsx)(ek,{fileMap:l,setFileMap:o,RAGConfig:a,setRAGConfig:n,selectedFileData:i,setSelectedFileData:c,importSelected:()=>{i&&["READY","DONE","ERROR"].includes(l[i].status)&&!l[i].block&&p(JSON.stringify(l[i]),i)},importAll:()=>{for(let e in l)["READY","DONE","ERROR"].includes(l[e].status)&&!l[e].block&&p(JSON.stringify(l[e]),e)},socketStatus:m,reconnect:()=>{x(e=>!e)}})}),(0,s.jsx)("div",{className:"".concat(i?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:i&&(0,s.jsx)(eT,{selectedFileData:i,RAGConfig:a,credentials:t,setRAGConfig:n,fileMap:l,setFileMap:o,setSelectedFileData:c})})]})},eF=a(34673),eM=a(21789),eP=a(19159),eL=(a(91997),a(1293)),eG=a(67161),eB="attribute vec4 tangent;\nuniform float uTime;\nuniform float uPositionFrequency;\nuniform float uTimeFrequency;\nuniform float uStrength;\nuniform float uWarpPositionFrequency;\nuniform float uWarpTimeFrequency;\nuniform float uWarpStrength;\n\nvarying float vWobble;\n\n//	Simplex 4D Noise \n//	by Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nfloat permute(float x){return floor(mod(((x*34.0)+1.0)*x, 289.0));}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nfloat taylorInvSqrt(float r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nvec4 grad4(float j, vec4 ip)\n{\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n}\n\n\nfloat simplexNoise4d(vec4 v)\n{\n  const vec2  C = vec2( 0.138196601125010504,  // (5 - sqrt(5))/20  G4\n                        0.309016994374947451); // (sqrt(5) - 1)/4   F4\n  // First corner\n  vec4 i  = floor(v + dot(v, C.yyyy) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n  // Other corners\n\n  // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n  //  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n\n  //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C \n  vec4 x1 = x0 - i1 + 1.0 * C.xxxx;\n  vec4 x2 = x0 - i2 + 2.0 * C.xxxx;\n  vec4 x3 = x0 - i3 + 3.0 * C.xxxx;\n  vec4 x4 = x0 - 1.0 + 4.0 * C.xxxx;\n\n  // Permutations\n  i = mod(i, 289.0); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n  // Gradients\n  // ( 7*7*6 points uniformly over a cube, mapped onto a 4-octahedron.)\n  // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n  // Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\nfloat getWobble(vec3 position){\n    vec3 warpedPosition = position;\n    warpedPosition += simplexNoise4d(vec4(position * uWarpPositionFrequency, uTime * uWarpTimeFrequency)) * uWarpStrength;\n\n    float wobble = simplexNoise4d(vec4(warpedPosition * uPositionFrequency, uTime * uTimeFrequency)) * uStrength;\n    return wobble;\n}\n\nvoid main()\n{\n    vec3 biTangent = cross(normal, tangent.xyz);\n\n    float shift = 0.01;\n    vec3 positionA = csm_Position + tangent.xyz * shift;\n    vec3 positionB = csm_Position + biTangent * shift;\n\n    float wobble = getWobble(csm_Position);\n    csm_Position += wobble * normal;\n    positionA += getWobble(positionA) * normal;\n    positionB += getWobble(positionB) * normal;\n\n    vec3 toA = normalize(positionA - csm_Position);\n    vec3 toB = normalize(positionB - csm_Position);\n    csm_Normal = normalize(cross(toA, toB));\n\n    vWobble = wobble / uStrength;\n}";let eW="";eW="/static";let eq=e=>{let{color:t,useMaterial:a,model_path:n}=e,l=(0,eF.L)(eW+n),o=(0,r.useMemo)(()=>new U.MeshPhysicalMaterial({metalness:1,roughness:.075,color:"#f1ff33",transmission:1,ior:1,thickness:1,transparent:!1,wireframe:!1,clearcoat:1,clearcoatRoughness:0}),[]);return(0,r.useEffect)(()=>{},[o]),(0,r.useEffect)(()=>{l.scene.traverse(e=>{e instanceof U.Mesh&&(console.log("Mesh:",e.name,"Material:",e.material),a?(e.material.roughness=.2,e.material.metalness=.6):e.material=o)})},[l,o]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("color",{args:[t],attach:"background"}),(0,s.jsx)(eM.N,{global:!0,rotation:[.13,.1,0],polar:[-.4,.2],azimuth:[-1,.75],config:{mass:2,tension:400},snap:{mass:4,tension:400},children:(0,s.jsx)(J.b,{speed:1,rotationIntensity:.4,children:(0,s.jsx)("primitive",{object:l.scene,"position-y":-.1,"position-x":.15,"position-z":-1,scale:.6})})})]})},eJ=(0,r.memo)(e=>{let{startPosition:t,endPosition:a,size:n,colorA:l,colorB:o}=e,i=(0,r.useMemo)(()=>({uTime:{value:0},uPositionFrequency:{value:.677},uTimeFrequency:{value:.041},uStrength:{value:.557},uWarpPositionFrequency:{value:.267},uWarpTimeFrequency:{value:.135},uWarpStrength:{value:.238},uColorA:{value:new U.Color(l)},uColorB:{value:new U.Color(o)},uRefractionStrength:{value:.1},uFresnelPower:{value:2},uTransparency:{value:.5}}),[]),c=(0,r.useMemo)(()=>new eP.Z({baseMaterial:U.MeshPhysicalMaterial,metalness:1,roughness:.914,uniforms:i,color:"#ffffff",transmission:1,ior:1.5,thickness:1,silent:!0,transparent:!0,wireframe:!1,clearcoat:1,clearcoatRoughness:0,vertexShader:eB,fragmentShader:"varying float vWobble;\nuniform vec3 uColorA;\nuniform vec3 uColorB;\n\nvoid main()\n{\n    float colorMix = smoothstep(-1.0, 1.0, vWobble);\n    csm_DiffuseColor.rgb = mix(uColorA, uColorB, colorMix);\n}"}),[]),d=(0,r.useMemo)(()=>new eP.Z({baseMaterial:U.MeshDepthMaterial,silent:!0,vertexShader:eB,depthPacking:U.RGBADepthPacking}),[]),x=(0,r.useRef)(null),u=(0,r.useRef)(null),b=new U.Vector3(...a);(0,r.useEffect)(()=>{x.current&&(u.current=new U.Vector3(...t),x.current.position.copy(u.current))},[t]),(0,r.useEffect)(()=>{},[c]),(0,B.C)((e,t)=>{i.uTime.value=e.clock.elapsedTime,x.current&&u.current&&(x.current.position.lerp(b,.02),.01>x.current.position.distanceTo(b)&&(u.current=null))});let m=new U.IcosahedronGeometry(n,30),g=(0,eG.$1)(m);return g.computeTangents(),(0,s.jsx)("mesh",{ref:x,material:c,receiveShadow:!0,castShadow:!0,customDepthMaterial:d,children:(0,s.jsx)("bufferGeometry",{attach:"geometry",...g})})});eJ.displayName="CoolShape";let eV=()=>{let{scene:e}=(0,B.A)();return(0,r.useEffect)(()=>{new eL.x().load(eW+"/alps_field_1k.hdr",t=>{t.mapping=U.EquirectangularReflectionMapping,e.environment=t})},[e]),null};var eU=e=>{let{credentials:t,setCredentials:a,setSelectedTheme:n,setThemes:l,setIsLoggedIn:o,production:c,setRAGConfig:d}=e,[x,u]=(0,r.useState)(!0),[b,m]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!0),[v,p]=(0,r.useState)(""),[j,w]=(0,r.useState)("Local"),[N,y]=(0,r.useState)(t.url),[S,C]=(0,r.useState)(t.key);(0,r.useEffect)(()=>{let e=setTimeout(()=>{u(!1)},300);return()=>clearTimeout(e)},[]);let _=async e=>{p(""),m(!0);let t=await f(e,N,S);t&&(t.error?(o(!1),p(t.error)):(o(!0),a({deployment:e,key:S,url:N}),d(t.rag_config),t.themes&&l(t.themes),t.theme&&n(t.theme))),m(!1)};return(0,r.useMemo)(()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eJ,{startPosition:[-3.3,-.8,-1],endPosition:[-1.3,-1,-4],size:2,colorA:"#00ffbf",colorB:"#00ff01"}),(0,s.jsx)(eJ,{startPosition:[1.5,10,-6],endPosition:[1.5,1,-5],size:1,colorA:"#00c0ff",colorB:"#00c0ff"})]}),[]),(0,s.jsx)("div",{className:"w-screen h-screen bg-white",children:(0,s.jsxs)("div",{className:"flex w-full h-full transition-opacity duration-1000 ".concat(x?"opacity-0":"opacity-100"),children:[(0,s.jsx)("div",{className:"w-3/5 h-full bg-white",children:(0,s.jsxs)(W.Xz,{camera:{position:[0,-.25,3],fov:40},className:"w-full h-full touch-none",children:[(0,s.jsx)("color",{attach:"background",args:["#ffffff"]}),(0,s.jsx)(eV,{}),(0,s.jsx)("ambientLight",{intensity:.5}),(0,s.jsx)("directionalLight",{position:[5,5,5],intensity:1.5}),(0,s.jsx)(eq,{color:"",useMaterial:"Local"!=c,model_path:"Local"==c?"/verba.glb":"/weaviate.glb"})]})}),(0,s.jsx)("div",{className:"w-2/5 h-full flex justify-start items-center p-5",children:(0,s.jsxs)("div",{className:"flex flex-col gap-8 items-start justify-center w-4/5",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("p",{className:"font-light text-5xl text-text-alt-verba",children:"Welcome to"}),(0,s.jsx)("p",{className:"font-light text-5xl text-text-verba",children:"Verba"})]}),"Local"==c&&(0,s.jsx)("p",{className:"text-text-verba text-lg ",children:"Choose your deployment"})]}),g?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:["Local"==c&&(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:[(0,s.jsx)("button",{onClick:()=>{h(!1),w("Weaviate")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,s.jsx)("p",{children:"Weaviate"})}),(0,s.jsx)("button",{onClick:()=>{h(!1),w("Docker")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,s.jsx)("p",{children:"Docker"})}),(0,s.jsx)("button",{onClick:()=>{w("Local"),_("Local")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",disabled:b,children:b?(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}):(0,s.jsx)("p",{children:"Local"})})]}),"Demo"==c&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsx)("button",{onClick:()=>{w("Weaviate"),_("Weaviate")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",disabled:b,children:b?(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}):(0,s.jsx)("p",{children:"Start Demo"})})}),"Production"==c&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsx)("button",{onClick:()=>{h(!1),w("Weaviate")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,s.jsx)("p",{children:"Start Verba"})})})]}):(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:"Demo"!=c&&(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:[(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_(j)},children:[(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba",children:[(0,s.jsx)(i.i1q,{className:"text-text-alt-verba"}),(0,s.jsx)("input",{type:"text",name:"username",value:N,onChange:e=>y(e.target.value),placeholder:"Weaviate URL",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full",autoComplete:"username"})]}),(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba mt-4",children:[(0,s.jsx)(i.q2z,{className:"text-text-alt-verba"}),(0,s.jsx)("input",{type:"password",name:"current-password",value:S,onChange:e=>C(e.target.value),placeholder:"API Key",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full",autoComplete:"current-password"})]}),(0,s.jsx)("div",{className:"flex justify-between gap-4 mt-4",children:(0,s.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"w-full bg-secondary-verba btn border-none hover:bg-button-hover-verba text-text-verba  p-3 rounded-lg",disabled:b,children:b?(0,s.jsx)("span",{className:"loading loading-spinner"}):"Connect"}),(0,s.jsx)("button",{type:"button",className:"w-full bg-button-verba btn border-none hover:bg-button-hover-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",disabled:b,onClick:()=>window.open("https://console.weaviate.cloud","_blank"),children:"Register"}),(0,s.jsx)("button",{type:"button",className:"w-full bg-button-verba btn border-none hover:bg-button-hover-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",disabled:b,onClick:()=>h(!0),children:"Back"})]})})]}),v&&(0,s.jsx)("div",{className:"bg-warning-verba p-4 rounded w-full",children:(0,s.jsx)("p",{className:"flex w-full whitespace-pre-wrap",children:v})})]})})]})})]})})},eH=a(93850),eY=e=>{let{RAGConfig:t,setRAGConfig:a,onSave:r,onReset:n,production:o}=e,i=(e,t,s)=>{a(a=>{if(a){let r={...a};return"string"==typeof s||"boolean"==typeof s?r[e].components[r[e].selected].config[t].value=s:r[e].components[r[e].selected].config[t].values=s,r}return a})},c=(e,t)=>{a(a=>{if(a){let s={...a};return s[e].selected=t,s}return a})};return t?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full p-6 ",children:[(0,s.jsx)(eI,{RAGConfig:t,component_name:"Embedder",selectComponent:c,updateConfig:i,blocked:"Demo"==o}),(0,s.jsx)(eI,{RAGConfig:t,component_name:"Generator",selectComponent:c,updateConfig:i,blocked:"Demo"==o}),(0,s.jsx)(eI,{RAGConfig:t,component_name:"Retriever",selectComponent:c,updateConfig:i,blocked:"Demo"==o}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsxs)("button",{onClick:r,disabled:"Demo"==o,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(l.zfW,{size:15}),(0,s.jsx)("p",{children:"Set as Default"})]}),(0,s.jsxs)("button",{onClick:n,disabled:"Demo"==o,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,s.jsx)(M.B4e,{size:15}),(0,s.jsx)("p",{children:"Reset"})]})]})]}):(0,s.jsx)("div",{})},eK=e=>{let{message:t,selectedTheme:a,selectedDocument:r,setSelectedDocument:n,message_index:o,setSelectedDocumentScore:c,setSelectedChunkScore:d}=e;return"string"==typeof t.content?(0,s.jsx)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"flex flex-col items-start p-5 rounded-3xl animate-press-in sm:text-sm md:text-base ".concat({user:"bg-bg-verba",system:"bg-bg-alt-verba",error:"bg-warning-verba",retrieval:"bg-bg-verba"}[t.type]),children:[t.cached&&(0,s.jsx)(i.i1q,{size:12,className:"text-text-verba"}),"system"===t.type&&(0,s.jsx)($.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:r,className:n,children:l,...o}=e,i=/language-(\w+)/.exec(n||"");return!r&&i?(0,s.jsx)(Q.Z,{style:"dark"===a.theme?ee.vk:ee.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,s.jsx)("code",{className:n,...o,children:l})}},children:t.content}),"user"===t.type&&(0,s.jsx)("div",{className:"whitespace-pre-wrap",children:t.content}),"error"===t.type&&(0,s.jsxs)("div",{className:"whitespace-pre-wrap flex items-center gap-2 text-sm text-text-verba",children:[(0,s.jsx)(eH.I2T,{size:15}),(0,s.jsx)("p",{children:t.content})]})]})}):(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3 w-full items-center",children:[t.content.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{n(e.uuid),c(e.uuid+e.score+e.chunks.length),d(e.chunks)},className:"flex ".concat(r&&r===e.uuid+e.score+e.chunks.length?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba"," rounded-3xl p-3 items-center justify-between transition-colors duration-300 ease-in-out border-none"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)("p",{className:"text-xs flex-grow truncate mr-2",title:e.title,children:e.title}),(0,s.jsxs)("div",{className:"flex gap-1 items-center text-text-verba flex-shrink-0",children:[(0,s.jsx)(l.$Kz,{size:12}),(0,s.jsx)("p",{className:"text-sm",children:e.chunks.length})]})]})},"Retrieval"+e.title+t)),(0,s.jsx)("button",{className:"btn btn-sm btn-square focus:outline-none text-text-alt-verba bg-button-verba hover:bg-button-hover-verba hover:text-text-verba border-none shadow-none",onClick:()=>document.getElementById("context-modal-"+o).showModal(),children:(0,s.jsx)(l.s59,{size:15})}),(0,s.jsx)("dialog",{id:"context-modal-"+o,className:"modal",children:(0,s.jsxs)("div",{className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Context"}),(0,s.jsx)("p",{className:"py-4",children:t.context}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn focus:outline-none text-text-alt-verba bg-button-verba hover:bg-button-hover-verba hover:text-text-verba border-none shadow-none",children:(0,s.jsx)("p",{children:"Close"})})})})]})})]})},eX=e=>{let{production:t,credentials:a,setSelectedDocument:n,setSelectedChunkScore:c,currentPage:d,RAGConfig:x,selectedTheme:u,setRAGConfig:b,documentFilter:m,setDocumentFilter:g}=e,[h,v]=(0,r.useState)("Chat"),f=(0,r.useRef)(!1),[w,y]=(0,r.useState)("DONE"),[_,k]=(0,r.useState)("");(0,r.useRef)(null);let[E,D]=(0,r.useState)(null),[R,O]=(0,r.useState)(!1),[z,I]=(0,r.useState)(!1),[A,F]=(0,r.useState)([]),[L,G]=(0,r.useState)([]),[B,W]=(0,r.useState)([]),[q,J]=(0,r.useState)(null),[V,U]=(0,r.useState)(0),[H,Y]=(0,r.useState)(""),[K,X]=(0,r.useState)([]),Z=x?x.Embedder.components[x.Embedder.selected].config.Model.value:"No Config found";(0,r.useState)("No Embedding Model"),(0,r.useEffect)(()=>{I(!0)},[]),(0,r.useEffect)(()=>{x?er():U(0)},[Z,d]),(0,r.useEffect)(()=>{X(e=>0===e.length?[{type:"system",content:u.intro_message.text}]:e)},[u.intro_message.text]),(0,r.useEffect)(()=>{let e=ey(),t=new WebSocket(e);return t.onopen=()=>{console.log("WebSocket connection opened to "+e),O(!0)},t.onmessage=e=>{let t;if(!f.current){k("");return}try{t=JSON.parse(e.data)}catch(t){console.error("Received data is not valid JSON:",e.data);return}let a=t.message;if(k(e=>e+a),"stop"===t.finish_reason){f.current=!1,y("DONE");let e=t.full_text;if(t.cached){let a=t.distance;X(t=>[...t,{type:"system",content:e,cached:!0,distance:a}])}else X(t=>[...t,{type:"system",content:e}]);k("")}},t.onerror=e=>{console.error("WebSocket Error:",e),O(!1),f.current=!1,y("DONE"),I(e=>!e)},t.onclose=e=>{e.wasClean?console.log("WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),O(!1),f.current=!1,y("DONE"),I(e=>!e)},D(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[z]),(0,r.useEffect)(()=>{x?er():U(0)},[x]);let $=async()=>{let e=await p(a);e&&b(e.rag_config)},Q=async()=>{if(!f.current&&H.trim()){Y(""),f.current=!0,F([]),y("CHUNKS"),X(e=>[...e,{type:"user",content:H}]);try{let e=await N(H,x,B,m,a);!e||e.error?ee(e?e.error:"No data received"):et(e,H)}catch(e){ee("Failed to fetch from API"),console.error("Failed to fetch from API:",e)}}},ee=e=>{X(t=>[...t,{type:"error",content:e}]),f.current=!1,y("DONE")},et=(e,t)=>{if(X(t=>[...t,{type:"retrieval",content:e.documents,context:e.context}]),e.documents.length>0){let a=e.documents[0];n(a.uuid),J("".concat(a.uuid).concat(a.score).concat(a.chunks.length)),c(a.chunks),e.context&&(ea(t,e.context),y("RESPONSE"))}else ee("We couldn't find any chunks to your query")},ea=(e,t)=>{if((null==E?void 0:E.readyState)===WebSocket.OPEN){let a=JSON.stringify({query:e,context:t,conversation:K.slice(1).filter(e=>"user"===e.type||"system"===e.type).map(e=>({type:e.type,content:e.content})),rag_config:x});E.send(a)}else console.error("WebSocket is not open. ReadyState:",null==E?void 0:E.readyState)},er=async()=>{try{let e=await S(Z,a),t=await C(a);e&&U(e.datacount),t&&G(t.labels)}catch(e){console.error("Failed to fetch from API:",e)}},en=async()=>{await j(x,a)},el=async()=>{$()},eo=async()=>{if(x&&x.Retriever.components[x.Retriever.selected].config.Suggestion.value){let e=await T(H,3,a);e&&F(e.suggestions)}};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start items-center",children:(0,s.jsx)(P,{tooltip_text:"Use the Chat interface to interact with your data and to perform Retrieval Augmented Generation (RAG)",display_text:"Chat"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("button",{onClick:()=>{v("Chat")},className:"flex ".concat("Chat"===h?"bg-primary-verba text-text-verba hover:bg-button-hover-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(l.utr,{size:15}),(0,s.jsx)("p",{children:"Chat"})]}),(0,s.jsxs)("button",{onClick:()=>{v("Config")},className:"flex ".concat("Config"===h?"bg-primary-verba text-text-verba hover:bg-button-hover-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(i.KOq,{size:15}),(0,s.jsx)("p",{children:"Config"})]})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col h-full w-full overflow-y-auto overflow-x-hidden relative",children:[(0,s.jsxs)("div",{className:"sticky flex flex-col gap-2 top-0 z-10 p-4 backdrop-blur-sm bg-opacity-30 bg-bg-alt-verba rounded-lg",children:[(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center",children:[(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsxs)("label",{tabIndex:0,className:"btn btn-sm border-none shadow-none bg-button-verba text-text-alt-verba hover:text-text-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(o.Lgw,{size:15}),(0,s.jsx)("p",{className:"text-xs",children:"Label"})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:L.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>{B.includes(e)||W([...B,e]);let t=document.activeElement;t.blur();let a=t.closest(".dropdown");a&&a.blur()},children:e})},"Label"+t))})]})}),(B.length>0||m.length>0)&&(0,s.jsxs)("button",{onClick:()=>{W([]),g([])},className:"btn btn-sm border-none shadow-none bg-button-verba text-text-alt-verba hover:text-text-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(M.B4e,{size:15}),(0,s.jsx)("p",{className:"text-xs",children:"Clear Filters"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[B.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>{W(B.filter(t=>t!==e))},className:"btn btn-sm border-none shadow-none text-text-alt-verba hover:text-text-verba bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)("p",{className:"text-xs truncate max-w-[200px]",title:e,children:e}),(0,s.jsx)(M.B4e,{size:15})]},"FilterLabel"+t)),m.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>{g(m.filter(t=>t.uuid!==e.uuid))},className:"btn btn-sm border-none shadow-none text-text-alt-verba hover:text-text-verba bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)("p",{className:"text-xs truncate max-w-[200px]",title:e.title,children:e.title}),(0,s.jsx)(M.B4e,{size:15})]},"DocumentFilter"+t))]})]}),(0,s.jsxs)("div",{className:"".concat("Chat"===h?"flex flex-col gap-3 p-4":"hidden"),children:[(0,s.jsxs)("div",{className:"flex w-full justify-start items-center text-text-alt-verba gap-2",children:[0===V&&(0,s.jsx)(eH.I2T,{size:15}),0===V&&(0,s.jsx)("p",{className:"text-text-alt-verba text-sm items-center flex",children:"".concat(V," documents embedded by ").concat(Z)})]}),K.map((e,t)=>(0,s.jsx)("div",{className:"".concat("user"===e.type?"text-right":""),children:(0,s.jsx)(eK,{message:e,message_index:t,selectedTheme:u,selectedDocument:q,setSelectedDocumentScore:J,setSelectedDocument:n,setSelectedChunkScore:c})},"Message_"+t)),_&&(0,s.jsx)(eK,{message:{type:"system",content:_,cached:!1},message_index:-1,selectedTheme:u,selectedDocument:q,setSelectedDocumentScore:J,setSelectedDocument:n,setSelectedChunkScore:c}),f.current&&(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-text-alt-verba loading loading-dots loading-md"}),(0,s.jsxs)("p",{className:"text-text-alt-verba",children:["CHUNKS"===w&&"Retrieving...","RESPONSE"===w&&"Generating..."]}),(0,s.jsx)("button",{onClick:()=>{y("DONE"),f.current=!1},className:"btn btn-circle btn-sm bg-bg-alt-verba hover:bg-warning-verba hover:text-text-verba text-text-alt-verba shadow-none border-none text-sm",children:(0,s.jsx)(M.B4e,{size:15})})]})})]}),"Config"===h&&(0,s.jsx)(eY,{production:t,RAGConfig:x,setRAGConfig:b,onReset:el,onSave:en})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:R?(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-end w-full relative",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("textarea",{className:"textarea textarea-bordered w-full bg-bg-verba placeholder-text-alt-verba max-h-32 overflow-y-auto",placeholder:V>0?"Chatting with ".concat(V," documents..."):"No documents detected...",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Q())},value:H,onChange:e=>{let t=e.target.value;Y(t),(t.length-1)%3==0&&eo()}}),A.length>0&&(0,s.jsx)("ul",{className:"absolute flex gap-2 justify-between top-full left-0 w-full mt-2 z-10 max-h-40 overflow-y-auto",children:A.map((e,t)=>(0,s.jsx)("li",{className:"p-3 bg-button-verba hover:bg-secondary-verba text-text-alt-verba rounded-xl w-full hover:text-text-verba cursor-pointer",onClick:()=>{Y(e.query),F([])},children:(0,s.jsx)("p",{className:"text-sm",children:e.query.length>50?e.query.substring(0,50)+"...":e.query.split(RegExp("(".concat(H,")"),"gi")).map((e,t)=>e.toLowerCase()===H.toLowerCase()?(0,s.jsx)("strong",{children:e},t):e)})},t))})]}),(0,s.jsx)("button",{type:"button",onClick:e=>{Q()},className:"btn btn-square border-none text-text-verba bg-primary-verba hover:bg-button-hover-verba",children:(0,s.jsx)(o.OUD,{size:15})}),(0,s.jsx)("button",{type:"button",onClick:()=>{n(null),c([]),Y(""),J(null),F([]),X([{type:"system",content:u.intro_message.text}])},className:"btn btn-square text-text-alt-verba hover:text-text-verba border-none bg-button-verba hover:bg-button-hover-verba",children:(0,s.jsx)(M.Ffb,{size:18})})]}):(0,s.jsx)("div",{className:"flex gap-2 items-center justify-end w-full",children:(0,s.jsxs)("button",{onClick:()=>{I(e=>!e)},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2 items-center",children:[(0,s.jsx)(es.Nwf,{size:15}),(0,s.jsx)("p",{children:"Reconnecting..."}),(0,s.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})})]})},eZ=e=>{let{credentials:t,selectedTheme:a,production:n,currentPage:l,RAGConfig:o,setRAGConfig:i,documentFilter:c,setDocumentFilter:d}=e,[x,u]=(0,r.useState)(null),[b,m]=(0,r.useState)([]);return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(x?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,s.jsx)(eX,{production:n,credentials:t,selectedTheme:a,setSelectedDocument:u,setSelectedChunkScore:m,currentPage:l,RAGConfig:o,setRAGConfig:i,documentFilter:c,setDocumentFilter:d})}),(0,s.jsx)("div",{className:"".concat(x?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:(0,s.jsx)(el,{credentials:t,documentFilter:c,setDocumentFilter:d,setSelectedDocument:u,selectedTheme:a,selectedDocument:x,chunkScores:b})})]})},e$=a(22034),eQ=a(73478),e0=e=>{let{selectedTheme:t,setThemes:a,credentials:n,setSelectedTheme:l,themes:o}=e,[c,d]=(0,r.useState)(""),x=async()=>{await w(o,t,n)},u=(e,t)=>{l(a=>{let s=a[e];if("text"===s.type)return{...a,[e]:{...s,text:t}};if("image"===s.type)return{...a,[e]:{...s,src:t}};if("check"===s.type)return{...a,[e]:{...s,checked:t}};if("color"===s.type)return{...a,[e]:{...s,color:t}};if("select"===s.type)return{...a,[e]:{...s,value:t}};if("number"===s.type)return{...a,[e]:{...s,value:t}};return a})};(0,r.useEffect)(()=>{a(e=>{let a={...e};return a[t.theme_name]=t,a})},[t]);let b=(e,t)=>{if(t.target.files&&t.target.files[0]){let a=new FileReader;a.onload=t=>{var a;"string"==typeof(null===(a=t.target)||void 0===a?void 0:a.result)&&u(e,t.target.result)},a.readAsDataURL(t.target.files[0])}},m=(e,a)=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:a.description}),"text"===a.type&&(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full border-none bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",placeholder:e,value:t[e].text,onChange:t=>u(e,t.target.value)})}),"select"===a.type&&(0,s.jsx)("select",{value:t[e].value,onChange:t=>{u(e,t.target.value)},className:"select bg-bg-verba",children:a.options.map(e=>(0,s.jsx)("option",{value:e,children:e},"Select_"+e))}),"color"===a.type&&(0,s.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh]",children:[(0,s.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow",placeholder:e,value:t[e].color,onChange:t=>{u(e,t.target.value)}})}),(0,s.jsx)(eQ.gW,{color:t[e].color,onChange:t=>{u(e,t)}})]}),"image"===a.type&&(0,s.jsxs)("div",{className:"flex justify-between gap-4 w-full items-center",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("label",{className:"input flex items-center text-text-verba gap-2 w-full border-none bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow",placeholder:"Enter image URL",value:c,onChange:e=>d(e.target.value)})})}),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("button",{onClick:()=>u(e,c),className:"btn border-none shadow-none bg-button-verba hover:bg-button-hover-verba",children:"Set Link"}),(0,s.jsx)("button",{onClick:()=>{var t;return null===(t=document.getElementById("".concat(e,"ImageInput")))||void 0===t?void 0:t.click()},className:"btn border-none shadow-none bg-button-verba hover:bg-button-hover-verba",children:"Upload Image"}),(0,s.jsx)("input",{id:"".concat(e,"ImageInput"),type:"file",accept:"image/*",onChange:t=>b(e,t),className:"hidden"})]}),t[e].src&&(0,s.jsx)("img",{src:t[e].src,alt:"".concat(e," preview"),className:"max-w-full max-h-32 rounded-xl"})]})]})]})},e);return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Customize Theme"}),(0,s.jsx)("select",{className:"select bg-bg-verba",value:Object.keys(o).find(e=>o[e]===t)||"",onChange:e=>l(o[e.target.value]),children:Object.keys(o).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"gap-4 flex flex-col p-4",children:[(0,s.jsx)("p",{className:"font-bold",children:"Customize Logo"}),Object.entries(t).filter(e=>{let[t,a]=e;return"image"===a.type}).map(e=>{let[t,a]=e;return m(t,a)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Text"}),Object.entries(t).filter(e=>{let[t,a]=e;return"text"===a.type}).map(e=>{let[t,a]=e;return m(t,a)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Font"}),Object.entries(t).filter(e=>{let[t,a]=e;return"select"===a.type}).map(e=>{let[t,a]=e;return m(t,a)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Color"}),Object.entries(t).filter(e=>{let[t,a]=e;return"color"===a.type}).map(e=>{let[t,a]=e;return m(t,a)})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,s.jsxs)("button",{onClick:x,className:"btn flex items-center justify-center border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(i.FJM,{}),(0,s.jsx)("p",{className:"",children:"Save"})]}),(0,s.jsxs)("button",{onClick:()=>{a({Light:ed,Dark:ex,Weaviate:eb,WCD:eu}),l(eb)},className:"btn flex items-center justify-center border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(M.B4e,{}),(0,s.jsx)("p",{className:"",children:"Reset"})]})]})]})},e1=a(80624),e2=a(59743),e3=e=>{let{credentials:t}=e,[a,n]=(0,r.useState)(1),[o,c]=(0,r.useState)([]),[d,x]=(0,r.useState)(0),u=async()=>{let e=await F(a,3,t);e&&(c(e.suggestions),x(e.total_count))};(0,r.useEffect)(()=>{u()},[]),(0,r.useEffect)(()=>{u()},[a]);let b=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()},m=e=>{try{let t=(0,e1.D)(e);return(0,e2.Q)(t,{addSuffix:!0})}catch(e){return console.error("Error parsing timestamp:",e),"Invalid date"}},g=async e=>{await A(e,t),await u()},h=e=>{navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard")})};return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["Manage Suggestions (",d,")"]}),(0,s.jsxs)("button",{onClick:()=>{u()},className:"btn border-none shadow-none flex items-center gap-2 p-3 text-text-alt-verba hover:text-text-verba bg-button-verba hover:bg-button-hover-verba",title:"Refresh suggestions",children:[(0,s.jsx)(l.A$d,{size:15}),(0,s.jsx)("p",{children:"Refresh"})]})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsx)("div",{className:"gap-4 flex flex-col p-4 text-text-verba",children:(0,s.jsx)("div",{className:"flex flex-col gap-2",children:o.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 p-4 border-2 bg-bg-alt-verba rounded-xl",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 w-2/3",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:m(e.timestamp)}),(0,s.jsx)("p",{className:"text-sm text-text-verba truncate max-w-full",title:e.query,children:e.query})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>h(e.query),className:"p-3 btn-square border-none shadow-none btn text-text-alt-verba hover:text-text-verba bg-button-verba hover:bg-button-hover-verba",title:"Copy to clipboard",children:(0,s.jsx)(l.On2,{size:15})}),(0,s.jsx)("button",{onClick:()=>b("remove_suggestion"+e.uuid),className:"p-3 btn-square border-none shadow-none btn text-text-alt-verba hover:text-text-verba bg-button-verba hover:bg-warning-verba",title:"Delete suggestion",children:(0,s.jsx)(l.VOs,{size:15})})]}),(0,s.jsx)(L,{modal_id:"remove_suggestion"+e.uuid,title:"Remove Suggestion",text:"Do you want to remove this suggestion?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:g})]},"Suggestion"+e.uuid))})})}),o.length>0&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-verba",children:[(0,s.jsxs)("button",{onClick:()=>{1==a?n(1):n(e=>e-1)},className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,s.jsx)(i.O18,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"Previous Page"})]}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Page ",a]}),(0,s.jsxs)("button",{onClick:()=>{3*a<=d?n(e=>e+1):n(1)},className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,s.jsx)(i.Rdr,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"Next Page"})]})]})]})},e4=e=>{let{credentials:t}=e,[a,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),d=async()=>{let e=await I(t);(null==e?void 0:e.error)===""&&(n(e.node_payload),c(e.collection_payload))};(0,r.useEffect)(()=>{d()},[]);let x=async()=>{await z("DOCUMENTS",t)&&d()},u=async()=>{await z("ALL",t)&&d()},b=async()=>{await z("CONFIG",t)&&d()},m=async()=>{await z("SUGGESTIONS",t)&&d()},g=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Admin Panel"})}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"gap-4 flex flex-col p-4 text-text-verba",children:[(0,s.jsx)("p",{className:"font-bold text-lg",children:"Resetting Verba"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>g("reset-documents"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(l.emU,{size:16}),(0,s.jsx)("p",{children:"Clear Documents"})]}),(0,s.jsxs)("button",{onClick:()=>g("reset-configs"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(i.LDL,{size:16}),(0,s.jsx)("p",{children:"Clear Config"})]}),(0,s.jsxs)("button",{onClick:()=>g("reset-verba"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(l.VOs,{size:16}),(0,s.jsx)("p",{children:"Clear Everything"})]}),(0,s.jsxs)("button",{onClick:()=>g("reset-suggestions"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(l.VOs,{size:16}),(0,s.jsx)("p",{children:"Clear Suggestions"})]})]}),(0,s.jsxs)("button",{onClick:d,className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(l.A$d,{size:16}),(0,s.jsx)("p",{children:"Reload Metadata"})]})]}),(0,s.jsx)("p",{className:"font-bold text-lg",children:"Weaviate Information"}),(0,s.jsxs)("div",{className:"flex border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Connected to"}),(0,s.jsx)("p",{className:"font-mono text-text-verba",children:t.url})]}),(0,s.jsxs)("div",{className:"flex border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Deployment"}),(0,s.jsx)("p",{className:"font-mono text-text-verba",children:t.deployment})]}),(0,s.jsxs)("div",{className:"flex border-2 border-secondary-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Version"}),a?(0,s.jsx)("p",{className:"font-mono text-text-verba",children:a.weaviate_version}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Nodes"}),a?(0,s.jsx)("p",{className:"font-mono text-text-verba",children:a.node_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),a?(0,s.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:a.nodes.map(e=>(0,s.jsxs)("li",{className:"font-mono text-text-verba flex justify-between",children:[(0,s.jsx)("span",{className:"w-64 truncate",children:e.name}),(0,s.jsxs)("span",{children:["(",e.status," - ",e.shards," shards)"]})]},"Node"+e.name))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Collections"}),o?(0,s.jsx)("p",{className:"font-mono text-text-verba",children:o.collection_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),o?(0,s.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:o.collections.map(e=>(0,s.jsxs)("li",{className:"font-mono text-text-verba flex justify-between",children:[(0,s.jsx)("span",{className:"w-128 truncate",children:e.name}),(0,s.jsxs)("span",{children:[e.count," objects"]})]},"Collection"+e.name))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]})]})}),(0,s.jsx)(L,{modal_id:"reset-documents",title:"Reset Documents",text:"Are you sure you want to reset all documents? This will clear all documents and chunks from Verba.",triggerAccept:x,triggerString:"Reset"}),(0,s.jsx)(L,{modal_id:"reset-configs",title:"Reset Config",text:"Are you sure you want to reset the config?",triggerAccept:b,triggerString:"Reset"}),(0,s.jsx)(L,{modal_id:"reset-verba",title:"Reset Verba",text:"Are you sure you want to reset Verba? This will delete all collections related to Verba.",triggerAccept:u,triggerString:"Reset"}),(0,s.jsx)(L,{modal_id:"reset-suggestions",title:"Reset Suggestions",text:"Are you sure you want to reset all autocomplete suggestions?",triggerAccept:m,triggerString:"Reset"})]})},e5=e=>{let{selectedTheme:t,themes:a,setThemes:n,setSelectedTheme:o,credentials:c}=e,[d,x]=(0,r.useState)("INFO");return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"w-1/3 flex",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(P,{tooltip_text:"Customize Verba's Theme, reset collections, logout or report issues.",display_text:"Settings"})})}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:[(0,s.jsxs)("button",{onClick:()=>x("INFO"),className:"flex ".concat("INFO"===d?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none"),children:[(0,s.jsx)(e$.Xn2,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Admin"})]},"Info Button Setting"),(0,s.jsxs)("button",{onClick:()=>x("THEME"),className:"flex ".concat("THEME"===d?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none"),children:[(0,s.jsx)(i._TT,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Customize Theme"})]},"Theme Button Setting"),(0,s.jsxs)("button",{onClick:()=>x("SUGGESTIONS"),className:"flex ".concat("SUGGESTIONS"===d?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none"),children:[(0,s.jsx)(l.aTL,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Manage Suggestions"})]},"Suggestions Button Setting"),(0,s.jsxs)("button",{onClick:()=>x("CACHE"),className:"flex ".concat("CACHE"===d?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none"),children:[(0,s.jsx)(i.i1q,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Manage Cache"})]},"Cache Button Setting"),(0,s.jsxs)("button",{className:"flex bg-button-verba hover:bg-secondary-verba  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none",onClick:()=>window.location.reload(),children:[(0,s.jsx)(l.p$f,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Logout"})]},"Logout Button Setting"),(0,s.jsxs)("button",{className:"flex bg-button-verba hover:bg-secondary-verba  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none",onClick:()=>window.open("https://github.com/weaviate/Verba/issues/new/choose","_blank"),children:[(0,s.jsx)(eH.N3m,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Report Issue"})]},"Issue Button Setting")]})]})}),(0,s.jsx)("div",{className:"w-2/3 flex",children:(0,s.jsx)("div",{className:"flex flex-col gap-2 w-full",children:(0,s.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["THEME"===d&&(0,s.jsx)(e0,{themes:a,credentials:c,setThemes:n,setSelectedTheme:o,selectedTheme:t}),"INFO"===d&&(0,s.jsx)(e4,{credentials:c}),"SUGGESTIONS"===d&&(0,s.jsx)(e3,{credentials:c})]})})})]})},e8=e=>{let{}=e,t=(0,r.useRef)(null);return(0,r.useEffect)(()=>{t.current&&t.current.showModal()},[]),(0,s.jsx)("dialog",{id:"Getting-Started-Modal",className:"modal",ref:t,children:(0,s.jsxs)("div",{className:"modal-box w-11/12 max-w-5xl",children:[(0,s.jsx)("div",{className:"hero",children:(0,s.jsxs)("div",{className:"hero-content flex-row",children:[(0,s.jsxs)("div",{className:"text-center lg:text-left",children:[(0,s.jsx)("h1",{className:"text-5xl font-bold",children:"Welcome to Verba"}),(0,s.jsx)("h2",{className:"text-2xl mt-2",children:"Your Open Source RAG App"}),(0,s.jsx)("p",{className:"py-6",children:"Verba is an open-source application designed to offer an end-to-end, streamlined, and user-friendly interface for Retrieval-Augmented Generation (RAG) out of the box. In just a few easy steps, explore your datasets and extract insights with ease, either locally with HuggingFace and Ollama or through LLM providers such as Anthrophic, Cohere, and OpenAI."}),(0,s.jsx)("p",{className:"py-6",children:"Learn more by visiting our GitHub repository, our blog post, or our video on Verba. Verba is currently still in development. If you have any questions or find issues, please reach out to us on GitHub."}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsx)("button",{className:"btn border-none shadow-none bg-button-verba hover:bg-button-hover-verba text-text-alt-verba hover:text-text-verba",onClick:()=>window.open("https://github.com/weaviate/verba","_blank"),children:"GitHub"}),(0,s.jsx)("button",{className:"btn border-none shadow-none bg-button-verba hover:bg-button-hover-verba text-text-alt-verba hover:text-text-verba",onClick:()=>window.open("https://www.youtube.com/watch?v=swKKRdLBhas","_blank"),children:"YouTube"}),(0,s.jsx)("button",{className:"btn border-none shadow-none bg-button-verba hover:bg-button-hover-verba text-text-alt-verba hover:text-text-verba",onClick:()=>window.open("https://weaviate.io/blog/verba-open-source-rag-app","_blank"),children:"Blog Post"})]})]}),(0,s.jsx)("div",{className:"shrink-0",children:(0,s.jsx)("img",{src:"https://raw.githubusercontent.com/weaviate/Verba/main/img/thumbnail.png",alt:"Verba AI",width:400,className:"rounded-lg shadow-2xl"})})]})}),(0,s.jsx)("div",{className:"modal-action mt-6",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn text-text-alt-verba hover:text-text-verba bg-button-verba border-none hover:bg-primary-verba",children:"Lets get started ♥"})})})]})})};function e6(){var e;let[t,a]=(0,r.useState)("CHAT"),[l,o]=(0,r.useState)("Local"),[i,c]=(0,r.useState)(""),[d,x]=(0,r.useState)({Light:ed,Dark:ex,Weaviate:eb,WCD:eu}),[u,m]=(0,r.useState)(d.Weaviate),g=u.font.value,h=g&&(null===(e=eN[g])||void 0===e?void 0:e.className)||"",[f,p]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),[N,y]=(0,r.useState)(!1),[S,C]=(0,r.useState)({deployment:"Local",url:"",key:""}),[_,k]=(0,r.useState)(null),[E,D]=(0,r.useState)([]),R=(0,r.useCallback)(async()=>{try{let[e]=await Promise.all([v()]);e?(o(e.production),c(e.gtag),p(!0),C({deployment:"Local",url:e.deployments.WEAVIATE_URL_VERBA,key:e.deployments.WEAVIATE_API_KEY_VERBA})):(console.warn("Could not retrieve health data"),p(!1),w(!1))}catch(e){console.error("Error during initial fetch:",e),p(!1),w(!1)}},[]);(0,r.useEffect)(()=>{R()},[]),(0,r.useEffect)(()=>{if(j){let e=setTimeout(()=>{y(!0)},1e3);return()=>clearTimeout(e)}},[j]);let O=(0,r.useCallback)(()=>{Object.entries({"--primary-verba":u.primary_color.color,"--secondary-verba":u.secondary_color.color,"--warning-verba":u.warning_color.color,"--bg-verba":u.bg_color.color,"--bg-alt-verba":u.bg_alt_color.color,"--text-verba":u.text_color.color,"--text-alt-verba":u.text_alt_color.color,"--button-verba":u.button_color.color,"--button-hover-verba":u.button_hover_color.color}).forEach(e=>{let[t,a]=e;document.documentElement.style.setProperty(t,a)})},[u]);return(0,r.useEffect)(O,[u]),(0,s.jsxs)("main",{className:"min-h-screen bg-bg-verba text-text-verba ".concat(h),"data-theme":u.theme,children:[""!==i&&(0,s.jsx)(n.GoogleAnalytics,{gaId:i}),!j&&f&&(0,s.jsx)(eU,{production:l,setSelectedTheme:m,setThemes:x,credentials:S,setIsLoggedIn:w,setRAGConfig:k,setCredentials:C}),j&&f&&(0,s.jsxs)("div",{className:"transition-opacity duration-1000 ".concat(N?"opacity-100":"opacity-0"," flex flex-col gap-2 p-5"),children:[(0,s.jsx)(e8,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{production:l,title:u.title.text,subtitle:u.subtitle.text,imageSrc:u.image.src,version:"v2.0.0",currentPage:t,setCurrentPage:a}),(0,s.jsx)("div",{className:"".concat("CHAT"===t?"":"hidden"),children:(0,s.jsx)(eZ,{credentials:S,RAGConfig:_,setRAGConfig:k,production:l,selectedTheme:u,currentPage:t,documentFilter:E,setDocumentFilter:D})}),"DOCUMENTS"===t&&(0,s.jsx)(eo,{credentials:S,production:l,selectedTheme:u,documentFilter:E,setDocumentFilter:D}),(0,s.jsx)("div",{className:"".concat("ADD"===t&&"Demo"!=l?"":"hidden"),children:(0,s.jsx)(eA,{RAGConfig:_,setRAGConfig:k,credentials:S})}),(0,s.jsx)("div",{className:"".concat("SETTINGS"===t&&"Demo"!=l?"":"hidden"),children:(0,s.jsx)(e5,{credentials:S,selectedTheme:u,setSelectedTheme:m,themes:d,setThemes:x})})]}),(0,s.jsx)("footer",{className:"footer footer-center p-4 mt-8 bg-bg-verba text-text-alt-verba transition-all duration-1500 delay-1000 ".concat(j?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),children:(0,s.jsx)("aside",{children:(0,s.jsx)("p",{children:"Build with ♥ and Weaviate \xa9 2024"})})})]}),(0,s.jsx)("img",{referrerPolicy:"no-referrer-when-downgrade",src:"https://static.scarf.sh/a.png?x-pxid=ec666e70-aee5-4e87-bc62-0935afae63ac"})]})}}},function(e){e.O(0,[596,689,520,465,929,582,33,190,400,61,682,306,420,636,115,789,971,23,744],function(){return e(e.s=87094)}),_N_E=e.O()}]);