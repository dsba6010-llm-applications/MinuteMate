(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{87094:function(e,t,a){Promise.resolve().then(a.bind(a,79640))},79640:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eZ}});var s=a(57437),n=a(2265),r=a(9881),l=a(58177),o=a(8603),i=a(14063),c=a(97223),d=e=>{let{Icon:t,iconSize:a,title:n,currentPage:r,setPage:l,setCurrentPage:o,hide:i}=e;return(0,s.jsxs)("button",{className:"btn md:btn-sm lg:btn-md ".concat(i?"hidden":"flex"," flex-grow items-center justify-center border-none hover:bg-button-hover-verba ").concat(r===l?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{o(l)},children:[(0,s.jsx)(t,{size:a}),(0,s.jsx)("p",{className:"md:text-xs lg:text-sm sm:hidden md:flex",children:n})]},n)};async function x(){try{let e=await fetch("https://api.github.com/repos/weaviate/verba",{method:"GET"}),t=await e.json();if(t)return t.stargazers_count;return 0}catch(e){return console.error("Failed to perform search:",e),0}}let u=e=>e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString();var b=e=>{let{imageSrc:t,title:a,subtitle:r,version:b,currentPage:m,setCurrentPage:g,production:h}=e,[v,f]=(0,n.useState)("0");(0,n.useEffect)(()=>{(async()=>{try{let e=await x();if(e){let t=u(e);f(t)}}catch(e){console.error("Failed to fetch GitHub stars:",e)}})()},[]);let p=()=>{window.open("https://github.com/weaviate/verba","_blank","noopener,noreferrer")};return(0,s.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,s.jsx)("img",{src:t,width:80,height:80,className:"flex rounded-lg w-[80px] h-[80px] object-contain"}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,s.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:a}),(0,s.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:r})]})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,s.jsx)("div",{className:"hidden sm:h-[3vh] lg:h-[5vh] bg-text-alt-verba w-px sm:mx-2 md:mx-4"}),(0,s.jsxs)("div",{className:"lg:flex hidden lg:flex-row items-center lg:gap-3 justify-between",children:[(0,s.jsx)("div",{className:" ".concat(h?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,s.jsx)(d,{hide:!1,Icon:l.utr,iconSize:18,title:"Chat",currentPage:m,setCurrentPage:g,setPage:"CHAT"}),(0,s.jsx)(d,{hide:"Demo"==h,Icon:o.Lgw,iconSize:18,title:"Import Data",currentPage:m,setCurrentPage:g,setPage:"ADD"}),(0,s.jsx)(d,{hide:!1,Icon:l.emU,iconSize:18,title:"Documents",currentPage:m,setCurrentPage:g,setPage:"DOCUMENTS"}),(0,s.jsx)(d,{hide:"Demo"==h,Icon:l.zfW,iconSize:18,title:"Settings",currentPage:m,setCurrentPage:g,setPage:"SETTINGS"}),(0,s.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden sm:block bg-text-alt-verba w-px"}),(0,s.jsxs)("button",{className:"md:hidden btn md:btn-sm lg:btn-md lg:flex items-center justify-center border-none bg-secondary-verba hover:bg-button-hover-verba",onClick:p,children:[(0,s.jsx)(i.hJX,{size:18,className:"text-text-verba"}),(0,s.jsx)("p",{className:"text-xs sm:hidden md:flex text-text-verba ",children:v})]}),(0,s.jsx)("p",{className:"hidden lg:flex text-xs text-text-alt-verba",children:b})]}),(0,s.jsx)("div",{className:"flex flex-row items-center sm:gap-1 lg:gap-5 justify-between",children:(0,s.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,s.jsx)("ul",{className:"menu md:menu-md sm:menu-sm sm:menu-horizontal bg-base-200 rounded-box hover:bg-button-hover-verba bg-button-verba z-50",children:(0,s.jsx)("li",{children:(0,s.jsxs)("details",{children:[(0,s.jsx)("summary",{children:(0,s.jsx)(c.bqP,{size:20})}),(0,s.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,s.jsx)("li",{onClick:e=>{g("CHAT")},children:(0,s.jsx)("a",{children:"Chat"})}),(0,s.jsx)("li",{onClick:e=>{g("DOCUMENTS")},children:(0,s.jsx)("a",{children:"Documents"})}),!h&&(0,s.jsx)("li",{onClick:e=>{g("STATUS")},children:(0,s.jsx)("a",{children:"Status"})}),!h&&(0,s.jsx)("li",{onClick:e=>{g("ADD")},children:(0,s.jsx)("a",{children:"Add Documents"})}),!h&&(0,s.jsx)("li",{onClick:e=>{g("RAG")},children:(0,s.jsx)("a",{children:"RAG"})}),!h&&(0,s.jsx)("li",{onClick:e=>{g("SETTINGS")},children:(0,s.jsx)("a",{children:"Settings"})}),(0,s.jsx)("li",{onClick:p,children:(0,s.jsx)("a",{children:"GitHub"})}),(0,s.jsx)("li",{className:"items-center justify-center text-xs text-text-alt-verba mt-2",children:b})]})]})})})})})]})]})};let m=async e=>{try{return(await fetch(e)).ok}catch(t){return console.error("Failed to fetch from ".concat(e,":"),t),!1}},g=async()=>{if(await m("http://localhost:8000/api/health"))return"http://localhost:8000";if(await m("/api/health"))return window.location.origin;throw Error("Both health checks failed, please check the Verba Server")},h=async e=>{try{let t=await g(),a=await fetch("".concat(t).concat(e),{method:"GET"}),s=await a.json();return s||console.warn("Could not retrieve data from ".concat(e)),s}catch(t){return console.error("Failed to fetch data from ".concat(e,":"),t),null}},v=()=>h("/api/health"),f=async(e,t,a)=>{let s=await g(),n=await fetch("".concat(s,"/api/connect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:{deployment:e,url:t,key:a}})});return await n.json()},p=async e=>{try{let t=await g(),a=await fetch("".concat(t,"/api/get_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},j=async(e,t)=>{if(!e)return!1;try{let a=await g(),s=await fetch("".concat(a,"/api/set_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rag_config:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error setting config:",e),!1}},w=async(e,t,a)=>{try{let s=await g(),n=await fetch("".concat(s,"/api/set_theme_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themes:e,theme:t,credentials:a})});return 200===n.status}catch(e){return console.error("Error setting config:",e),!1}},y=async(e,t,a)=>{try{let s=await g(),n=await fetch("".concat(s,"/api/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,RAG:t,credentials:a})});return await n.json()}catch(e){return console.error("Error sending query",e),null}},N=async(e,t)=>{if(!e)return null;try{let a=await g(),s=await fetch("".concat(a,"/api/get_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return await s.json()}catch(e){return console.error("Error retrieving selected document",e),null}},S=async(e,t)=>{try{let a=await g(),s=await fetch("".concat(a,"/api/get_datacount"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embedding_model:e,credentials:t})});return await s.json()}catch(e){return console.error("Error retrieving content",e),null}},C=async(e,t,a,s)=>{if(!e)return null;try{let n=await g(),r=await fetch("".concat(n,"/api/get_content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,chunkScores:a,credentials:s})});return await r.json()}catch(e){return console.error("Error retrieving content",e),null}},_=async(e,t,a)=>{if(!e)return null;try{let s=await g(),n=await fetch("".concat(s,"/api/get_vectors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,showAll:t,credentials:a})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},k=async(e,t,a,s)=>{if(!e)return null;try{let n=await g(),r=await fetch("".concat(n,"/api/get_chunks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,pageSize:a,credentials:s})});return await r.json()}catch(e){return console.error("Error retrieving content",e),null}},E=async(e,t,a)=>{if(!e)return null;try{let s=await g(),n=await fetch("".concat(s,"/api/get_chunk"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,embedder:t,credentials:a})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},D=async(e,t,a,s,n)=>{try{let r=await g(),l=await fetch("".concat(r,"/api/get_all_documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,labels:t,page:a,pageSize:s,credentials:n})});return await l.json()}catch(e){return console.error("Error retrieving all documents",e),null}},R=async(e,t)=>{try{let a=await g(),s=await fetch("".concat(a,"/api/delete_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting document",e),!1}},O=async(e,t)=>{try{let a=await g(),s=await fetch("".concat(a,"/api/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting all documents",e),!1}},I=async e=>{try{let t=await g(),a=await fetch("".concat(t,"/api/get_meta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await a.json()}catch(e){return console.error("Error retrieving selected document",e),null}};var z=a(65125),T=e=>{let{tooltip_text:t,display_text:a}=e;return(0,s.jsxs)("div",{className:"items-center gap-2 flex",children:[(0,s.jsx)("div",{className:"tooltip tooltip-right text-xs","data-tip":t,children:(0,s.jsx)("button",{className:"btn btn-circle btn-sm border-none bg-bg-verba hover:bg-secondary-verba text-text-verba",children:(0,s.jsx)(i.LL$,{})})}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba truncate max-w-[350px]",title:a,children:a})]})},A=e=>{let{title:t,modal_id:a,text:n,triggerAccept:r,triggerString:l,triggerValue:o}=e;return(0,s.jsx)("dialog",{id:a,className:"modal",children:(0,s.jsxs)("div",{className:"modal-box flex flex-col gap-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:n}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsxs)("form",{method:"dialog",className:"flex gap-2",children:[r&&l&&(0,s.jsx)("button",{className:"btn text-text-alt-verba hover:text-text-verba bg-button-verba border-none hover:bg-primary-verba",onClick:()=>{r(o)},children:l}),(0,s.jsx)("button",{className:"btn text-text-alt-verba hover:text-text-verba bg-button-verba border-none hover:bg-warning-verba",children:"Cancel"})]})})]})})},F=e=>{let{selectedDocument:t,setSelectedDocument:a,production:r,credentials:l}=e,[o,c]=(0,n.useState)(""),[d,x]=(0,n.useState)(1),[u,b]=(0,n.useState)([]),[m,g]=(0,n.useState)([]),[h,v]=(0,n.useState)([]),[f,p]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),y=async e=>{try{w(!0);let t=await D(e||"",h,d,20,l);t&&(""!==t.error?(console.error(t.error),w(!1),b(null)):(b(t.documents),g(t.labels),w(!1)))}catch(e){console.error("Failed to fetch document:",e),w(!1)}};(0,n.useEffect)(()=>{p(!0)},[]),(0,n.useEffect)(()=>{y(o)},[d,f,h]);let N=()=>{y(o)},S=async e=>{"Demo"!=r&&await R(e,l)&&(e==t&&a(null),y(o))},C=async()=>{"Demo"!=r&&(a(null),b(null),await O("DOCUMENTS",l))},_=e=>{v(t=>[...t,e])},k=e=>{v(t=>t.filter(t=>t!==e))},E=e=>{h.includes(e)?k(e):_(e)},I=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start w-[8vw]",children:(0,s.jsx)(T,{tooltip_text:"Search and inspect different documents imported into Verba",display_text:"Search"})}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},placeholder:"Search for documents",value:o,onChange:e=>{c(e.target.value)}})}),(0,s.jsx)("button",{type:"button",onClick:N,className:"btn btn-square border-none bg-primary-verba text-text-verba hover:bg-button-hover-verba",children:(0,s.jsx)(i.U41,{size:15})}),(0,s.jsx)("button",{type:"button",onClick:()=>{c(""),v([]),y("")},className:"btn btn-square border-none bg-button-verba text-text-verba hover:bg-button-hover-verba",children:(0,s.jsx)(z.Ffb,{size:18})})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 gap-3 items-center h-full w-full overflow-auto",children:[(0,s.jsx)("div",{className:"grid grid-flow-col gap-2 justify-start items-start w-full",children:m&&m.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{E(e)},className:"flex p-2 px-4 text-sm text-text-verba justify-center text-center items-center rounded-xl ".concat(h.includes(e)?"bg-primary-verba hover:bg-button-hover-verba":"bg-bg-verba hover:bg-primary-verba"," transition-colors duration-300 ease-in-out border-none"),children:(0,s.jsx)("p",{children:e})},document.title+t+e))}),j&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}),(0,s.jsx)("p",{className:"text-text-alt-verba",children:"Loading Documents"})]}),(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[u&&u.map((e,n)=>(0,s.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:[(0,s.jsx)("button",{onClick:()=>a(e.uuid),className:"flex ".concat(t&&t===e.uuid?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg transition-colors duration-300 ease-in-out border-none"),children:(0,s.jsx)("p",{className:"text-text-verba",children:e.title})},e.title+n),(0,s.jsx)("div",{className:"flex justify-end items-center",children:(0,s.jsx)("button",{onClick:()=>{I("remove_document"+e.uuid)},disabled:"Demo"==r,className:"btn btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba",children:(0,s.jsx)(i.Xm5,{size:15})})}),(0,s.jsx)(A,{modal_id:"remove_document"+e.uuid,title:"Remove Document",text:"Do you want to remove "+e.title+"?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:S})]},"Document"+n+e.title))," "]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-center h-min w-full",children:(0,s.jsxs)("div",{className:"flex gap-3 items-center justify-between w-full",children:[(0,s.jsxs)("div",{className:"join justify-center items-center text-text-verba",children:[d>1&&(0,s.jsx)("button",{onClick:()=>{u&&(1==d?x(1):x(e=>e-1))},className:"join-item btn btn-sqare border-none bg-button-verba hover:bg-secondary-verba",children:"\xab"}),(0,s.jsxs)("button",{className:"join-item btn border-none bg-button-verba hover:bg-secondary-verba",children:["Page ",d]}),u&&u.length>=20&&(0,s.jsx)("button",{onClick:()=>{u&&(u.length<20?x(1):x(e=>e+1))},className:"join-item btn btn-square border-none bg-button-verba hover:bg-secondary-verba",children:"\xbb"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("remove_all_documents");e instanceof HTMLDialogElement&&e.showModal()},disabled:"Demo"==r,className:"flex bg-button-verba hover:bg-button-hover-verba border-none btn text-text-verba gap-2",children:[(0,s.jsx)(i.Xm5,{size:15}),(0,s.jsx)("p",{children:"Delete all Documents"})]})]})}),(0,s.jsx)(A,{modal_id:"remove_all_documents",title:"Remove all Document?",text:"Do you want to all remove documents from Verba?",triggerString:"Remove All",triggerValue:null,triggerAccept:C})]})},P=a(68842),M=a(33149),L=a(26547),W=a(20789),B=a(77954),G=a(97776),J=a(71375);let q=["green","blue","red","yellow","purple","cyan","orange","limegreen","pink","teal","violet","forestgreen","gold","navy","magenta","mediumspringgreen","darkorange","deepskyblue","crimson","lightseagreen","royalblue","chartreuse","mediumorchid","aqua","orangered","mediumaquamarine","plum","lime","dodgerblue","lightcoral","mediumslateblue","lightgreen","darkred","springgreen","lightpink","indigo","lightyellow","mediumvioletred","seagreen","fuchsia","darkseagreen","thistle","orange","powderblue","yellowgreen","cornflowerblue","darkmagenta","darkblue","gold","mediumblue","rosybrown","darkgreen","lightskyblue","mediumseagreen","firebrick","lavender","darkcyan","khaki","mediumturquoise","saddlebrown","lightblue","olive","mintcream","turquoise","rebeccapurple","lightgoldenrodyellow"];function V(e,t,a){return a===t?0:(e-t)/(a-t)}(0,P.e)({OrbitControls:L.z});let U=e=>{let{vector:t,color:a,setHoverTitle:r,documentTitle:l,multiplication:o,dynamicColor:i,chunk_id:c,chunk_uuid:d,setSelectedChunk:x,selectedChunk:u,minX:b,maxX:m,minY:g,maxY:h,minZ:v,maxZ:f,chunkScores:p}=e,j=(0,n.useRef)(null),w=(0,n.useRef)(!1),y=(0,n.useMemo)(()=>null==p?void 0:p.some(e=>e.uuid===d),[p,d]),N=(0,n.useMemo)(()=>y?new G.Color("yellow"):u===d?new G.Color("green"):i?function(e,t,a,s,n,r,l){let o=V(e.x,t,a),i=V(e.y,s,n),c=V(e.z,r,l);return new G.Color("rgb(".concat(Math.floor(255*o),",").concat(Math.floor(255*i),",").concat(Math.floor(255*c),")"))}(t,b,m,g,h,v,f):new G.Color(a),[y,u,d,i,a,t,b,m,g,h,v,f]),S=y?3:u===d?1.5:1,C=y?1:w.current?1:.5,_=(0,n.useCallback)(()=>{w.current=!0,r.current("".concat(l," | ").concat(c))},[l,c,r]),k=(0,n.useCallback)(()=>{w.current=!1,r.current(null)},[r]),E=(0,n.useCallback)(()=>{x(d)},[d,x]);return(0,P.C)(()=>{if(j.current){j.current.position.lerp(new G.Vector3(t.x*o,t.y*o,t.z*o),.02);let e=j.current.material;e.color.set(w.current?"blue":N),e.opacity=w.current?1:C,e.transparent=!w.current}}),(0,s.jsx)(W.b,{rotationIntensity:.2,children:(0,s.jsxs)("mesh",{ref:j,position:[0,0,0],onPointerEnter:_,onPointerLeave:k,onClick:E,children:[(0,s.jsx)("sphereGeometry",{args:[S,32,32]}),(0,s.jsx)("meshBasicMaterial",{color:N,opacity:C,transparent:!0})]})})};var H=e=>{let{credentials:t,selectedDocument:a,chunkScores:r}=e;(0,n.useRef)([]);let[l,o]=(0,n.useState)(!1),[i,c]=(0,n.useState)([]),[d,x]=(0,n.useState)(""),[u,b]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!0),[h,v]=(0,n.useState)(null),f=(0,n.useRef)(e=>v(e)),[p,j]=(0,n.useState)(200),[w,y]=(0,n.useState)(0),[N,S]=(0,n.useState)(null),[C,k]=(0,n.useState)(null),[D,R]=(0,n.useState)(-1),[O,I]=(0,n.useState)(1),[T,A]=(0,n.useState)(-1),[F,P]=(0,n.useState)(1),[W,G]=(0,n.useState)(-1),[V,H]=(0,n.useState)(1);function Y(e){return{min:Math.min(...e),max:Math.max(...e)}}(0,n.useEffect)(()=>{a?K():c([])},[u,a]),(0,n.useEffect)(()=>{N?X():k(null)},[N]);let X=async()=>{try{let e=await E(N,d,t);e&&(""!==e.error?(console.error(e.error),k(null)):k(e.chunk))}catch(e){console.error("Failed to fetch document:",e),o(!1)}},K=async()=>{try{o(!0);let e=await _(a,u,t);if(e){if(""!==e.error)console.error(e.error),o(!1),c([]),y(0),x("None");else if(c(e.vector_groups.groups),x(e.vector_groups.embedder),y(e.vector_groups.dimensions),o(!1),!u){let t=e.vector_groups.groups[0].chunks.map(e=>e.vector.x),a=e.vector_groups.groups[0].chunks.map(e=>e.vector.y),s=e.vector_groups.groups[0].chunks.map(e=>e.vector.z),{min:n,max:r}=Y(t);R(n),I(r);let{min:l,max:o}=Y(a);A(l),P(o);let{min:i,max:c}=Y(s);G(i),H(c)}}}catch(e){console.error("Failed to fetch document:",e),o(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 h-full w-full",children:[(0,s.jsx)("div",{className:"flex justify-end w-full gap-2 items-center",children:(0,s.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[l&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2 h-full",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,s.jsx)("p",{className:"text-text-alt-verba text-sm font-bold",children:"Embedding Model:"}),(0,s.jsx)("p",{className:"text-text-alt-verba text-sm",children:d})]}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-sm font-bold",children:"Hover:"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba",children:h})]}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-sm font-bold",children:"Vectors:"}),(0,s.jsxs)("p",{className:"text-sm text-text-alt-verba",children:[i.length," x ",(()=>{let e=0;for(let t of i)e+=t.chunks.length;return e})()," x ",w]})]})]}),(0,s.jsxs)("div",{className:"flex gap-10 items-center justify-between min-w-[20vw]",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Show All Documents"}),(0,s.jsx)("input",{type:"checkbox",className:"toggle",checked:u,onChange:e=>{b(e.target.checked)}})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Dynamic Coloring"}),(0,s.jsx)("input",{type:"checkbox",className:"toggle",checked:m,onChange:e=>{g(e.target.checked)}})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex w-full justify-start items-center",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:!0,className:"btn btn-sm bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(J.WMq,{size:15}),(0,s.jsx)("p",{children:"PCA"})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-sm",children:"Zoom"}),(0,s.jsx)("input",{onChange:e=>{j(Number(e.target.value))},type:"range",min:0,max:"1000",value:p,className:"range range-xs grow w-full"})]})]}),C&&(0,s.jsx)("button",{onClick:()=>{k(null),S(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,s.jsx)(z.B4e,{size:15})})]})]})}),(0,s.jsxs)("div",{className:"flex gap-5 h-[45vh] w-full",children:[(0,s.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(N?"w-2/3":"w-full"," h-full"),children:(0,s.jsxs)(M.Xz,{children:[(0,s.jsx)("ambientLight",{intensity:1}),(0,s.jsx)(L.z,{}),(0,s.jsx)(B.c,{makeDefault:!0,position:[0,0,150]}),(0,s.jsx)("axesHelper",{args:[50]}),i.map((e,t)=>e.chunks.map((a,n)=>(0,s.jsx)(U,{dynamicColor:m,multiplication:p,vector:a.vector,color:function(e){if(!(e>=q.length))return q[e];{let e=Math.floor(Math.random()*q.length);return q[e]}}(t),setHoverTitle:f,documentTitle:e.name,chunk_id:a.chunk_id,setSelectedChunk:S,selectedChunk:N,chunk_uuid:a.uuid,minX:D,minY:T,minZ:W,maxX:O,maxY:F,maxZ:V,chunkScores:r},"Sphere_"+n+e.name)))]})}),(0,s.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(N?"w-1/3 opacity-100":"w-0 opacity-0"," overflow-auto"),children:C&&(0,s.jsxs)("div",{className:"flex flex-col p-3 gap-2 w-full",children:[(0,s.jsxs)("p",{className:"text-text-alt-verba fond-bold",children:["Chunk ",C.chunk_id]}),(0,s.jsx)("p",{className:"text-text-alt-verba text-sm",children:C.content})]})})]})]})},Y=a(13921),X=a(7395),K=a(38666),Z=e=>{let{selectedDocument:t,credentials:a,selectedTheme:r}=e,[o,c]=(0,n.useState)(!1),[d,x]=(0,n.useState)([]),[u,b]=(0,n.useState)(1),[m,g]=(0,n.useState)(0),[h,v]=(0,n.useState)(!0);(0,n.useEffect)(()=>{j(u),v(1===u&&0===m)},[u,m]),(0,n.useEffect)(()=>{j(1),g(0),v(1===u&&0===m)},[t]);let f=async()=>{m===d.length-1?(await j(u+1)?b(e=>e+1):(await j(1),b(1)),g(0)):g(e=>e+1)},p=async()=>{if(0===m){if(u>1){let e=u-1;await j(e)&&(b(e),g(9))}else{let e=u,t=!0;for(;t;)(t=await j(e+1))&&e++;await j(e),b(e),g(d.length-1)}}else g(e=>e-1)},j=async e=>{try{c(!0);let s=await k(t,e,10,a);if(s){if(""===s.error)return x(s.chunks),c(!1),s.chunks.length>0;console.error(s.error),c(!1),x([])}return!1}catch(e){return console.error("Failed to fetch document:",e),c(!1),!1}};return 0==d.length?(0,s.jsx)("div",{children:o&&(0,s.jsxs)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2 h-full",children:[(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}),(0,s.jsx)("p",{children:"Loading Chunks"})]})}):(0,s.jsx)("div",{className:"flex flex-col h-full",children:d.length>0&&(0,s.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsxs)("div",{className:"flex-grow overflow-hidden p-3",children:[(0,s.jsx)("div",{className:"flex justify-between mb-2",children:(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,s.jsx)(l.$Kz,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",d[m].chunk_id]})]})})}),(0,s.jsx)("div",{className:"overflow-y-auto h-[calc(100%-3rem)]",children:(0,s.jsx)(Y.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:a,className:n,children:l,...o}=e,i=/language-(\w+)/.exec(n||"");return!a&&i?(0,s.jsx)(X.Z,{style:"dark"===r.theme?K.vk:K.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,s.jsx)("code",{className:n,...o,children:l})}},children:d[m].content})})]}),d.length>1&&(0,s.jsxs)("div",{className:"flex justify-center gap-2 p-3 bg-bg-alt-verba",children:[(0,s.jsxs)("button",{onClick:p,className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit ".concat(h?"cursor-not-allowed opacity-50":""),disabled:h,children:[(0,s.jsx)(i.O18,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"Previous Chunk"})]}),(0,s.jsxs)("button",{onClick:f,className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,s.jsx)(i.Rdr,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"Next Chunk"})]})]})]})})},$=a(25847),Q=a(21794),ee=e=>{let{document:t,selectedDocument:a,selectedTheme:r,credentials:o,chunkScores:c}=e,[d,x]=(0,n.useState)(!0),[u,b]=(0,n.useState)(1),[m,g]=(0,n.useState)(1),[h,v]=(0,n.useState)([]),f=(0,n.useRef)(null);(0,n.useEffect)(()=>{t?p():v([]),b(1),g(1)},[t,c]),(0,n.useEffect)(()=>{t?p():(v([]),b(1),g(1))},[u]),(0,n.useEffect)(()=>{if(c&&c.length>0){var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}},[h,c]);let p=async()=>{try{x(!0);let e=await C(a,u,c||[],o);e&&(""!==e.error?(v([{content:e.error,chunk_id:0,score:0,type:"text"}]),b(1),g(1)):(v(e.content),g(e.maxPage)),x(!1))}catch(e){console.error("Failed to fetch content from document:",e),x(!1)}},j=(e,t)=>"text"===e.type?(0,s.jsx)("div",{className:"flex p-2",ref:c?null:f,children:(0,s.jsx)(Y.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:a,className:n,children:l,...o}=e,i=/language-(\w+)/.exec(n||"");return!a&&i?(0,s.jsx)(X.Z,{style:"dark"===r.theme?K.vk:K.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,s.jsx)("code",{className:n,...o,children:l})}},children:e.content})},"CONTENT_SNIPPET"+t):(0,s.jsxs)("div",{className:"flex p-2 border-2 flex-col gap-2 border-secondary-verba shadow-lg rounded-3xl",ref:f,children:[(0,s.jsx)("div",{className:"flex justify-between",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,s.jsx)(Q.dvR,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"Context Used"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,s.jsx)(l.$Kz,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",e.chunk_id+1]})]}),e.score>0&&(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-primary-verba rounded-full w-fit",children:[(0,s.jsx)(Q.dvR,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"High Relevancy"})]})]})}),(0,s.jsx)(Y.D,{className:"w-full items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:a,className:n,children:l,...o}=e,i=/language-(\w+)/.exec(n||"");return!a&&i?(0,s.jsx)(X.Z,{style:"dark"===r.theme?K.vk:K.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,s.jsx)("code",{className:n,...o,children:l})}},children:e.content})]});return t?(0,s.jsx)("div",{className:"flex flex-col h-full",children:t&&(0,s.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsx)("div",{className:"p-3 bg-bg-alt-verba",children:(0,s.jsxs)("div",{className:"flex gap-4 w-full justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[d&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,s.jsx)("p",{className:"text-lg font-bold truncate max-w-[350px]",title:t.title,children:t.title})]}),(0,s.jsx)("div",{className:"gap-2 grid grid-cols-3",children:Object.entries(t.labels).map(e=>{let[a,n]=e;return(0,s.jsx)("div",{className:"flex bg-bg-verba min-w-[8vw] p-2 text-sm text-text-verba justify-center text-center items-center rounded-xl",children:(0,s.jsx)("p",{children:n})},t.title+a+n)})})]})}),(0,s.jsx)("div",{className:"flex-grow overflow-hidden p-3",children:(0,s.jsx)("div",{className:"overflow-y-auto h-full",children:h&&h.map((e,t)=>j(e,t))})}),(0,s.jsxs)("div",{className:"flex justify-center gap-2 p-3 bg-bg-alt-verba",children:[(0,s.jsxs)("button",{onClick:()=>{1==u?b(m):b(e=>e-1)},className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,s.jsx)(i.O18,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Previous ",c?"Chunk":"Page"]})]}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("p",{className:"text-xs text-text-verba",children:[c?"Chunk ":"Page "," ",u]})}),(0,s.jsxs)("button",{onClick:()=>{u==m?b(1):b(e=>e+1)},className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,s.jsx)(i.Rdr,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Next ",c?"Chunk":"Page"]})]})]})]})}):(0,s.jsx)("div",{})},et=e=>{let{credentials:t,selectedDocument:a,setSelectedDocument:r,chunkScores:l,selectedTheme:o}=e,[c,d]=(0,n.useState)("Content"),[x,u]=(0,n.useState)(!1),[b,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{a?h():m(null)},[a]);let g=e=>{window.open(e,"_blank","noopener,noreferrer")},h=async()=>{try{u(!0);let e=await N(a,t);e&&(""!==e.error?(console.error(e.error),u(!1),m(null),r(null)):(m(e.document),u(!1)))}catch(e){console.error("Failed to fetch document:",e),u(!1)}};return a?(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(T,{tooltip_text:"Inspect your all information about your document, such as chunks, metadata and more.",display_text:b?b.title:"Loading..."})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("button",{onClick:()=>{d("Content")},className:"flex ".concat("Content"===c?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(z.Vqr,{size:15}),(0,s.jsx)("p",{children:"Content"})]}),(0,s.jsxs)("button",{onClick:()=>{d("Chunks")},className:"flex ".concat("Chunks"===c?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(z.Fqs,{size:15}),(0,s.jsx)("p",{children:"Chunks"})]}),(0,s.jsxs)("button",{onClick:()=>{d("Vector Space")},className:"flex ".concat("Vector Space"===c?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)($.FUn,{size:15}),(0,s.jsx)("p",{children:"Vector"})]}),(0,s.jsx)("button",{onClick:()=>{r(null)},className:"flex btn btn-square border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba gap-2",children:(0,s.jsx)(z.B4e,{size:15})})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["Content"===c&&(0,s.jsx)(ee,{selectedTheme:o,document:b,credentials:t,selectedDocument:a,chunkScores:l}),"Chunks"===c&&(0,s.jsx)(Z,{selectedTheme:o,credentials:t,selectedDocument:a}),"Vector Space"===c&&(0,s.jsx)(H,{credentials:t,selectedDocument:a,chunkScores:l})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[a&&b&&b.source&&(0,s.jsxs)("button",{onClick:()=>{g(b.source)},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(i.DAO,{size:15}),(0,s.jsx)("p",{children:"View Source"})]}),(0,s.jsxs)("button",{onClick:()=>{d("Metadata")},className:"flex ".concat("Metadata"===c?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(i.DAO,{size:15}),(0,s.jsx)("p",{children:"View Metadata"})]})]})})]}):(0,s.jsx)("div",{})},ea=e=>{let{selectedTheme:t,production:a,credentials:r}=e,[l,o]=(0,n.useState)(null);return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(l?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,s.jsx)(F,{production:a,setSelectedDocument:o,credentials:r,selectedDocument:l})}),(0,s.jsx)("div",{className:"".concat(l?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:(0,s.jsx)(et,{credentials:r,setSelectedDocument:o,selectedTheme:t,selectedDocument:l})})]})};let es={DONE:"bg-secondary-verba",ERROR:"bg-warning-verba",READY:"bg-button-verba",STARTING:"bg-button-verba",CHUNKING:"bg-button-verba",LOADING:"bg-button-verba",EMBEDDING:"bg-button-verba",INGESTING:"bg-button-verba",NER:"bg-button-verba",EXTRACTION:"bg-button-verba",SUMMARIZING:"bg-button-verba",WAITING:"bg-button-verba"},en={DONE:"Finished",ERROR:"Failed",READY:"Ready",STARTING:"Importing...",CHUNKING:"Chunking...",LOADING:"Loading...",EMBEDDING:"Embedding...",INGESTING:"Weaviating...",NER:"Extracting NER...",EXTRACTION:"Extraction REL...",SUMMARIZING:"Summarizing...",WAITING:"Uploading..."},er={theme_name:"Light",title:{text:"Verba",type:"text",description:"Title"},subtitle:{text:"The Golden RAGtriever",type:"text",description:"Subtitle"},intro_message:{text:"Welcome to Verba, your open-source RAG application!",type:"text",description:"First Message"},image:{src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true",type:"image",description:"Logo"},primary_color:{color:"#FDFF91",type:"color",description:"Primary"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary"},warning_color:{color:"#FF8399",type:"color",description:"Warning"},bg_color:{color:"#FEF7F7",type:"color",description:"Background"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alt. Background"},text_color:{color:"#161616",type:"color",description:"Text"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alt. Text"},button_color:{color:"#EFEFEF",type:"color",description:"Button"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover"},font:{value:"Plus_Jakarta_Sans",type:"select",options:["Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],description:"Text Font"},theme:"light"},el={...er,theme_name:"Dark",title:{...er.title,text:"Verba"},subtitle:{...er.subtitle,text:"The Dark RAGtriever"},intro_message:{...er.intro_message,text:"Welcome to the dark mode version of Verba! Spooky, right?"},image:{...er.image,src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true"},primary_color:{...er.primary_color,color:"#BB86FC"},secondary_color:{...er.secondary_color,color:"#008F82"},warning_color:{...er.warning_color,color:"#FF8399"},bg_color:{...er.bg_color,color:"#202020"},bg_alt_color:{...er.bg_alt_color,color:"#2F2929"},text_color:{...er.text_color,color:"#ffffff"},text_alt_color:{...er.text_alt_color,color:"#999999"},button_color:{...er.button_color,color:"#3C3C3C"},button_hover_color:{...er.button_hover_color,color:"#2C2C2C"},font:{...er.font,value:"Open_Sans"},theme:"dark"},eo={...er,theme_name:"WCD",title:{...er.title,text:"Verba"},subtitle:{...er.subtitle,text:"Chatbot for Weaviate"},intro_message:{...er.intro_message,text:"Welcome to Weaviate, your AI-Native vector database. How can I help you?"},image:{...er.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...er.primary_color,color:"#BF40C5"},secondary_color:{...er.secondary_color,color:"#28395B"},warning_color:{...er.warning_color,color:"#EA3A31"},bg_color:{...er.bg_color,color:"#0C1428"},bg_alt_color:{...er.bg_alt_color,color:"#192136"},text_color:{...er.text_color,color:"#ffffff"},text_alt_color:{...er.text_alt_color,color:"#AAAAAA"},button_color:{...er.button_color,color:"#1D253A"},button_hover_color:{...er.button_hover_color,color:"#313749"},font:{...er.font,value:"Open_Sans"},theme:"dark"},ei={...er,theme_name:"Weaviate",title:{...er.title,text:"Weaviate Verba"},subtitle:{...er.subtitle,text:"Chatbot for Weaviate"},intro_message:{...er.intro_message,text:"Welcome to Weaviate, your AI-Native vector database. How can I help you with Weaviate today?"},image:{...er.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...er.primary_color,color:"#6BDF4A"},secondary_color:{...er.secondary_color,color:"#7AD6EB"},warning_color:{...er.warning_color,color:"#F4404E"},bg_color:{...er.bg_color,color:"#EDEDED"},bg_alt_color:{...er.bg_alt_color,color:"#ffffff"},text_color:{...er.text_color,color:"#130C49"},text_alt_color:{...er.text_alt_color,color:"#8196A6"},button_color:{...er.button_color,color:"#E6E3E3"},button_hover_color:{...er.button_hover_color,color:"#FFFFFF"},font:{...er.font,value:"Inter"},theme:"light"};var ec=a(50670),ed=a.n(ec),ex=a(72810),eu=a.n(ex),eb=a(5117),em=a.n(eb),eg=a(58146),eh=a.n(eg);let ev={Inter:ed(),Plus_Jakarta_Sans:eu(),Open_Sans:em(),PT_Mono:eh()},ef=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")},ep=()=>{let e=document.activeElement;e&&e instanceof HTMLElement&&e.blur()},ej=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/import_files")};var ew=e=>{var t,a,r;let{fileData:l,fileMap:o,setFileMap:c,handleDeleteFile:d,selectedFileData:x,setSelectedFileData:u}=e,[b,m]=(0,n.useState)("New Link"),[g,h]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{x&&o[x].isURL&&m(o[x].content?o[x].content:"")},[o,x]),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:["READY"!=o[l.fileID].status?(0,s.jsxs)("button",{className:"min-w-[11vw] flex gap-2 items-center justify-center text-text-verba ".concat(es[o[l.fileID].status]," hover:bg-button-hover-verba rounded-lg p-3"),children:["DONE"!=o[l.fileID].status&&"ERROR"!=o[l.fileID].status?(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}):"","DONE"===o[l.fileID].status&&(0,s.jsx)(i.FJM,{size:15}),"ERROR"===o[l.fileID].status&&(0,s.jsx)(z.vVM,{size:15}),(0,s.jsx)("p",{className:"text-sm",children:en[o[l.fileID].status]})]}):(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center min-w-[11vw] tooltip tooltip-right","data-tip":o[l.fileID].rag_config.Reader.components[o[l.fileID].rag_config.Reader.selected].description,children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(J.WMq,{size:15}),(0,s.jsx)("p",{children:o[l.fileID].rag_config.Reader.selected})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:(t=o[l.fileID].rag_config,a=e=>{let t=JSON.parse(JSON.stringify(o[l.fileID])),a=JSON.parse(JSON.stringify(o[l.fileID].rag_config));a.Reader.selected=e,t.rag_config=a;let s={...o};s[l.fileID]=t,c(s),x&&x===o[l.fileID].filename&&u(l.fileID)},r=o[l.fileID].isURL?"URL":"FILE",Object.entries(t.Reader.components).filter(e=>{let[t,a]=e;return a.type===r}).map(e=>{let[t,n]=e;return(0,s.jsx)("li",{onClick:()=>{a(n.name),ep()},children:(0,s.jsx)("a",{children:n.name})},"Dropdown_"+n.name)}))})]}),(0,s.jsx)("button",{onClick:()=>{u(l.fileID)},className:"flex ".concat(x&&x===o[l.fileID].fileID?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba"," w-full p-3 rounded-lg transition-colors duration-300 ease-in-out border-none overflow-hidden"),children:(0,s.jsx)("p",{className:"text-text-verba truncate",children:o[l.fileID].filename})}),(0,s.jsx)("div",{className:"flex justify-end items-center",children:(0,s.jsx)("button",{onClick:()=>{let e=document.getElementById("remove_file_"+o[l.fileID].filename);e instanceof HTMLDialogElement&&e.showModal()},className:"btn btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba",children:(0,s.jsx)(i.Xm5,{size:15})})}),(0,s.jsx)(A,{modal_id:"remove_file_"+o[l.fileID].filename,title:"Remove File",text:o[l.fileID].isURL?"Do you want to remove the URL?":"Do you want to remove "+o[l.fileID].filename+" from the selection?",triggerString:"Delete",triggerValue:o[l.fileID].fileID,triggerAccept:d})]})},ey=e=>{let{fileMap:t,setFileMap:a,RAGConfig:r,setRAGConfig:l,selectedFileData:c,setSelectedFileData:d,importSelected:x,socketStatus:u,reconnect:b,importAll:m}=e,g=n.useRef(null);(0,n.useEffect)(()=>{null!==g.current&&(g.current.setAttribute("directory",""),g.current.setAttribute("webkitdirectory",""))},[g]);let h=e=>{a(t=>{if(null===e)return d(null),{};{e===c&&d(null);let a={...t};return delete a[e],a}})},[v,f]=(0,n.useState)(null),[p,j]=(0,n.useState)(null),w=async(e,s)=>{if(e.target.files&&r){let n=e.target.files,l={...t},o=s?p:v;for(let e=0;e<n.length;e++){let t=n[e],a=JSON.parse(JSON.stringify(r));o&&(a.Reader.selected=o);let s=t.name,i=t.name;if(i in l){let e=Date.now();i="".concat(i,"_").concat(e)}let c=t.name.split(".").pop()||"",d=await function(e){return new Promise((t,a)=>{let s=new FileReader;s.onload=()=>{t(function(e){let t="",a=new Uint8Array(e),s=a.byteLength;for(let e=0;e<s;e++)t+=String.fromCharCode(a[e]);return btoa(t)}(s.result))},s.onerror=()=>a(s.error),s.readAsArrayBuffer(e)})}(t);l[i]={fileID:i,filename:s,extension:c,status_report:{},source:"",isURL:!1,overwrite:!1,content:d,labels:["Document"],rag_config:a,file_size:N(d),status:"READY"}}a(l),d(Object.keys(l)[0]),e.target.value=""}},y=e=>{if(r){let s={...t},n=JSON.parse(JSON.stringify(r));n.Reader.selected=e;let l=new Date().toISOString();s[l]={fileID:l,filename:"New "+e+" URL",status_report:{},extension:"URL",isURL:!0,source:"",overwrite:!1,content:"",labels:["Document"],rag_config:n,file_size:0,status:"READY"},a(s),d(l)}},N=e=>{let t=e.replace(/\s+/g,"");if(t.length%2!=0)throw Error("Invalid hex string length.");return t.length/2};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(T,{tooltip_text:"Upload your data through this interface into Verba. You can select individual files, directories or add URL to fetch data from.",display_text:"File Selection"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,s.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(o.Lgw,{size:15}),(0,s.jsx)("p",{children:"Add Files"}),(0,s.jsx)(o.yQg,{size:15})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:r&&Object.entries(r.Reader.components).filter(e=>{let[t,a]=e;return"URL"!==a.type}).map(e=>{let[t,a]=e;return(0,s.jsx)("li",{onClick:()=>{var e;f(a.name),null===(e=document.getElementById("files_upload"))||void 0===e||e.click(),ep()},children:(0,s.jsx)("a",{children:a.name})},"File_"+a.name+t)})})]}),(0,s.jsx)("input",{id:"files_upload",type:"file",onChange:e=>w(e,!1),className:"hidden",multiple:!0}),(0,s.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,s.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(J.Lec,{size:15}),(0,s.jsx)("p",{children:"Add Directory"}),(0,s.jsx)(o.yQg,{size:15})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:r&&Object.entries(r.Reader.components).filter(e=>{let[t,a]=e;return"URL"!==a.type}).map(e=>{let[t,a]=e;return(0,s.jsx)("li",{onClick:()=>{var e;j(a.name),null===(e=document.getElementById("dir_upload"))||void 0===e||e.click(),ep()},children:(0,s.jsx)("a",{children:a.name})},"Dir_"+a.name+t)})})]}),(0,s.jsx)("input",{id:"dir_upload",type:"file",ref:g,onChange:e=>w(e,!0),className:"hidden",multiple:!0}),(0,s.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,s.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(o.Lgw,{size:15}),(0,s.jsx)("p",{children:"Add URL"}),(0,s.jsx)(o.yQg,{size:15})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:r&&Object.entries(r.Reader.components).filter(e=>{let[t,a]=e;return"URL"===a.type}).map(e=>{let[t,a]=e;return(0,s.jsx)("li",{onClick:()=>{y(a.name),ep()},children:(0,s.jsx)("a",{children:a.name})},"URL_"+a.name+t)})})]})]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:Object.entries(t).map(e=>{let[n,r]=e;return(0,s.jsx)(ew,{fileData:r,handleDeleteFile:h,selectedFileData:c,setSelectedFileData:d,fileMap:t,setFileMap:a},"FileComponent_"+n)})}),"ONLINE"===u?(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[c&&(0,s.jsxs)("button",{onClick:x,className:"flex btn border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(i.Xur,{size:15}),(0,s.jsx)("p",{children:"Import Selected"})]}),(0,s.jsxs)("button",{onClick:m,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(i.Xur,{size:15}),(0,s.jsx)("p",{children:"Import All"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("remove_all_files");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,s.jsx)(z.B4e,{size:15}),(0,s.jsx)("p",{children:"Clear Files"})]})]})}):(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,s.jsx)("div",{className:"flex gap-3 justify-end",children:(0,s.jsxs)("button",{onClick:b,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)($.Nwf,{size:15}),(0,s.jsx)("p",{children:"Reconnect to Verba"})]})})}),(0,s.jsx)(A,{modal_id:"remove_all_files",title:"Clear all files?",text:"Do you want to clear all files from your selection?",triggerString:"Clear All",triggerValue:null,triggerAccept:h})]})},eN=a(67447),eS=a(88033),eC=e=>{var t;let{selectedFileData:a,fileMap:r,setFileMap:o,blocked:c}=e,[d,x]=(0,n.useState)(""),[u,b]=(0,n.useState)(""),[m,g]=(0,n.useState)("");(0,n.useEffect)(()=>{a&&(x(r[a].filename),b(r[a].source))},[r,a]);let h=(0,n.useCallback)((e,t)=>{if(a){let s=JSON.parse(JSON.stringify(r[a]));s[e]=t;let n={...r};n[a]=s,o(n)}},[a,r,o]),v=(0,n.useCallback)(e=>{let t=e.target.value;x(t),h("filename",t)},[h]),f=(0,n.useCallback)(e=>{let t=e.target.value;b(t),h("source",t)},[h]),p=e=>{if(a){let t=JSON.parse(JSON.stringify(r[a]));t.overwrite=e;let s={...r};s[a]=t,o(s)}},j=e=>{if(a&&!r[a].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(r[a]));t.labels.push(e);let s={...r};s[a]=t,o(s),g("")}},w=e=>{if(a&&r[a].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(r[a]));t.labels=t.labels.filter(t=>t!==e);let s={...r};s[a]=t,o(s),g("")}};return a?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[a&&"READY"!=r[a].status&&(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"Import Status"}),(0,s.jsx)("div",{className:"flex flex-col gap-3 text-text-verba",children:a&&Object.entries(r[a].status_report).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("p",{className:"flex min-w-[8vw] gap-2 items-center text-text-verba",children:["DONE"===a.status&&(0,s.jsx)(i.FJM,{size:15}),"ERROR"===a.status&&(0,s.jsx)(z.vVM,{size:15}),en[a.status]]}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full ".concat(es[a.status]," bg-bg-verba"),children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:0!=a.took?a.message+" ("+a.took+"s)":a.message,disabled:!0})})]},"Status"+t)})}),(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:"File Settings"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Title"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:d,onChange:v,disabled:c})})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Source Link"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:u,onChange:f,disabled:c})})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Labels"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:m,onChange:e=>{g(e.target.value)},disabled:c,title:m})}),(0,s.jsx)("button",{onClick:()=>{j(m)},disabled:c,className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:(0,s.jsx)(l.Kth,{size:15})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add or remove labels for Document Filtering"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.entries((t=r[a]).labels).map(e=>{let[a,n]=e;return(0,s.jsxs)("div",{className:"flex bg-bg-verba min-w-[10vw] p-2 text-sm text-text-verba justify-between items-center rounded-xl",children:[(0,s.jsx)("p",{className:"truncate max-w-[80%]",title:n,children:n}),(0,s.jsx)("button",{onClick:()=>{w(n)},disabled:c,className:"btn btn-sm btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba ml-2",children:(0,s.jsx)(i.Xm5,{size:12})})]},t.fileID+a+n)})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Overwrite"}),(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>p(e.target.checked),checked:!!a&&r[a].overwrite,disabled:c})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"File Info"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Extension"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:r[a].extension,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"File Size"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["B","KB","MB","GB","TB"][t])})(r[a].file_size),disabled:!0})})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"Ingestion Pipeline"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Reader"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:r[a].rag_config.Reader.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:a&&r[a].rag_config.Reader.components[r[a].rag_config.Reader.selected].description})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Chunker"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:r[a].rag_config.Chunker.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:a&&r[a].rag_config.Chunker.components[r[a].rag_config.Chunker.selected].description})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Embedder"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:r[a].rag_config.Embedder.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:a&&r[a].rag_config.Embedder.components[r[a].rag_config.Embedder.selected].description})]}),(0,s.jsx)("div",{className:"divider"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Debug"}),(0,s.jsx)("button",{onClick:()=>{let e=document.getElementById("File_Debug_Modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:(0,s.jsx)(eS.ZWp,{size:15})})]}),(0,s.jsx)("dialog",{id:"File_Debug_Modal",className:"modal",children:(0,s.jsxs)("div",{className:"modal-box min-w-fit",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Debugging File Configuration"}),(0,s.jsx)("pre",{className:"whitespace-pre-wrap",children:a?(()=>{let e={...r[a]};return e.content="File Content",JSON.stringify(e,null,2)})():""}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn text-text-verba bg-warning-verba border-none hover:bg-button-hover-verba ml-2",children:"Close"})})})]})})]}):(0,s.jsx)("div",{})};let e_=e=>{let{values:t,config_title:a,updateConfig:r,component_name:o,blocked:c}=e,[d,x]=(0,n.useState)(""),[u,b]=(0,n.useState)(t);(0,n.useEffect)(()=>{r(o,a,u)},[u]);let m=e=>{u.includes(e)||(b(t=>[...t,e]),x(""))},g=e=>{u.includes(e)&&b(t=>t.filter(t=>t!==e))};return(0,s.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",disabled:c,value:d,onChange:e=>{x(e.target.value)}})}),(0,s.jsx)("button",{onClick:()=>{m(d)},disabled:c,className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:(0,s.jsx)(l.Kth,{size:15})})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex bg-bg-verba w-full p-2 text-center text-sm text-text-verba justify-between items-center rounded-xl",children:[(0,s.jsx)("div",{className:"flex w-full justify-center items-center overflow-hidden",children:(0,s.jsx)("p",{className:"truncate",title:e,children:e})}),(0,s.jsx)("button",{disabled:c,onClick:()=>{g(e)},className:"btn btn-sm btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba ml-2",children:(0,s.jsx)(i.Xm5,{size:12})})]},e+t))})]})};var ek=e=>{let{RAGConfig:t,component_name:a,selectComponent:n,updateConfig:r,blocked:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:a}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:a}),(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:l,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(J.WMq,{size:15}),(0,s.jsx)("p",{children:t[a].selected})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow",children:Object.entries(t[a].components).map(e=>{let[t,r]=e;return(0,s.jsx)("li",{onClick:()=>{l||(n(a,r.name),ep())},children:(0,s.jsx)("a",{children:r.name})},"ComponentDropdown_"+r.name)})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:t[a].components[t[a].selected].description})]}),Object.entries(t[a].components[t[a].selected].config).map(e=>{let[n,o]=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:n}),"dropdown"===o.type&&(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:l,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(J.WMq,{size:15}),(0,s.jsx)("p",{children:o.value})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 max-h-[20vh] overflow-auto rounded-box z-[1] w-full p-2 shadow",children:t[a].components[t[a].selected].config[n].values.map(e=>(0,s.jsx)("li",{onClick:()=>{l||(r(a,n,e),ep())},children:(0,s.jsx)("a",{children:e})},"ConfigValue"+e))})]}),"boolean"!=typeof o.value&&["text","number","password"].includes(o.type)&&(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:o.type,className:"grow w-full",value:o.value,onChange:e=>{l||r(a,n,e.target.value)}})}),"boolean"!=typeof o.value&&"multi"==o.type&&(0,s.jsx)(e_,{component_name:a,values:o.values,config_title:n,updateConfig:r,blocked:l}),"bool"==o.type&&(0,s.jsx)("div",{className:"flex justify-center items-center w-full",children:(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>{l||r(a,n,e.target.checked)},checked:"boolean"==typeof o.value&&o.value})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:o.description})]})]},"Configuration"+n+a)})]})},eE=e=>{var t;let{selectedFileData:a,fileMap:r,setFileMap:o,RAGConfig:c,setRAGConfig:d,setSelectedFileData:x,credentials:u}=e,[b,m]=(0,n.useState)("Basic"),g=async()=>{a&&(await j(r[a].rag_config,u)?d(r[a].rag_config):console.error("Failed to set RAG config:"))},h=(0,n.useCallback)((e,t,s)=>{o(n=>{if(a){let r={...n},l=r[a],o=l.rag_config[e].components[l.rag_config[e].selected].config;return"string"==typeof s||"boolean"==typeof s?o[t].value=s:o[t].values=s,r}return n})},[a]),v=(e,t)=>{o(s=>{if(a){let n=JSON.parse(JSON.stringify(s[a])),r=JSON.parse(JSON.stringify(s[a].rag_config));r[e].selected=t,n.rag_config=r;let l={...s};return l[a]=n,l}return s})};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(T,{tooltip_text:"Configure all import settings related to chunking, embedding, adding meta data and more. You can save made changes individually or apply them to all other files",display_text:"Import Config"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("button",{onClick:()=>{m("Basic")},className:"flex ".concat("Basic"===b?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,s.jsx)(l.zfW,{size:15}),(0,s.jsx)("p",{children:"Overview"})]}),(0,s.jsxs)("button",{onClick:()=>{m("Pipeline")},className:"flex ".concat("Pipeline"===b?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,s.jsx)(i.KOq,{size:15}),(0,s.jsx)("p",{children:"Config"})]}),(0,s.jsx)("button",{onClick:()=>{x(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,s.jsx)(z.B4e,{size:15})})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:["Basic"===b&&(0,s.jsx)(eC,{selectedFileData:a,fileMap:r,setFileMap:o,blocked:a?null!==(t=r[a].block)&&void 0!==t&&t:void 0}),"Pipeline"===b&&a&&(0,s.jsxs)("div",{className:"flex flex-col gap-10 w-full",children:[(0,s.jsx)(ek,{RAGConfig:r[a].rag_config,component_name:"Reader",selectComponent:v,updateConfig:h,blocked:r[a].block}),(0,s.jsx)(ek,{RAGConfig:r[a].rag_config,component_name:"Chunker",selectComponent:v,updateConfig:h,blocked:r[a].block}),(0,s.jsx)(ek,{RAGConfig:r[a].rag_config,component_name:"Embedder",selectComponent:v,updateConfig:h,blocked:r[a].block})]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("apply_setting_to_all");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(eN.HL_,{size:15}),(0,s.jsx)("p",{children:"Apply to All"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("set_default_settings");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(l.zfW,{size:15}),(0,s.jsx)("p",{children:"Set as Default"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_Setting");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,s.jsx)(z.B4e,{size:15}),(0,s.jsx)("p",{children:"Reset"})]})]})}),(0,s.jsx)(A,{modal_id:"apply_setting_to_all",title:"Apply Pipeline Settings",text:"Apply Pipeline Settings to all files?",triggerString:"Apply",triggerValue:null,triggerAccept:()=>{o(e=>{if(a){let t=JSON.parse(JSON.stringify(e[a].rag_config)),s={...e};for(let n in e){let r=JSON.parse(JSON.stringify(e[n]));r.rag_config=t,r.source=e[a].source,r.labels=e[a].labels,r.overwrite=e[a].overwrite,s[n]=r}return s}return e})}}),(0,s.jsx)(A,{modal_id:"reset_Setting",title:"Reset Setting",text:"Reset pipeline settings of this file?",triggerString:"Reset",triggerValue:null,triggerAccept:()=>{o(e=>{if(a&&c){let t={...e},s=JSON.parse(JSON.stringify(e[a]));return s.rag_config=c,t[a]=s,t}return e})}}),(0,s.jsx)(A,{modal_id:"set_default_settings",title:"Set Default",text:"Set current pipeline settings as default for future files?",triggerString:"Set",triggerValue:null,triggerAccept:g})]})},eD=e=>{let{credentials:t,RAGConfig:a,setRAGConfig:r}=e,[l,o]=(0,n.useState)({}),[i,c]=(0,n.useState)(null),[d,x]=(0,n.useState)(!1),[u,b]=(0,n.useState)(null),[m,g]=(0,n.useState)("OFFLINE");(0,n.useEffect)(()=>{x(!0)},[]),(0,n.useEffect)(()=>{let e=ej(),t=new WebSocket(e);return t.onopen=()=>{console.log("Import WebSocket connection opened to "+e),g("ONLINE")},t.onmessage=e=>{g("ONLINE");try{let t=JSON.parse(e.data);"new_file_id"in t?o(e=>{let a={...e};return a[t.new_file_id]={...a[t.original_file_id],fileID:t.new_file_id,filename:t.filename,block:!0},a}):v(t)}catch(t){console.error("Received data is not valid JSON:",e.data);return}},t.onerror=e=>{console.error("Import WebSocket Error:",e),g("OFFLINE"),h()},t.onclose=e=>{g("OFFLINE"),h(),e.wasClean?console.log("Import WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died")},b(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[d]);let h=()=>{o(e=>{if(l){let t={...e};for(let e in t)"DONE"!=t[e].status&&"ERROR"!=t[e].status&&"READY"!=t[e].status&&(t[e].status="ERROR",t[e].status_report.ERROR={fileID:e,status:"ERROR",message:"Connection was interrupted",took:0});return t}return e})},v=e=>{o(t=>{if(e&&e.fileID in t){let a=JSON.parse(JSON.stringify(t[e.fileID])),s={...t};return a.status=e.status,a.status_report[e.status]=e,s[e.fileID]=a,s}return t})},f=e=>{o(t=>{if(e in t){let a=JSON.parse(JSON.stringify(t[e])),s={...t};return a.status="WAITING",Object.entries(a.status_report).length>0&&(a.status_report={}),s[e]=a,s}return t})},p=(e,a)=>{if((null==u?void 0:u.readyState)===WebSocket.OPEN){f(a);let s=[],n=0;for(;n<e.length;){let t=e.slice(n,n+2e3);s.push(t),n+=2e3}let r=s.length;s.forEach((e,s)=>{u.send(JSON.stringify({chunk:e,isLastChunk:s===r-1,total:r,order:s,fileID:a,credentials:t}))})}else console.error("WebSocket is not open. ReadyState:",null==u?void 0:u.readyState),x(e=>!e)};return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(i?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,s.jsx)(ey,{fileMap:l,setFileMap:o,RAGConfig:a,setRAGConfig:r,selectedFileData:i,setSelectedFileData:c,importSelected:()=>{i&&["READY","DONE","ERROR"].includes(l[i].status)&&!l[i].block&&p(JSON.stringify(l[i]),i)},importAll:()=>{for(let e in l)["READY","DONE","ERROR"].includes(l[e].status)&&!l[e].block&&p(JSON.stringify(l[e]),e)},socketStatus:m,reconnect:()=>{x(e=>!e)}})}),(0,s.jsx)("div",{className:"".concat(i?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:i&&(0,s.jsx)(eE,{selectedFileData:i,RAGConfig:a,credentials:t,setRAGConfig:r,fileMap:l,setFileMap:o,setSelectedFileData:c})})]})},eR=a(34673),eO=a(21789),eI=a(19159),ez=(a(91997),a(1293)),eT=a(67161),eA="attribute vec4 tangent;\nuniform float uTime;\nuniform float uPositionFrequency;\nuniform float uTimeFrequency;\nuniform float uStrength;\nuniform float uWarpPositionFrequency;\nuniform float uWarpTimeFrequency;\nuniform float uWarpStrength;\n\nvarying float vWobble;\n\n//	Simplex 4D Noise \n//	by Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nfloat permute(float x){return floor(mod(((x*34.0)+1.0)*x, 289.0));}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nfloat taylorInvSqrt(float r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nvec4 grad4(float j, vec4 ip)\n{\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n}\n\n\nfloat simplexNoise4d(vec4 v)\n{\n  const vec2  C = vec2( 0.138196601125010504,  // (5 - sqrt(5))/20  G4\n                        0.309016994374947451); // (sqrt(5) - 1)/4   F4\n  // First corner\n  vec4 i  = floor(v + dot(v, C.yyyy) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n  // Other corners\n\n  // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n  //  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n\n  //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C \n  vec4 x1 = x0 - i1 + 1.0 * C.xxxx;\n  vec4 x2 = x0 - i2 + 2.0 * C.xxxx;\n  vec4 x3 = x0 - i3 + 3.0 * C.xxxx;\n  vec4 x4 = x0 - 1.0 + 4.0 * C.xxxx;\n\n  // Permutations\n  i = mod(i, 289.0); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n  // Gradients\n  // ( 7*7*6 points uniformly over a cube, mapped onto a 4-octahedron.)\n  // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n  // Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\nfloat getWobble(vec3 position){\n    vec3 warpedPosition = position;\n    warpedPosition += simplexNoise4d(vec4(position * uWarpPositionFrequency, uTime * uWarpTimeFrequency)) * uWarpStrength;\n\n    float wobble = simplexNoise4d(vec4(warpedPosition * uPositionFrequency, uTime * uTimeFrequency)) * uStrength;\n    return wobble;\n}\n\nvoid main()\n{\n    vec3 biTangent = cross(normal, tangent.xyz);\n\n    float shift = 0.01;\n    vec3 positionA = csm_Position + tangent.xyz * shift;\n    vec3 positionB = csm_Position + biTangent * shift;\n\n    float wobble = getWobble(csm_Position);\n    csm_Position += wobble * normal;\n    positionA += getWobble(positionA) * normal;\n    positionB += getWobble(positionB) * normal;\n\n    vec3 toA = normalize(positionA - csm_Position);\n    vec3 toB = normalize(positionB - csm_Position);\n    csm_Normal = normalize(cross(toA, toB));\n\n    vWobble = wobble / uStrength;\n}";let eF="";eF="/static";let eP=e=>{let{color:t}=e,a=(0,eR.L)(eF+"/verba.glb"),r=(0,n.useMemo)(()=>new G.MeshPhysicalMaterial({metalness:1,roughness:.075,color:"#f1ff33",transmission:1,ior:1,thickness:1,transparent:!1,wireframe:!1,clearcoat:1,clearcoatRoughness:0}),[]);return(0,n.useEffect)(()=>{},[r]),(0,n.useEffect)(()=>{a.scene.traverse(e=>{e instanceof G.Mesh&&(e.material=r)})},[a,r]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("color",{args:[t],attach:"background"}),(0,s.jsx)(eO.N,{global:!0,rotation:[.13,.1,0],polar:[-.4,.2],azimuth:[-1,.75],config:{mass:2,tension:400},snap:{mass:4,tension:400},children:(0,s.jsx)(W.b,{speed:1,rotationIntensity:.4,children:(0,s.jsx)("primitive",{object:a.scene,"position-y":-.1,"position-x":.15,"position-z":-1,scale:.6})})})]})},eM=(0,n.memo)(e=>{let{startPosition:t,endPosition:a,size:r,colorA:l,colorB:o}=e,i=(0,n.useMemo)(()=>({uTime:{value:0},uPositionFrequency:{value:.677},uTimeFrequency:{value:.041},uStrength:{value:.557},uWarpPositionFrequency:{value:.267},uWarpTimeFrequency:{value:.135},uWarpStrength:{value:.238},uColorA:{value:new G.Color(l)},uColorB:{value:new G.Color(o)},uRefractionStrength:{value:.1},uFresnelPower:{value:2},uTransparency:{value:.5}}),[]),c=(0,n.useMemo)(()=>new eI.Z({baseMaterial:G.MeshPhysicalMaterial,metalness:1,roughness:.914,uniforms:i,color:"#ffffff",transmission:1,ior:1.5,thickness:1,silent:!0,transparent:!0,wireframe:!1,clearcoat:1,clearcoatRoughness:0,vertexShader:eA,fragmentShader:"varying float vWobble;\nuniform vec3 uColorA;\nuniform vec3 uColorB;\n\nvoid main()\n{\n    float colorMix = smoothstep(-1.0, 1.0, vWobble);\n    csm_DiffuseColor.rgb = mix(uColorA, uColorB, colorMix);\n}"}),[]),d=(0,n.useMemo)(()=>new eI.Z({baseMaterial:G.MeshDepthMaterial,silent:!0,vertexShader:eA,depthPacking:G.RGBADepthPacking}),[]),x=(0,n.useRef)(null),u=(0,n.useRef)(null),b=new G.Vector3(...a);(0,n.useEffect)(()=>{x.current&&(u.current=new G.Vector3(...t),x.current.position.copy(u.current))},[t]),(0,n.useEffect)(()=>{},[c]),(0,P.C)((e,t)=>{i.uTime.value=e.clock.elapsedTime,x.current&&u.current&&(x.current.position.lerp(b,.02),.01>x.current.position.distanceTo(b)&&(u.current=null))});let m=new G.IcosahedronGeometry(r,30),g=(0,eT.$1)(m);return g.computeTangents(),(0,s.jsx)("mesh",{ref:x,material:c,receiveShadow:!0,castShadow:!0,customDepthMaterial:d,children:(0,s.jsx)("bufferGeometry",{attach:"geometry",...g})})});eM.displayName="CoolShape";let eL=()=>{let{scene:e}=(0,P.A)();return(0,n.useEffect)(()=>{new ez.x().load(eF+"/cloudy.hdr",t=>{t.mapping=G.EquirectangularReflectionMapping,e.environment=t})},[e]),null};var eW=e=>{let{credentials:t,setCredentials:a,setSelectedTheme:r,setThemes:l,setIsLoggedIn:o,production:c,setRAGConfig:d}=e,[x,u]=(0,n.useState)(!0),[b,m]=(0,n.useState)(!1),[g,h]=(0,n.useState)(!0),[v,p]=(0,n.useState)(""),[j,w]=(0,n.useState)("Local"),[y,N]=(0,n.useState)(t.url),[S,C]=(0,n.useState)(t.key);(0,n.useEffect)(()=>{let e=setTimeout(()=>{u(!1)},300);return()=>clearTimeout(e)},[]);let _=async e=>{p(""),m(!0);let t=await f(e,y,S);t&&(t.error?(o(!1),p(t.error)):(o(!0),a({deployment:e,key:S,url:y}),d(t.rag_config),t.themes&&l(t.themes),t.theme&&r(t.theme))),m(!1)};return(0,n.useMemo)(()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eM,{startPosition:[-3.3,-.8,-1],endPosition:[-1.3,-1,-4],size:2,colorA:"#00ffbf",colorB:"#00ff01"}),(0,s.jsx)(eM,{startPosition:[1.5,10,-6],endPosition:[1.5,1,-5],size:1,colorA:"#00c0ff",colorB:"#00c0ff"})]}),[]),(0,s.jsxs)("div",{className:"w-screen h-screen bg-white",children:[(0,s.jsxs)("div",{className:"flex w-full h-full transition-opacity duration-1000 ".concat(x?"opacity-0":"opacity-100"),children:[(0,s.jsx)("div",{className:"w-3/5 h-full bg-white",children:(0,s.jsxs)(M.Xz,{camera:{position:[0,-.25,3],fov:40},className:"w-full h-full touch-none",children:[(0,s.jsx)("color",{attach:"background",args:["#ffffff"]}),(0,s.jsx)(eL,{}),(0,s.jsx)("ambientLight",{intensity:.5}),(0,s.jsx)("directionalLight",{position:[5,5,5],intensity:1}),(0,s.jsx)(eP,{color:""})]})}),(0,s.jsx)("div",{className:"w-2/5 h-full flex justify-start items-center p-5",children:(0,s.jsxs)("div",{className:"flex flex-col gap-8 items-start justify-center",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("p",{className:"font-light text-5xl text-text-alt-verba",children:"Welcome to"}),(0,s.jsx)("p",{className:"font-light text-5xl text-text-verba",children:"Verba"})]}),"Local"==c&&(0,s.jsx)("p",{className:"text-text-verba text-lg ",children:"Choose your deployment"})]}),g?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:["Local"==c&&(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:[(0,s.jsx)("button",{onClick:()=>{h(!1),w("Weaviate")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,s.jsx)("p",{children:"Weaviate"})}),(0,s.jsx)("button",{onClick:()=>{h(!1),w("Docker")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,s.jsx)("p",{children:"Docker"})}),(0,s.jsx)("button",{onClick:()=>{w("Local"),_("Local")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,s.jsx)("p",{children:"Local"})})]}),"Demo"==c&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsx)("button",{onClick:()=>{w("Weaviate"),_("Weaviate")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",disabled:b,children:b?(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}):(0,s.jsx)("p",{children:"Start Demo"})})}),"Production"==c&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsx)("button",{onClick:()=>{h(!1),w("Weaviate")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,s.jsx)("p",{children:"Start Verba"})})})]}):(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:["Local"==c&&(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:[(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba",children:[(0,s.jsx)(i.i1q,{className:"text-text-alt-verba"}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value),placeholder:"Weaviate URL",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full"})]}),(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba",children:[(0,s.jsx)(i.q2z,{className:"text-text-alt-verba"}),(0,s.jsx)("input",{type:"password",value:S,onChange:e=>C(e.target.value),placeholder:"API Key",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full"})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("button",{onClick:()=>h(!0),className:"flex-1 bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:"Other Deployments"}),(0,s.jsx)("button",{onClick:()=>_(j),className:"flex-1 bg-secondary-verba btn border-none hover:bg-button-hover-verba text-text-verba hover:text-text-verba p-3 rounded-lg",disabled:b,children:b?(0,s.jsx)("span",{className:"loading loading-spinner"}):"Connect"})]}),v&&(0,s.jsx)("div",{className:"bg-red-100 p-2 rounded w-full",children:(0,s.jsx)("p",{className:"flex w-full",children:v})})]}),"Production"==c&&(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:[(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba",children:[(0,s.jsx)(i.i1q,{className:"text-text-alt-verba"}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value),placeholder:"Weaviate URL",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full"})]}),(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba",children:[(0,s.jsx)(i.q2z,{className:"text-text-alt-verba"}),(0,s.jsx)("input",{type:"password",value:S,onChange:e=>C(e.target.value),placeholder:"API Key",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full"})]}),(0,s.jsx)("div",{className:"flex justify-between gap-4",children:(0,s.jsx)("button",{onClick:()=>_("Weaviate"),className:"flex-1 bg-secondary-verba btn border-none hover:bg-button-hover-verba text-text-verba hover:text-text-verba p-3 rounded-lg",disabled:b,children:b?(0,s.jsx)("span",{className:"loading loading-spinner"}):"Connect"})}),v&&(0,s.jsx)("div",{className:"bg-red-100 p-2 rounded w-full",children:(0,s.jsx)("p",{className:"flex w-full",children:v})})]})]})]})})]}),x&&(0,s.jsx)("div",{className:"absolute inset-0 bg-white flex justify-center items-center"})]})},eB=a(93850),eG=e=>{let{RAGConfig:t,setRAGConfig:a,onSave:n,onReset:r,production:o}=e,i=(e,t,s)=>{a(a=>{if(a){let n={...a};return"string"==typeof s||"boolean"==typeof s?n[e].components[n[e].selected].config[t].value=s:n[e].components[n[e].selected].config[t].values=s,n}return a})},c=(e,t)=>{a(a=>{if(a){let s={...a};return s[e].selected=t,s}return a})};return t?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[(0,s.jsx)(ek,{RAGConfig:t,component_name:"Embedder",selectComponent:c,updateConfig:i,blocked:"Demo"==o}),(0,s.jsx)(ek,{RAGConfig:t,component_name:"Generator",selectComponent:c,updateConfig:i,blocked:"Demo"==o}),(0,s.jsx)(ek,{RAGConfig:t,component_name:"Retriever",selectComponent:c,updateConfig:i,blocked:"Demo"==o}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsxs)("button",{onClick:n,disabled:"Demo"==o,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)(l.zfW,{size:15}),(0,s.jsx)("p",{children:"Set as Default"})]}),(0,s.jsxs)("button",{onClick:r,disabled:"Demo"==o,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,s.jsx)(z.B4e,{size:15}),(0,s.jsx)("p",{children:"Reset"})]})]})]}):(0,s.jsx)("div",{})},eJ=e=>{let{message:t,selectedTheme:a,selectedDocument:n,setSelectedDocument:r,message_index:o,setSelectedDocumentScore:c,setSelectedChunkScore:d}=e;return"string"==typeof t.content?(0,s.jsx)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"flex flex-col items-start p-5 rounded-3xl animate-press-in sm:text-sm md:text-base ".concat({user:"bg-bg-verba",system:"bg-bg-alt-verba",error:"bg-warning-verba",retrieval:"bg-bg-verba"}[t.type]),children:[t.cached&&(0,s.jsx)(i.i1q,{size:12,className:"text-text-verba"}),"system"===t.type&&(0,s.jsx)(Y.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:n,className:r,children:l,...o}=e,i=/language-(\w+)/.exec(r||"");return!n&&i?(0,s.jsx)(X.Z,{style:"dark"===a.theme?K.vk:K.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,s.jsx)("code",{className:r,...o,children:l})}},children:t.content}),"user"===t.type&&(0,s.jsx)("div",{className:"whitespace-pre-wrap",children:t.content}),"error"===t.type&&(0,s.jsxs)("div",{className:"whitespace-pre-wrap flex items-center gap-2 text-sm text-text-verba",children:[(0,s.jsx)(eB.I2T,{size:15}),(0,s.jsx)("p",{children:t.content})]})]})}):(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3 w-full",children:t.content.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{r(e.uuid),c(e.uuid+e.score+e.chunks.length),d(e.chunks)},className:"flex ".concat(n&&n===e.uuid+e.score+e.chunks.length?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba"," rounded-3xl p-3 items-center justify-between transition-colors duration-300 ease-in-out border-none"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)("p",{className:"text-xs flex-grow truncate mr-2",title:e.title,children:e.title}),(0,s.jsxs)("div",{className:"flex gap-1 items-center text-text-verba flex-shrink-0",children:[(0,s.jsx)(l.$Kz,{size:12}),(0,s.jsx)("p",{className:"text-sm",children:e.chunks.length})]})]})},"Retrieval"+e.title+t))})},eq=e=>{let{production:t,credentials:a,setSelectedDocument:r,setSelectedChunkScore:c,currentPage:d,RAGConfig:x,selectedTheme:u,setRAGConfig:b}=e,[m,g]=(0,n.useState)("Chat"),h=(0,n.useRef)(!1),[v,f]=(0,n.useState)("DONE"),[w,N]=(0,n.useState)("");(0,n.useRef)(null);let[C,_]=(0,n.useState)(null),[k,E]=(0,n.useState)(!1),[D,R]=(0,n.useState)(!1),[O,I]=(0,n.useState)(null),[A,F]=(0,n.useState)(0),[P,M]=(0,n.useState)(""),[L,W]=(0,n.useState)([]),B=x?x.Embedder.components[x.Embedder.selected].config.Model.value:"No Config found";(0,n.useState)("No Embedding Model"),(0,n.useEffect)(()=>{R(!0)},[]),(0,n.useEffect)(()=>{x?H():F(0)},[B,d]),(0,n.useEffect)(()=>{W(e=>0===e.length?[{type:"system",content:u.intro_message.text}]:e)},[u.intro_message.text]),(0,n.useEffect)(()=>{let e=ef(),t=new WebSocket(e);return t.onopen=()=>{console.log("WebSocket connection opened to "+e),E(!0)},t.onmessage=e=>{let t;if(!h.current){N("");return}try{t=JSON.parse(e.data)}catch(t){console.error("Received data is not valid JSON:",e.data);return}let a=t.message;if(N(e=>e+a),"stop"===t.finish_reason){h.current=!1,f("DONE");let e=t.full_text;if(t.cached){let a=t.distance;W(t=>[...t,{type:"system",content:e,cached:!0,distance:a}])}else W(t=>[...t,{type:"system",content:e}]);N("")}},t.onerror=e=>{console.error("WebSocket Error:",e),E(!1),h.current=!1,f("DONE")},t.onclose=e=>{e.wasClean?console.log("WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),E(!1),h.current=!1,f("DONE")},_(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[D]),(0,n.useEffect)(()=>{x?H():F(0)},[x]);let G=async()=>{let e=await p(a);e&&b(e.rag_config)},J=async()=>{if(!h.current&&P.trim()){M(""),h.current=!0,f("CHUNKS"),W(e=>[...e,{type:"user",content:P}]);try{let e=await y(P,x,a);!e||e.error?q(e?e.error:"No data received"):V(e,P)}catch(e){q("Failed to fetch from API"),console.error("Failed to fetch from API:",e)}}},q=e=>{W(t=>[...t,{type:"error",content:e}]),h.current=!1,f("DONE")},V=(e,t)=>{if(W(t=>[...t,{type:"retrieval",content:e.documents}]),e.documents.length>0){let a=e.documents[0];r(a.uuid),I("".concat(a.uuid).concat(a.score).concat(a.chunks.length)),c(a.chunks),e.context&&(U(t,e.context),f("RESPONSE"))}},U=(e,t)=>{if((null==C?void 0:C.readyState)===WebSocket.OPEN){let a=JSON.stringify({query:e,context:t,conversation:L.filter(e=>"user"===e.type||"system"===e.type).map(e=>({type:e.type,content:e.content})),rag_config:x});C.send(a)}else console.error("WebSocket is not open. ReadyState:",null==C?void 0:C.readyState)},H=async()=>{try{let e=await S(B,a);e&&F(e.datacount)}catch(e){console.error("Failed to fetch from API:",e)}},Y=async()=>{await j(x,a)},X=async()=>{G()};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start items-center",children:(0,s.jsx)(T,{tooltip_text:"Use the Chat interface to interact with your data and to perform Retrieval Augmented Generation (RAG)",display_text:"Chat"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsxs)("button",{onClick:()=>{g("Chat")},className:"flex ".concat("Chat"===m?"bg-primary-verba text-text-verba hover:bg-button-hover-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(l.utr,{size:15}),(0,s.jsx)("p",{children:"Chat"})]}),(0,s.jsxs)("button",{onClick:()=>{g("Config")},className:"flex ".concat("Config"===m?"bg-primary-verba text-text-verba hover:bg-button-hover-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,s.jsx)(i.KOq,{size:15}),(0,s.jsx)("p",{children:"Config"})]})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 ".concat("Chat"===m?"flex flex-col gap-3 ":"hidden"),children:[(0,s.jsxs)("div",{className:"flex w-full justify-start items-center text-text-alt-verba gap-2",children:[0===A&&(0,s.jsx)(eB.I2T,{size:15}),0===A&&(0,s.jsx)("p",{className:"text-text-alt-verba text-sm items-center flex",children:"".concat(A," documents embedded by ").concat(B)})]}),L.map((e,t)=>(0,s.jsx)("div",{className:"".concat("user"===e.type?"text-right":""),children:(0,s.jsx)(eJ,{message:e,message_index:t,selectedTheme:u,selectedDocument:O,setSelectedDocumentScore:I,setSelectedDocument:r,setSelectedChunkScore:c})},"Message_"+t)),w&&(0,s.jsx)(eJ,{message:{type:"system",content:w,cached:!1},message_index:-1,selectedTheme:u,selectedDocument:O,setSelectedDocumentScore:I,setSelectedDocument:r,setSelectedChunkScore:c}),h.current&&(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-text-alt-verba loading loading-dots loading-md"}),(0,s.jsxs)("p",{className:"text-text-alt-verba",children:["CHUNKS"===v&&"Retrieving...","RESPONSE"===v&&"Generating..."]}),(0,s.jsx)("button",{className:"btn btn-circle btn-sm bg-bg-alt-verba hover:bg-warning-verba hover:text-text-verba text-text-alt-verba shadow-none border-none text-sm",children:(0,s.jsx)(z.B4e,{size:15})})]})})]}),"Config"===m&&(0,s.jsx)(eG,{production:t,RAGConfig:x,setRAGConfig:b,onReset:X,onSave:Y})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:k?(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-end w-full",children:[(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full placeholder-text-alt-verba",placeholder:A>0?"Chatting with ".concat(A," documents..."):"No documents detected...",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),J())},value:P,onChange:e=>{M(e.target.value)}})}),(0,s.jsx)("button",{type:"button",onClick:e=>{J()},className:"btn btn-square border-none text-text-verba bg-primary-verba hover:bg-button-hover-verba",children:(0,s.jsx)(o.OUD,{size:15})}),(0,s.jsx)("button",{type:"button",onClick:()=>{r(null),c([]),I(null),W([{type:"system",content:u.intro_message.text}])},className:"btn btn-square text-text-alt-verba hover:text-text-verba border-none bg-button-verba hover:bg-button-hover-verba",children:(0,s.jsx)(z.Ffb,{size:18})})]}):(0,s.jsx)("div",{className:"flex gap-2 items-center justify-end w-full",children:(0,s.jsxs)("button",{onClick:()=>{R(e=>!e)},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,s.jsx)($.Nwf,{size:15}),(0,s.jsx)("p",{children:"Reconnect to Verba"})]})})})]})},eV=e=>{let{credentials:t,selectedTheme:a,production:r,currentPage:l,RAGConfig:o,setRAGConfig:i}=e,[c,d]=(0,n.useState)(null),[x,u]=(0,n.useState)([]);return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(c?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,s.jsx)(eq,{production:r,credentials:t,selectedTheme:a,setSelectedDocument:d,setSelectedChunkScore:u,currentPage:l,RAGConfig:o,setRAGConfig:i})}),(0,s.jsx)("div",{className:"".concat(c?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:(0,s.jsx)(et,{credentials:t,setSelectedDocument:d,selectedTheme:a,selectedDocument:c,chunkScores:x})})]})},eU=a(22034),eH=a(73478),eY=e=>{let{selectedTheme:t,setThemes:a,credentials:r,setSelectedTheme:l,themes:o}=e,[c,d]=(0,n.useState)(""),x=async()=>{await w(o,t,r)},u=(e,t)=>{l(a=>{let s=a[e];if("text"===s.type)return{...a,[e]:{...s,text:t}};if("image"===s.type)return{...a,[e]:{...s,src:t}};if("check"===s.type)return{...a,[e]:{...s,checked:t}};if("color"===s.type)return{...a,[e]:{...s,color:t}};if("select"===s.type)return{...a,[e]:{...s,value:t}};if("number"===s.type)return{...a,[e]:{...s,value:t}};return a})};(0,n.useEffect)(()=>{a(e=>{let a={...e};return a[t.theme_name]=t,a})},[t]);let b=(e,t)=>{if(t.target.files&&t.target.files[0]){let a=new FileReader;a.onload=t=>{var a;"string"==typeof(null===(a=t.target)||void 0===a?void 0:a.result)&&u(e,t.target.result)},a.readAsDataURL(t.target.files[0])}},m=(e,a)=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:a.description}),"text"===a.type&&(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full border-none bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",placeholder:e,value:t[e].text,onChange:t=>u(e,t.target.value)})}),"select"===a.type&&(0,s.jsx)("select",{value:t[e].value,onChange:t=>{u(e,t.target.value)},className:"select bg-bg-verba",children:a.options.map(e=>(0,s.jsx)("option",{value:e,children:e},"Select_"+e))}),"color"===a.type&&(0,s.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh]",children:[(0,s.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow",placeholder:e,value:t[e].color,onChange:t=>{u(e,t.target.value)}})}),(0,s.jsx)(eH.gW,{color:t[e].color,onChange:t=>{u(e,t)}})]}),"image"===a.type&&(0,s.jsxs)("div",{className:"flex justify-between gap-4 w-full items-center",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("label",{className:"input flex items-center text-text-verba gap-2 w-full border-none bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow",placeholder:"Enter image URL",value:c,onChange:e=>d(e.target.value)})})}),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("button",{onClick:()=>u(e,c),className:"btn border-none shadow-none bg-button-verba hover:bg-button-hover-verba",children:"Set Link"}),(0,s.jsx)("button",{onClick:()=>{var t;return null===(t=document.getElementById("".concat(e,"ImageInput")))||void 0===t?void 0:t.click()},className:"btn border-none shadow-none bg-button-verba hover:bg-button-hover-verba",children:"Upload Image"}),(0,s.jsx)("input",{id:"".concat(e,"ImageInput"),type:"file",accept:"image/*",onChange:t=>b(e,t),className:"hidden"})]}),t[e].src&&(0,s.jsx)("img",{src:t[e].src,alt:"".concat(e," preview"),className:"max-w-full max-h-32 rounded-xl"})]})]})]})},e);return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Customize Theme"}),(0,s.jsx)("select",{className:"select bg-bg-verba",value:Object.keys(o).find(e=>o[e]===t)||"",onChange:e=>l(o[e.target.value]),children:Object.keys(o).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"gap-4 flex flex-col p-4",children:[(0,s.jsx)("p",{className:"font-bold",children:"Customize Logo"}),Object.entries(t).filter(e=>{let[t,a]=e;return"image"===a.type}).map(e=>{let[t,a]=e;return m(t,a)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Text"}),Object.entries(t).filter(e=>{let[t,a]=e;return"text"===a.type}).map(e=>{let[t,a]=e;return m(t,a)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Font"}),Object.entries(t).filter(e=>{let[t,a]=e;return"select"===a.type}).map(e=>{let[t,a]=e;return m(t,a)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Color"}),Object.entries(t).filter(e=>{let[t,a]=e;return"color"===a.type}).map(e=>{let[t,a]=e;return m(t,a)})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,s.jsxs)("button",{onClick:x,className:"btn flex items-center justify-center border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(i.FJM,{}),(0,s.jsx)("p",{className:"",children:"Save"})]}),(0,s.jsxs)("button",{onClick:()=>{a({Light:er,Dark:el,Weaviate:ei,WCD:eo}),l(er)},className:"btn flex items-center justify-center border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(z.B4e,{}),(0,s.jsx)("p",{className:"",children:"Reset"})]})]})]})},eX=e=>{let{credentials:t}=e,[a,r]=(0,n.useState)(null),[o,c]=(0,n.useState)(null),d=async()=>{let e=await I(t);(null==e?void 0:e.error)===""&&(r(e.node_payload),c(e.collection_payload))};(0,n.useEffect)(()=>{d()},[]);let x=async()=>{await O("DOCUMENTS",t)&&d()},u=async()=>{await O("ALL",t)&&d()},b=async()=>{await O("CONFIG",t)&&d()},m=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Admin Panel"})}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"gap-4 flex flex-col p-4 text-text-verba",children:[(0,s.jsx)("p",{className:"font-bold text-lg",children:"Resetting Verba"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>m("reset-documents"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(l.emU,{size:16}),(0,s.jsx)("p",{children:"Clear Documents"})]}),(0,s.jsxs)("button",{onClick:()=>m("reset-configs"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(i.LDL,{size:16}),(0,s.jsx)("p",{children:"Clear Config"})]}),(0,s.jsxs)("button",{onClick:()=>m("reset-verba"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(l.VOs,{size:16}),(0,s.jsx)("p",{children:"Clear Everything"})]})]}),(0,s.jsxs)("button",{onClick:d,className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,s.jsx)(l.A$d,{size:16}),(0,s.jsx)("p",{children:"Reload Metadata"})]})]}),(0,s.jsx)("p",{className:"font-bold text-lg",children:"Weaviate Information"}),(0,s.jsxs)("div",{className:"flex border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Connected to"}),(0,s.jsx)("p",{className:"font-mono text-text-verba",children:t.url})]}),(0,s.jsxs)("div",{className:"flex border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Deployment"}),(0,s.jsx)("p",{className:"font-mono text-text-verba",children:t.deployment})]}),(0,s.jsxs)("div",{className:"flex border-2 border-secondary-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Version"}),a?(0,s.jsx)("p",{className:"font-mono text-text-verba",children:a.weaviate_version}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Nodes"}),a?(0,s.jsx)("p",{className:"font-mono text-text-verba",children:a.node_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),a?(0,s.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:a.nodes.map(e=>(0,s.jsxs)("li",{className:"font-mono text-text-verba flex justify-between",children:[(0,s.jsx)("span",{className:"w-64 truncate",children:e.name}),(0,s.jsxs)("span",{children:["(",e.status," - ",e.shards," shards)"]})]},"Node"+e.name))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("p",{className:"w-32 font-semibold",children:"Collections"}),o?(0,s.jsx)("p",{className:"font-mono text-text-verba",children:o.collection_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),o?(0,s.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:o.collections.map(e=>(0,s.jsxs)("li",{className:"font-mono text-text-verba flex justify-between",children:[(0,s.jsx)("span",{className:"w-128 truncate",children:e.name}),(0,s.jsxs)("span",{children:[e.count," objects"]})]},"Collection"+e.name))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]})]})}),(0,s.jsx)(A,{modal_id:"reset-documents",title:"Reset Documents",text:"Are you sure you want to reset all documents? This will clear all documents and chunks from Verba.",triggerAccept:x,triggerString:"Reset"}),(0,s.jsx)(A,{modal_id:"reset-configs",title:"Reset Config",text:"Are you sure you want to reset the config?",triggerAccept:b,triggerString:"Reset"}),(0,s.jsx)(A,{modal_id:"reset-verba",title:"Reset Verba",text:"Are you sure you want to reset Verba? This will delete all collections related to Verba.",triggerAccept:u,triggerString:"Reset"})]})},eK=e=>{let{selectedTheme:t,themes:a,setThemes:r,setSelectedTheme:o,credentials:c}=e,[d,x]=(0,n.useState)("INFO");return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"w-1/3 flex",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(T,{tooltip_text:"Customize Verba's Theme, reset collections, logout or report issues.",display_text:"Settings"})})}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:[(0,s.jsxs)("button",{onClick:()=>x("INFO"),className:"flex ".concat("INFO"===d?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none"),children:[(0,s.jsx)(eU.Xn2,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Admin"})]},"Info Button Setting"),(0,s.jsxs)("button",{onClick:()=>x("THEME"),className:"flex ".concat("THEME"===d?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none"),children:[(0,s.jsx)(i._TT,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Customize Theme"})]},"Theme Button Setting"),(0,s.jsxs)("button",{className:"flex bg-button-verba hover:bg-secondary-verba  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none",onClick:()=>window.location.reload(),children:[(0,s.jsx)(l.p$f,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Logout"})]},"Logout Button Setting"),(0,s.jsxs)("button",{className:"flex bg-button-verba hover:bg-secondary-verba  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none",onClick:()=>window.open("https://github.com/weaviate/Verba/issues/new/choose","_blank"),children:[(0,s.jsx)(eB.N3m,{size:18}),(0,s.jsx)("p",{className:"text-text-verba",children:"Report Issue"})]},"Issue Button Setting")]})]})}),(0,s.jsx)("div",{className:"w-2/3 flex",children:(0,s.jsx)("div",{className:"flex flex-col gap-2 w-full",children:(0,s.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["THEME"===d&&(0,s.jsx)(eY,{themes:a,credentials:c,setThemes:r,setSelectedTheme:o,selectedTheme:t}),"INFO"===d&&(0,s.jsx)(eX,{credentials:c})]})})})]})};function eZ(){var e;let[t,a]=(0,n.useState)("CHAT"),[l,o]=(0,n.useState)("Local"),[i,c]=(0,n.useState)(""),[d,x]=(0,n.useState)({Light:er,Dark:el,Weaviate:ei,WCD:eo}),[u,m]=(0,n.useState)(d.Light),g=u.font.value,h=g&&(null===(e=ev[g])||void 0===e?void 0:e.className)||"",[f,p]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),[y,N]=(0,n.useState)(!1),[S,C]=(0,n.useState)({deployment:"Local",url:"",key:""}),[_,k]=(0,n.useState)(null),E=(0,n.useCallback)(async()=>{try{let[e]=await Promise.all([v()]);e?(o(e.production),c(e.gtag),p(!0),C({deployment:"Local",url:e.deployments.WEAVIATE_URL_VERBA,key:e.deployments.WEAVIATE_API_KEY_VERBA})):(console.warn("Could not retrieve health data"),p(!1),w(!1))}catch(e){console.error("Error during initial fetch:",e),p(!1),w(!1)}},[]);(0,n.useEffect)(()=>{E()},[]),(0,n.useEffect)(()=>{if(j){let e=setTimeout(()=>{N(!0)},1e3);return()=>clearTimeout(e)}},[j]);let D=(0,n.useCallback)(()=>{Object.entries({"--primary-verba":u.primary_color.color,"--secondary-verba":u.secondary_color.color,"--warning-verba":u.warning_color.color,"--bg-verba":u.bg_color.color,"--bg-alt-verba":u.bg_alt_color.color,"--text-verba":u.text_color.color,"--text-alt-verba":u.text_alt_color.color,"--button-verba":u.button_color.color,"--button-hover-verba":u.button_hover_color.color}).forEach(e=>{let[t,a]=e;document.documentElement.style.setProperty(t,a)})},[u]);return(0,n.useEffect)(D,[u]),(0,s.jsxs)("main",{className:"min-h-screen bg-bg-verba text-text-verba ".concat(h),"data-theme":u.theme,children:[""!==i&&(0,s.jsx)(r.GoogleAnalytics,{gaId:i}),!j&&f&&(0,s.jsx)(eW,{production:l,setSelectedTheme:m,setThemes:x,credentials:S,setIsLoggedIn:w,setRAGConfig:k,setCredentials:C}),j&&f&&(0,s.jsxs)("div",{className:"transition-opacity duration-1000 ".concat(y?"opacity-100":"opacity-0"," flex flex-col gap-2 p-5"),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{production:l,title:u.title.text,subtitle:u.subtitle.text,imageSrc:u.image.src,version:"v2.0.0",currentPage:t,setCurrentPage:a}),(0,s.jsx)("div",{className:"".concat("CHAT"===t?"":"hidden"),children:(0,s.jsx)(eV,{credentials:S,RAGConfig:_,setRAGConfig:k,production:l,selectedTheme:u,currentPage:t})}),"DOCUMENTS"===t&&(0,s.jsx)(ea,{credentials:S,production:l,selectedTheme:u}),(0,s.jsx)("div",{className:"".concat("ADD"===t&&"Demo"!=l?"":"hidden"),children:(0,s.jsx)(eD,{RAGConfig:_,setRAGConfig:k,credentials:S})}),(0,s.jsx)("div",{className:"".concat("SETTINGS"===t&&"Demo"!=l?"":"hidden"),children:(0,s.jsx)(eK,{credentials:S,selectedTheme:u,setSelectedTheme:m,themes:d,setThemes:x})})]}),(0,s.jsx)("footer",{className:"footer footer-center p-4 mt-8 bg-bg-verba text-text-alt-verba transition-all duration-1500 delay-1000 ".concat(j?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),children:(0,s.jsx)("aside",{children:(0,s.jsx)("p",{children:"Build with ♥ and Weaviate \xa9 2024"})})})]}),(0,s.jsx)("img",{referrerPolicy:"no-referrer-when-downgrade",src:"https://static.scarf.sh/a.png?x-pxid=ec666e70-aee5-4e87-bc62-0935afae63ac"})]})}}},function(e){e.O(0,[596,689,520,465,929,582,33,190,400,61,682,420,636,115,864,971,23,744],function(){return e(e.s=87094)}),_N_E=e.O()}]);